{"entry_id": "http://arxiv.org/abs/2303.06932v1", "published": "20230313085512", "title": "Homotopy equivalent boundaries of cube complexes", "authors": ["Talia Fern\u00f3s", "David Futer", "Mark Hagen"], "primary_category": "math.GT", "categories": ["math.GT", "math.GR", "math.MG", "51F99 (Primary) 20F65 (Secondary)"], "text": "\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nmatrix\nmatrix,shapes,backgrounds\n\n\n\n\n\n\n\n\n\n\n\n\n.tifpng.png`convert #1 `dirname #1`/`basename #1 .tif`.png\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n \n\n\ncom\n\nyes\n\n\n        [t]1in[footnote]\n\n\n\nyes\n\n\n\n\n\n\nequationsection\n\ncl\n\n\ntheorem[equation]Theorem\n*theorem'Main Theorem\n*theoremnnTheorem\nquestion[equation]Question\nquestions[equation]Question\nprop[equation]Proposition\nreductionReduction\nclaim[equation]Claim\n*clamClaim\ncor[equation]Corollary\nlemma[equation]Lemma\n*GromovGromov's Lemma\nthmiTheorem\n\n*namedtheorem\n\nnamed[1]\n\ndefinition\ndefinition[equation]Definition\n*remRemark\nremark[equation]Remark\nconvention[equation]Convention\nexample[equation]Example\nfacts[equation]Facts\n\n\n\n\n\n\n(\n    [\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    Mathematics and Statistics Dept., University of North Carolina at Greensboro, Greensboro, NC 27412, USAt_fernos@uncg.eduDept. of Mathematics, Temple University, Philadelphia, PA 19122, USAdfuter@temple.eduSchool of Mathematics, University of Bristol, Bristol BS8 1UG, UKmarkfhagen@posteo.net\n    A finite-dimensional CAT(0) cube complex X is equipped with several well-studied boundaries. These include the \n    Tits boundaryX (which depends on the CAT(0) metric), the Roller boundaryX (which \n    depends only on the combinatorial structure), and the simplicial boundaryX (which also depends only on the combinatorial structure). We use a partial order on a certain quotient of \n    X to define a simplicial Roller boundary  X. Then, we show that X, X, and X are all homotopy equivalent, (X)\u2013equivariantly up to \n    homotopy. As an application, we deduce that the perturbations of the CAT(0) metric introduced by Qing do not affect the equivariant homotopy type of the Tits boundary. Along the way, we develop a \n    self-contained exposition providing a dictionary among different perspectives on cube complexes.\n    Homotopy equivalent boundaries of cube complexes\n        Mark Hagen\n        March 30, 2023\n    ================================================\n    \n    \n    \n    \u00a7 INTRODUCTION\n    \n    \n    CAT(0) cube complexes, which exist in many guises in discrete mathematics (see e.g. <cit.>), were introduced into \n    group theory by Gromov <cit.> and have since taken on a central role in that field.  As \n    combinatorial objects, CAT(0) cube complexes are ubiquitous due to their flexible, functorial construction from set-theoretic data <cit.>.  This has led to an \n    industry of cubulating groups, i.e. \n    constructing group actions on CAT(0) cube complexes in order to transfer  information from the highly organized cubical structure to the group.  Probably the best known application of this method is the resolution of the virtual \n    Haken and virtual fibering conjectures in 3\u2013manifold theory <cit.>.\n    \n    The utility of CAT(0) cube complexes comes from the fact that they simultaneously exhibit several types of structures.  They have an organized combinatorial structure coming from their hyperplanes/half-spaces; this is closely \n    related to the very tractable geometry of their 1\u2013skeleta, which are median graphs<cit.>.  On the other \n    hand, endowing the complex with the piecewise-Euclidean metric in which cubes are Euclidean unit cubes, one gets a CAT(0) \n    space.  So, in studying CAT(0) cube complexes, and groups acting on them, one has a wide variety of tools.\n    \n    This paper is about the interplay between the CAT(0) and combinatorial structures, at the level of boundaries.    \n    We construe the term \u201cboundary\u201d broadly: we include not just  spaces arising as frontiers of injections into compact spaces, \n     but also other spaces encoding some sort of behavior at infinity or large-scale asymptotic structure, such as the Tits boundary. \n    \n    \n    \n    \n    \n     \u00a7.\u00a7 A plethora of boundaries\n     \n    CAT(0) cube complexes have several natural boundaries, each encoding different information, and each defined in terms \n    of either the CAT(0) metric structure or the combinatorial structure coming from the hyperplanes.  Fixing a \n    finite-dimensional CAT(0) cube complex X, one has the following list of boundaries:\n    \n      *  The visual boundaryX. \n          The visual boundary can be defined for any CAT(0) space; see \n    <cit.>.  Points are asymptotic equivalence \n    classes of CAT(0) geodesic rays. The visual topology is defined in such a way \n    that, roughly speaking, rays that fellow-travel for a long time are close.  When X is locally finite, X\u222a X is \n    a compactification of X.  While it is a very useful object, we do not study the visual boundary in this paper.\n    \n    \n      *  The Tits boundaryX.  As with X, the points in X correspond to asymptotic equivalence classes of CAT(0) \n    geodesic rays, but the topology is finer than the visual topology.  Specifically, we equip X with the Tits \n    metric: by taking a supremum of angles between rays\n     one obtains the angle metric, and the \n    induced length metric is the Tits metric, which is CAT(1); see <cit.>.  The Tits boundary encodes much of the \n    geometry of a CAT(0) space; for example, spherical join decompositions of the Tits boundary correspond to product \n    decompositions of the space <cit.>.  Although X is in general not compact even when X is \n    proper, it is  of interest for  other reasons, such as encoding \u201cpartial flat regions\u201d in X. For example, endpoints \n    of axes of rank-one isometries are isolated points, while flats in X yield spheres in X.  We recall the definition \n    of X in Definition\u00a0<ref>.\n    \n    \n      *  The simplicial boundaryX, from <cit.>, is an analogue \n    of the Tits boundary depending on the hyperplane structure, rather than on the CAT(0) metric.  The idea is that certain sets \n    of hyperplanes \u2014 termed unidirectional boundary sets (hereafter, UBSes) \u2014 identify \u201cways of approaching infinity in X.\u201d  Containment of UBSes (modulo finite differences) gives a partial order on \n    UBSes, and this order gives rise to a simplicial complex X (see Definition\u00a0<ref>).  Here are three helpful examples. First, the simplicial boundary of a tree (or, more generally, of a \u03b4\u2013hyperbolic cube complex) is a discrete set \n    of 0\u2013simplices. Second, the simplicial boundary of the standard square tiling of [0,\u221e)^2 is a 1\u2013simplex, whose 0\u2013simplices correspond to the sub-UBSes consisting of the vertical hyperplanes \n    and the horizontal hyperplanes. Third,  the staircase obtained from this square tiling by considering only the cubes below some increasing, unbounded function also has simplicial boundary a \n    1\u2013simplex. (See Figure\u00a0<ref>.) The maximal simplices of X encode such \u201cgeneralized orthants\u201d (namely, convex hulls of \u2113^1\u2013geodesic rays) in X in roughly the same way that the Tits boundary encodes \u201cpartial flats.\u201d\n    \n    The \n    simplicial boundary has been used to study quasi-isometry invariants like divergence<cit.> and \n    thickness<cit.> for groups acting on cube complexes, and has been generalized in the context of \n    median spaces<cit.> as a tool for proving a Tits alternative for groups acting on such spaces.\n    \n    \n    \n    \n      *  The Roller boundaryX gives another way of compactifying X, using the half-space structure associated to the hyperplanes.\n      Each hyperplane \u0125 of X has two complementary components, called half-spaces, h and h^*, which induce a two-sided partition of \n    X^(0).  Each vertex x\u2208 X is completely determined by specifying the collection of half-spaces that contain it.  This gives an injective map X^(0)\u2192 2^\u210c, where \n    \u210c denotes the set of half-spaces.  The closure of the image of X^(0) in the Tychonoff topology is the Roller compactificationX, and X=X\u2216 X^(0) is the \n    Roller boundary of X. (See Definition\u00a0<ref>.) \n    \n    \n    Of the boundaries of X that are defined in terms of the cubical structure only, the Roller boundary is perhaps the most well-studied. It has been used to prove a variety of results about CAT(0) \n    cube complexes and groups acting on them.\n    \n    For example, the Roller boundary plays a key role in the proof that irreducible lattices in _2\u00d7_2 always \n    have global fixed points in any action on a CAT(0) cube complex, while reducible actions always admit proper cocompact \n    actions on CAT(0) cube complexes <cit.>. \n    \n    Nevo and Sageev identified the Roller boundary as a model for the Furstenberg\u2013Poisson boundary of a cocompact lattice in \n    (X)<cit.>.  Fern\u00f3s generalized this result  \n     to groups acting properly and non-elementarily on finite dimensional X, and also proved a Tits alternative \n    <cit.>.   The same paper identifies an important subset of the Roller boundary: the regular points, \n    which \n    correspond to \u201chyperbolic\u201d directions in various senses.  \n    \n    In particular,  the set of regular points with the induced \n    topology is (X)\u2013equivariantly homeomorphic with the boundary of the (hyperbolic) contact graph<cit.>.  The set of regular points is used in\u00a0<cit.> to find rank-one isometries under more \n    general conditions than in previous \n    work\u00a0<cit.>.  The method in <cit.> is to use convergence of random walks to regular points to \n    deduce the existence of regular elements without assuming that the ambient group is a lattice.\n    \n    The set of regular points also features in the proof of marked length spectrum rigidity\u00a0<cit.>, \n    and was independently identified by Kar and Sageev, who used it to study property P_naive and hence \n    C^*\u2013simplicity for cubulated \n    groups <cit.>.  Finally, the Roller boundary has recently been generalized in the context of median spaces \n    <cit.>.\n    \n      \n      \n      *  The simplicial Roller boundaryX is constructed as follows.\n         The Roller boundary X carries a natural equivalence relation, first introduced \n     by Guralnik <cit.>, where two points \n    are equivalent if they differ on finitely many half-spaces.  The equivalence classes, called Roller classes, play a fundamental role in this paper.  Part of the reason for this is that the set of Roller \n    classes carries a natural partial order, which admits several equivalent useful characterizations (see Lemma\u00a0<ref>).  The simplicial Roller boundaryX is the simplicial \n    complex realizing this partial order (see Definition\u00a0<ref>).  \n    \n    In this paper, we build on earlier work relating Roller classes to CAT(0) geodesic rays.  Specifically, Guralnik in\u00a0<cit.> recognized that each equivalence class of CAT(0) geodesic rays  determines a \n    Roller class.  Conversely, in\u00a0<cit.>, it is shown that each Roller class determines a subset of the Tits boundary which admits a canonical circumcenter.  These observations \n    are crucial for our arguments: Definition\u00a0<ref> depends on the latter and Definition\u00a0<ref> is based on the former.\n    \n    We also note that X is isomorphic to the \n     combinatorial boundary defined and studied by Genevois <cit.>. In that work, he explains that the combinatorial boundary is isomorphic to the \n    face-poset of a naturally-defined subcomplex of X<cit.> and is isomorphic to X<cit.>.  (More precisely, Genevois' work yields the map  from Corollary\u00a0<ref> below, although <cit.> does not \n    explicitly mention a homotopy equivalence.)  \n    \n    \n    For each of these boundaries, the action of the group (X) of cubical automorphisms of X extends to an action on the \n    boundary preserving its structure. The actions on X and X are by homeomorphisms, the action on X is by isometries of the Tits metric, and the actions on X and X are by simplicial automorphisms.\n    \n    The definitions of the simplicial boundary and the simplicial Roller boundary are conceptually similar. Part of the work \n    in this paper is making that similarity precise, by establishing a correspondence between Roller classes and equivalence \n    classes of UBSes. This line of work culminates in Corollary\u00a0<ref>, which gives explicit maps between X and a \n    natural subcomplex of X. These maps are (X)\u2013equivariant homotopy equivalences, although in general they are \n    not simplicial isomorphisms.  Then, in Proposition\u00a0<ref>, we upgrade this to a homotopy equivalence \n    between X and the whole of X.\n    \n    One glimpse of a relationship between X and X comes from UBSes associated to geodesic rays. Given a geodesic ray \u03b1\u2192 X, in either the CAT(0) metric or the combinatorial metric, the set of hyperplanes crossing \u03b1 (denoted (\u03b1)) is always a UBS. A UBS  is called \u2113^1\u2013visible (resp. \u2113^2\u2013visible) if it is has finite symmetric difference with (\u03b1) for a combinatorial (resp. CAT(0)) geodesic \u03b1. Figure\u00a0<ref> shows examples of both \u2113^1\u2013invisible and \u2113^2\u2013invisible UBSes. Despite those caveats, \u2113^2\u2013visible UBSes provide a way to map points of X to classes in X; a similar construction also provides a map to X. \n    \n    \n    \n     \u00a7.\u00a7 Main result\n      Our main theorem relates X, X, and  X via maps that are (X)\u2013equivariant up to homotopy.  \n    It helps to introduce the following terminology.  \n    \n    \n    Suppose \n    that A,B are topological spaces with a group G acting on both spaces by homeomorphisms.  A map f  A \u2192 B is called a\n    a  homotopy equivalence \n    if f is a homotopy equivalence, and furthermore  g\u2218 f and f\u2218 g are \n    homotopic for every g\u2208 G.  If such an f exists, we say that A,B are  homotopy equivalent.\n    \n    \n    It is immediate to check that the property of being  homotopy equivalent is an equivalence relation. \n    Indeed, the composition of two  homotopy equivalences is a  homotopy equivalence. Furthermore, any homotopy inverse of a  homotopy equivalence is itself a\n     homotopy equivalence. \n    \n    \n    \n    Let X be a finite-dimensional CAT(0) cube complex.  Then \n    we have the following commutative diagram of  homotopy equivalences between boundaries of X:\n    \n    \n      X       ^       X  \n       _      _   \n          _ X      \n    In particular, the spaces X, X, X are all  homotopy equivalent, where X is equipped with the metric topology and X, X are equipped with either the \n    metric or the weak topology.\n    \n    \n    In the above diagram, the letter S stands for Simplicial, the letter R for Roller-simplicial, and the letter T \n    for Tits.  The map  is an  homotopy equivalence from the simplicial boundary to the Tits \n    boundary, and similarly for the other two.  The map  is provided by Corollary\u00a0<ref>, and the \n    map  comes from Proposition\u00a0<ref>.  The map  is just the composition =\u2218.\n    \n    Some intuition behind the theorem can be gleaned from the following simplified situation. A cube complex X is called fully visible if every UBS is \u2113^1\u2013visible. \n     When X is fully visible, UBSes correspond to combinatorial \n    orthants in X (i.e. products of combinatorial geodesic rays) <cit.>, and Theorem\u00a0<ref> can be understood as relating \n    combinatorial orthants to CAT(0) orthants. See\u00a0<cit.>, where a proof is sketched that the simplicial and \n    Tits \n    boundaries are homotopy equivalent under the restrictive hypothesis of full visibility.  However, \n     full visibility is a very strong and somewhat mysterious hypothesis: it is not known to hold even if X \n    admits a proper cocompact group action <cit.>. Thus \n    Theorem\u00a0<ref> is more satisfying (and difficult) because it does not assume this restrictive hypothesis. In order to prove the theorem, we have \n    to understand combinatorial convex hulls of CAT(0) geodesic rays, which is a much more delicate affair when one is not \n    simply assuming that these hulls can be taken to contain Euclidean orthants.\n    \n    Theorem\u00a0<ref> also motivates the introduction of several new technical tools for relating the geometry of CAT(0) geodesic rays to the combinatorics of hyperplanes. We believe that these tools, explained in Section\u00a0<ref>, are of independent interest.\n    \n    \n    \n    \n      \n    \n     \u00a7.\u00a7 Invariance of CAT(0) boundaries for cubulated groups\n    \n    A group G is called CAT(0) if there is a proper CAT(0) space X on which G acts \n    geometrically (properly and cocompactly).  Multiple CAT(0) spaces might admit a geometric G\u2013action and witness that G is a CAT(0) group.  Since we are often \n    interested in invariants of the group itself, it is natural to look for features of the geometry of X that  depend \n    only on G.  For instance, in the context of a Gromov hyperbolic group G, recall that all hyperbolic groups with a geometric G\u2013action have Gromov boundaries that are G\u2013equivariantly homeomorphic. So one might wonder whether a similar result might hold for CAT(0) groups that are not hyperbolic.\n    \n    A famous result of Croke and Kleiner  <cit.>, on \n    which we elaborate more below, shows that this is not the case.  Explicitly, they considered the right-angled Artin group\n    \n        G=\u27e8 a,b,c,d : [a,b],[b,c],[c,d]\u27e9,\n    \n    whose Cayley 2-complex X_\u03c0/2 is a CAT(0) square complex. The subscript \u03c0/2 emphasizes the angles at the corners of the 2\u2013cells. Viewing the 2\u2013cells as Euclidean squares with \n    side length 1, we obtain a CAT(0) space where G acts geometrically.  Croke \n    and Kleiner deformed the squares of X into rhombi that have angles \u03b1 and \u03c0 - \u03b1, producing a perturbed \n    CAT(0) metric X_\u03b1,\n    and showed that this perturbation changes the homeomorphism type of the visual boundary X_\u03b1. Subsequently, Wilson\n    <cit.> showed that the visual boundaries of X_\u03b1 and X_\u03b2 are homeomorphic only if the angles satisfy \n    \u03b1=\u03b2, hence these perturbations produce  uncountably many homeomorphism types of boundaries.  Further examples are \n    provided by Mooney <cit.>, who exhibited CAT(0) knot groups G \n    admitting uncountably many geometric actions on CAT(0) spaces, all with different visual boundaries.  Hosaka <cit.> \n    has given some conditions on G,X,Y implying that there is an equivariant homeomorphism X\u2192 Y \n    continuously extending the quasi-isometry X\u2192 Y coming from orbit maps, but the preceding examples show that any such \n    condition will be hard to satisfy.\n    \n    So, one has to look for weaker results or less refined invariants, or ask slightly different questions.  This has stimulated \n    a great deal of work in various directions.  \n    \n    In the context of 2\u2013dimensional CAT(0) complexes, there are more positive results obtained by replacing the visual \n    boundary X by the Tits boundary X, and passing to a natural subspace.  Specifically, the core of X is the union of \n    all embedded circles in X. \n     Xie <cit.> showed that if G acts \n    geometrically on CAT(0) 2\u2013complexes X and Y, then the Tits boundaries X and Y have homeomorphic cores.\n    (This is weaker than Xie's actual statement; compare <cit.>.)   In the Croke\u2013Kleiner example, the core is a G\u2013invariant connected \n    component, while the rest of the Tits boundary consists of uncountably many isolated points and arcs.  \n    \n    There is a closely related result due to Qing, which inspired us to consider cuboid complexes in the present paper.  \n    Another way to perturb the CAT(0) metric on a CAT(0) cube complex X is to leave the angles alone, but to vary the lengths \n    of the edges in such a way that \n    edges intersecting a common  hyperplane are given equal length. In this perturbation, each cube becomes a Euclidean box \n    called a cuboid.  The resulting path metric is still CAT(0), at least when there are uniform upper and lower bounds \n    on \n    the edge-lengths. In particular, this happens when some group G acts on X with \n    finitely many orbits of hyperplanes, and the edge-lengths are assigned G\u2013equivariantly.   We explain the details in \n    Section\u00a0<ref>,  \n    where we define a G\u2013admissible hyperplane rescaling in Definition\u00a0<ref> and  show in \n    Lemma\u00a0<ref> that the resulting path-metric space (X,^\u03c1_X) \n    is CAT(0) and G continues to act by isometries.  Cuboid complexes have been studied by various authors, including Beyrer \n    and Fioravanti <cit.>.\n    \n    Qing <cit.> studied the visual boundary of the CAT(0) cuboid metric under perturbation of the edge-lengths. She showed that \n    the visual boundaries of the CAT(0) cuboid complexes obtained from the  Croke\u2013Kleiner complex X_\u03c0/2 are all \n    homeomorphic. More germane to the present paper, Qing also showed that the Tits boundaries of the rescaled cuboid complexes \n    are homeomorphic, but that no  equivariant homeomorphism exists.  (Roughly, the cores of any two such Tits boundaries are \n    homeomorphic by the result of Xie mentioned above. Via a cardinality argument, Qing extends the \n    homeomorphism over the whole boundary by sending isolated points/arcs to isolated points/arcs.  But this extension cannot be \n    done equivariantly because equivariance forces some isolated points to be sent to isolated arcs and vice versa.)  We will \n    return to cuboid complexes shortly.\n    \n    There are other results about homeomorphism type as a CAT(0) group invariant for certain classes of CAT(0) groups.  For \n    example, Bowers and Ruane <cit.> showed that if G is a product of a hyperbolic CAT(0) group and \n    ^D, then the visual boundaries of the CAT(0) spaces X and Y with a geometric G\u2013action are equivariantly homeomorphic. However, this equivariant homeomorphism need not come from a continuous extension of a quasi-isometry X \u2192 Y.  Later, Ruane  <cit.> extended this result to the case where G is \n    a CAT(0) direct product of two non-elementary hyperbolic groups. \n    \n    Around the same time, Buyalo studied groups of the form G=\u03c0_1(S)\u00d7\u2124, where S is a hyperbolic surface <cit.>. He constructed two distinct geometric G\u2013actions on \u210d^2\u00d7 and showed that while the two copies of \u210d^2\u00d7 are G\u2013equivariantly quasi-isometric, the Tits boundaries do not admit any G\u2013equivariant quasi-isometry. \n    \n    Since we are interested in G\u2013equivariant results, it makes sense to seek more general positive results by replacing homeomorphism with a coarser equivalence relation.  This \n    has been a successful idea: Bestvina <cit.> proved that torsion-free CAT(0) groups have a well-defined visual \n    boundary up to shape-equivalence. \n    This was generalized by Ontaneda <cit.>, whose result removes the \u201ctorsion-free\u201d \n    hypothesis.\n    \n    \n    Homotopy equivalence is a finer equivalence relation than shape equivalence.  Might there be some result guaranteeing that the \n    homotopy type of the Tits boundary of X is to some extent independent of the choice of the CAT(0) space X, even if we \n    allow only homotopy equivalences between boundaries that respect the G\u2013action in the appropriate sense? One precise version of this question appears below as Question\u00a0<ref>.\n    \n    \n    Motivated by Qing's results about perturbing the metric on a CAT(0) cube complex by changing edge lengths, we consider the \n    situation where G acts on the finite-dimensional CAT(0) cube complex X, and study the Tits boundaries of the CAT(0) spaces \n    that result from G\u2013equivariantly replacing cubes by cuboids.  Now, the hyperplane combinatorics, and hence the simplicial \n    and Roller boundaries, are unaffected by this change.  And, for the unperturbed X, Theorem\u00a0<ref> tells us \n    that the homotopy type of the Tits boundary is really a feature of the hyperplane combinatorics.  So, in order to conclude \n    that the homotopy type of the Tits boundary is unaffected by such perturbations of the CAT(0) metric, we just need to know \n    that Theorem\u00a0<ref> holds for cuboid complexes as well as cube complexes.  \n    Indeed, we show:\n    \n    \n    \n     Let X be a finite-dimensional CAT(0) cube complex and let G be a group acting by automorphisms on X. Let (X,^\u03c1_X) be the CAT(0) cuboid complex obtained \n    from a G\u2013admissible hyperplane rescaling of X.  Then the original Tits boundary X, the perturbed Tits boundary (X,^\u03c1_X),  the simplicial boundary X, and the simplicial Roller boundary X are \n    all  homotopy equivalent. \n    \n    \n    The proof of this result only requires minor modifications to the proof of Theorem\u00a0<ref>,\n    essentially because convexity of \n    half-spaces and the \n    metric product structure \n    of hyperplane carriers persist in the CAT(0) cuboid \n    metric ^\u03c1_X.\n    These small modifications  are described in \n    Sections\u00a0<ref>, <ref>,  and <ref>. \n    \n    The theorem implies, in particular, that if X admits a geometric action by a group G, then the  homotopy type of \n    the Tits boundary is unaffected by replacing the standard CAT(0) metric (where all edge lengths are 1) with a \n    cuboid metric obtained by rescaling edges G\u2013equivariantly. This is perhaps evidence in favor of the possibility that the \n    results of Bestvina and Ontaneda about shape equivalence of visual boundaries <cit.> can be strengthened to results about  \n    homotopy equivalence if one instead uses the Tits boundary:\n    \n    \n    For which CAT(0) groups G is it the case that any two CAT(0) spaces X,Y on which G acts geometrically have  \n    homotopy equivalent Tits boundaries?\n    \n    If G acts geometrically on CAT(0) cube complexes X,Y, are the simplicial boundaries of X,Y \n    homotopy equivalent?\n    \n    \n     \u00a7.\u00a7 Quasiflats\n    \n    A remarkable theorem of Huang <cit.> says that if X is a d\u2013dimensional CAT(0) cube complex, then any quasi-isometric embedding ^d\u2192 X has image that is \n    Hausdorff-close to a finite union of cubical orthants, i.e. a convex subcomplex that splits as the product of rays.  This statement is important for the study of quasi-isometric rigidity in cubical groups, and it is natural to want to strengthen the \n    statement to cover quasi-isometric embeddings ^d\u2192 X, where d is the largest dimension for which such a map exists, but X is allowed to be larger than d (although still \n    finite).  Natural examples where this strenthened form of Huang's theorem is useful include right-angled Coxeter groups.\n    \n    We believe that Theorem\u00a0<ref> could be used as an ingredient in proving such a result.  Very roughly, the homotopy equivalence X\u2192 X can be used to \n    produce, given a singular d\u2013cycle z in X, a simplicial d\u2013cycle z' in X represented by a finite collection of standard orthants in X.  By the latter, we mean there is a \n    finite collection of d\u2013simplices in X whose union S carries z'.  The proof of Theorem\u00a0<ref>,\n    specifically Proposition\u00a0<ref> and the nerve arguments in Sections\u00a0<ref> and\u00a0<ref>,\n    should provide enough metric control on the map S\u2192 X \n    to invoke a result of Kleiner\u2013Lang\u00a0<cit.> to deduce the strengthened quasiflats theorem.  \n    Given that the \n    strengthened quasiflats theorem has recently been established by \n    Bowditch\u00a0<cit.> and independently Huang\u2013Kleiner\u2013Stadler\u00a0<cit.>, we have decided not \n    to pursue the matter in this paper.\n    \n    \n    \n    \n    \n     \u00a7.\u00a7 Ingredients of our proof\n    \n    \n    As mentioned above, our primary goal is to elucidate the relationships among three boundaries: the simplicial boundary X, the simplicial Roller boundary X, and the Tits boundary X. \n    \n    The first two boundaries that we study are combinatorial in nature. The primary difference is that the central objects in X are sequences of hyperplanes, whereas the central objects in X are sequences of half-spaces. After developing a number of lemmas that translate between the two contexts, we prove the following result:\n    \n    Corollary\u00a0<ref>\n    The barycentric subdivision of X contains a canonical, (X)\u2013invariant subcomplex X. There are (X)\u2013equivariant \n     simplicial maps X\u2192 X and X \u2192  X, with the following properties:\n    \n      * X\u2192 X is  surjective.\n    \n      * X \u2192  X  is an injective section of .  \n    \n      *  is a homotopy \n    equivalence with homotopy inverse  .\n    \n    \n     In fact, all of X deformation retracts to X in an \n     (X)\u2013equivariant \n     way. See Remark\u00a0<ref>.\n    \n    In contrast to the the two combinatorial boundaries, the Tits boundary X is  inherently linked to the geometry of the CAT(0) metric on X.\n    To relate the Tits boundary to the other two boundaries, we need to combinatorialize it: that is, we need to cover X by a certain collection of open sets, and then study the nerve of the \n    corresponding covering. Similarly, we cover each of X and X by simplicial subcomplexes, and study the resulting nerves. We will use two different versions of the nerve theorem to \n    show that a topological space (such as one of our boundaries) is homotopy equivalent to the nerve of a covering. The Open Nerve Theorem <ref> deals with open coverings and is \n    originally due to Borsuk <cit.>. The Simplicial Nerve Theorem <ref> deals with coverings by simplical complexes and is originally due to Bj\u00f6rner \n    <cit.>. In fact, since Theorem\u00a0<ref> is a G\u2013equivariant statement, we need equivariant versions of both theorems, which have not previously appeared in the literature \n    to our knowledge. Consequently, Section\u00a0<ref> contains self-contained proofs of both theorems. \n    \n    \n    \n    A central object in our construction of nerves is the Tits boundary realization of a Roller class, or point in  the Roller boundary (see Definitions\u00a0<ref>, <ref><ref> \n    ). In <cit.>, a Roller class v, yields a convex, visually compact subset of the Tits boundary X. Employing the work of Caprace\u2013Lytchak <cit.> and \n    Balser\u2013Lytchak <cit.>, this set has radius at most \u03c0/2 and\n    a canonical circumcenter (v). A first approach might be to use these compacta to provide the 0\u2013skeleton of a nerve for X that will be homotopy equivalent to X. However, \n    several issues arise. First, these associated convex closed sets must be made smaller so that their overlaps can be controlled. This is achieved by considering points in the Roller boundary versus \n    their classes.\n    \n    Secondly, the issue of \u2113^2\u2013visibility, or rather invisibility must be addressed. A Roller class, (respectively a UBS) is \u2113^2\u2013visible if it is the intersection (respectively union) of the deep half-spaces (respectively hyperplanes) naturally associated to a CAT(0) geodesic ray \u03b1.  As Figure\u00a0<ref> shows, some Roller classes are not \u2113^2\u2013visible, and invisible classes cause headaches when trying to connect this data to the Tits boundary. In particular, if v is an invisible Roller class, then we will have Q(v) = Q(w) for any Roller class w < v.\n    To confront this challenge, we have to find a single  class which is maximal among the visible Roller classes represented by rays with endpoints in Q(v). Proving the existence of such a maximal class requires finding a single geodesic ray that is diagonal, in the sense that its convex hull is the union of the convex hulls of two geodesic rays.\n    In particular, we need the following statement, which is of independent interest:\n      \n      \n     Proposition\u00a0<ref>\n    Let \u03b1, \u03b2 be CAT(0) geodesic rays with \u03b1(0) = \u03b2(0) \u2208 X^(0).\n    Suppose that (\u03b1)\u222a(\u03b2) is commensurate \n    with a UBS.  Then a=\u03b1(\u221e) and b=\u03b2(\u221e) are joined by a unique geodesic \n    g in X. Furthermore, any interior point c of g is represented by a CAT(0) geodesic ray \u03b3 \n    such that (\u03b3)  = (\u03b1)\u222a(\u03b2).\n    \n      \n    \n    Next, \n    we consider maps between X and X that  relate these boundaries.\n     The first of these maps, called \u03c8 X \u2192 X, \n     is fairly easy to describe. A Tits point a \u2208 X is represented by a CAT(0) geodesic ray \u03b1 and  the intersection of half-spaces which are \u201cdeep\" yields a (principal) Roller class \u03c8(a).  \n     See Definition\u00a0<ref> and Lemma\u00a0<ref>. The reverse map  \u03c6 X \u2192 X is somewhat more delicate: given a Roller class v, we start with the circumcenter (v) \u2208 Q(v) and then perturb (v) to a nearby point \u03c6(v) that has slightly better properties. \n     See Definition\u00a0<ref> and Proposition\u00a0<ref> for details, and note that the perturbation uses Proposition\u00a0<ref> in a crucial way. The upshot is that \u03c6 is a section of \u03c8 on exactly the \u2113^2\u2013visible classes: we have v = \u03c8(\u03c6(v)) if and only if v is \u2113^2\u2013visible (Lemma\u00a0<ref>). \n    \n     \n    We can now construct nerves and prove results about them. We begin by defining the set (X) of all visible Roller classes that are maximal among all \u2113^2\u2013visible classes. Then, we construct a simplicial complex _T whose vertex set is (X), with simplices corresponding to collections of Roller classes v_i whose Tits boundary realizations Q(v_i) all intersect. We check that this is indeed the nerve of a cover of X (Corollary\u00a0<ref>). Then, we prove:\n    \n    Theorem\u00a0<ref>\n    There is an  homotopy equivalence from  the simplicial complex _T to X. \n    \n    The proof of Theorem\u00a0<ref> requires an open thickening. The sets Q(v) are closed (in fact, compact), and we do not have a version of the Nerve Theorem for closed covers. Thus we thicken up each compact set Q(v) to an open set U(v), in such a way that the intersection pattern of the open cover {U(v) :v\u2208(X) } is the same as that of the closed cover {Q(v):v\u2208(X)}. The thickening procedure involves some delicate CAT(0) geometry; see Proposition\u00a0<ref>. As a result, we obtain an open cover of X whose nerve is isomorphic to the nerve of the closed cover, namely _T. Now, the Equivariant Open Nerve Theorem\u00a0<ref> gives an  homotopy equivalence _T \u2192 X.\n     \n    There are two reasons why the  homotopy equivalence in Theorem\u00a0<ref> is not (X)\u2013equivariant. First, the Equivariant Open Nerve Theorem\u00a0<ref> does not provide (X)\u2013equivariance on the nose. Second, while the collection of Tits boundary realizations Q(v_i) is (X)\u2013equivariant, the perturbed circumcenter map \u03c6 might not be. For these reasons,  homotopy equivalence is the strongest form of invariance that we can guarantee.\n     \n     In  Section\u00a0<ref>, we use all of the above results  to complete the proof of Theorem\u00a0<ref>. We already have an open cover of X whose nerve is _T. \n    Working in X, we focus attention on a subcomplex X whose vertex set corresponds to the \u2113^2\u2013visible Roller classes, and then construct a cover of X by finite \n    simplicial complexes {\u03a3_v : v \u2208 X}. It is not too hard to check that the nerve _ of this cover is isomorphic to _T, which implies that X and \n    X  are  homotopy equivalent (Proposition\u00a0<ref>). To complete the construction of an  homotopy equivalence X \u2192 X, we build an  deformation retraction  ^ X \u2192 X; see Proposition\u00a0<ref>. While the construction of this retraction is \n    mostly combinatorial, it relies on CAT(0) geometry and the perturbed circumcenter map \u03c6 at one crucial step.\n     \n    \n    Finally,  the homotopy equivalence X \u2192 X is morally very similar to the simplicial map X\u2192 X constructed in\n     Corollary\u00a0<ref>. To make the argument precise, we construct isomorphic nerves of simplicial covers of \n     X and X and apply the Equivariant Simplicial Nerve Theorem\u00a0<ref> one final time.\n    \n    \n    \n    \n     \u00a7.\u00a7 Expository content\n    \n    Part of our goal in this paper is to provide exposition of varying aspects of cubical theory. \n     CAT(0) cube complexes are ubiquitous objects that have been well-studied in many different guises. Accordingly, there are several different \n    viewpoints, and various important technical statements are stated and proved in a variety of different ways throughout the literature.  Therefore, we have endeavored to give a self-contained \n    discussion of CAT(0) cube complexes combining some of these viewpoints.  \n    \n    Also, throughout the paper, we make heavy use of the nerve theorem, for both open and simplicial covers. Results of this sort were originally proved by Borsuk\u00a0<cit.>, and are now widely used in many slightly different forms.  To the best of our knowledge, the existing literature does not contain a version of the nerve theorem for covers of simplicial complexes by locally infinite families of subcomplexes, with a conclusion that provides equivariance with respect to group actions on the input data.\n    Since we could not find a written account of such a result, we have given self-contained proofs (based on arguments in\u00a0<cit.>) in Section\u00a0<ref>.\n    \n    \n    \n     \u00a7.\u00a7 Section Breakdown\n    \n    Section\u00a0<ref> establishes some language about simplicial complexes and proves equivariant versions of two nerve theorems.  Section\u00a0<ref> is devoted to background on CAT(0) cube complexes and the Roller boundary.  In \n    Section\u00a0<ref>, we discuss CAT(0) cuboid complexes coming from an admissible rescaling of the hyperplanes.  Section\u00a0<ref> introduces the simplicial Roller \n    boundary. In Section\u00a0<ref>, we introduce UBSes and the simplicial boundary, and relate these to Roller classes and the simplicial Roller boundary.  In Section\u00a0<ref>, \n    we introduce the Tits boundary and prove some technical results relating CAT(0) geodesic rays to Roller classes and UBSes.  We apply these in Section\u00a0<ref> to analyze the \n    realizations of Roller classes in the Tits boundary.  These results are in turn used in Section\u00a0<ref> to prove that the Tits boundary is homotopy equivalent to a \n    simplicial complex _T arising as the nerve of the covering by open sets associated to certain Roller classes.  In Section\u00a0<ref>, we realize this nerve as the nerve of a covering of the \n    simplicial Roller boundary by subcomplexes associated to Roller classes, and deduce Theorems\u00a0<ref> and\u00a0<ref>.  \n    \n    See Table\u00a0<ref> for a summary of the notation used in this paper.\n    \n    \n    \n    \n     \u00a7.\u00a7 Acknowledgments\n    \n    We are grateful to Craig Guilbault, Jingyin Huang, Dan Ramras, and Kim Ruane for some helpful \n    discussions. \n    We thank the organizers of the conference \u201cNonpositively curved groups on the Mediterranean\u201d in May of 2018,  where the three of us began collaborating as a unit.\n    Fern\u00f3s was partially supported by NSF grant DMS\u20132005640.\n    Futer was partially supported by NSF grant DMS\u20131907708.\n    Hagen was partially supported by EPSRC New Investigator Award EP/R042187/1.\n    \n    \n    \n    \u00a7 SIMPLICIAL COMPLEXES AND NERVE THEOREMS\n    \n    Throughout the paper, we will make use of simplicial complexes and assume that the reader is familiar with these objects.  \n    For clarity, we recall the definition and describe two topologies on a simplicial complex.\n    Then, in Section\u00a0<ref>, we prove two group-equivariant homotopy equivalence theorems about nerves of covers.\n    \n    A k\u2013simplex is the set \n    \n        \u03c3={a_0e_0+\u22ef+a_ke_k  | \u2211_i=0^ka_k=1 and a_i\u2265 0 for all i},\n    \n    where e_0,\u2026,e_k are the standard basis vectors in ^k+1.  A face of \u03c3 is a j\u2013simplex \n    obtained by restricting all but j\u2013many \n      of the a_i to 0.  Note that \u03c3 has a CW complex structure where the 0\u2013cells \n    are the 0\u2013dimensional faces and, more generally, the j\u2013cells are the j\u2013dimensional faces.\n    \n    A simplicial complex is a CW complex  whose closed cells are simplices, such that\n    \n      *  each (closed) simplex is embedded in , and\n         \n      *  if \u03c3,\u03c4 are simplices, then \u03c3\u2229\u03c4 is either empty or a face of both \u03c3 and \n    \u03c4.  In particular, simplices with the same 0\u2013skeleton are equal.\n    \n    We often refer to 0\u2013simplices of  as vertices and 1\u2013simplices as edges.   \n    \n    As a CW complex,  is endowed with the weak topology:\n    \n    \n        Let  be a simplicial complex. The weak topology\ud835\udcaf_w on   is characterized by the property that a set C \u2282 is closed if and only if C \u2229\u03c3 \n    is closed for every simplex \u03c3\u2282.  \n    \n    \n    \n    \n    In some of the arguments in this section, it will be more convenient to work with the metric topology on the simplicial complex .  \n    \n    \n    \n     Let  be a simplicial complex.  Let V be the real vector space consisting of functions f ^(0)\u2192 such that f(v)\u2260 0 for finitely many v\u2208^(0).  \n     Then there is a \n    canonical inclusion ^(0)\u21aa V, where every vertex v \u2208^(0) maps to the corresponding Dirac function \u03b4_v \u2208 V.  This map extends affinely over \n    simplices endowed with barycentric coordinates to give an inclusion \u21aa V. \n    \n    Equip V with the \u2113^2 norm \n        f^2=\u2211_v\u2208^(0)f^2(v),\n     which is well-defined since every f\u2208 V is finitely supported.  The restriction of the resulting metric topology on V \n    to the subspace  is the metric topology on , denoted \ud835\udcaf_m.\n    \n    \n    The metric topology is coarser than the weak topology, hence the identity map \ud835\udd40_ (,\ud835\udcaf_w)\u2192(,\ud835\udcaf_m) is always continuous. When a simplicial complex \n     is locally infinite, the inverse map (,\ud835\udcaf_m)\u2192(,\ud835\udcaf_w) is not continuous.  However, Dowker proved  that \ud835\udd40_ is a homotopy equivalence even when \n     is locally infinite\u00a0<cit.>. \n     Since our interest is in the homotopy type of , Dowker's theorem will be very useful.\n    \n    \n    Unless stated otherwise, a simplicial complex  is presumed to have the weak topology \ud835\udcaf_w. The metric topology will only be needed in Lemma\u00a0<ref> and Theorem\u00a0<ref>, and never afterward.\n    \n    \n    \n    Some of the simplicial complexes used later will  arise from partially ordered sets, as follows.\n    \n    \n    Given a partially ordered set (P,\u2264), there is a simplicial complex S in which the k\u2013simplices are \n    the (k+1)\u2013chains in (P,\u2264), and the face relation is determined by containment of chains.  We call S the simplicial realization of the partially ordered set \n    (P,\u2264). \n    \n    \n    In several other places, we will work with simplicial complexes arising as nerves of coverings of topological spaces:\n    \n    \n     Let Y be a topological space and let \ud835\udcb0={Y_i}_i\u2208 I be a covering of Y, i.e. a family of subsets with Y=\u22c3_i\u2208 IY_i.  The nerve of \ud835\udcb0 is the simplicial \n    complex  with a vertex v_i for each Y_i, and with \n    an n\u2013simplex spanned by v_i_0,\u2026,v_i_n whenever\n    \u22c2_j=0^nY_i_j\u2260\u2205.  \n    \n    \n    Note that we have defined nerves for arbitrary coverings of arbitrary topological spaces.  In practice, we will restrict Y and \ud835\udcb0: either Y is a paracompact space and \n    \ud835\udcb0 is an open covering, or Y is itself a simplicial complex and \ud835\udcb0 is a covering by subcomplexes.  These assumptions provide the settings for the nerve theorems, which relate the homotopy type of Y to that of the nerve of \ud835\udcb0.\n    \n    \n    \n     \u00a7.\u00a7 Equivariant nerve theorems\n    \n    \n    In this section, we prove two flavors of nerve theorem that are needed in our proofs of homotopy equivalence. Theorem\u00a0<ref> is a group-equivariant version of the classical nerve theorem for open coverings, originally due to Borsuk <cit.>. Similarly, Theorem\u00a0<ref> is an equivariant version of the nerve theorem for simplicial complexes, which is due to Bj\u00f6rner <cit.>.\n    \n    \n    We need the following standard fact:\n    \n    \n     Let Y be a topological space and   a simplicial complex  endowed with the metric topology. \n     Let \n    f_0,f_1  Y\u2192 (,\ud835\udcaf_m) be continuous maps.  Suppose that, for all y\u2208 Y, \n    there exists a closed simplex \u03c3 of  such that \n    f_0(y), f_1(y)\u2208\u03c3.  Then f_0 and f_1 are homotopic via a straight line homotopy.\n    \n    By abuse of notation, we identify  with the embedding \u21aa V described in Definition\u00a0<ref>. Then f_0, f_1  Y \u2192 V are continuous functions. For y \u2208 Y and t \u2208 [0,1], define the affine combination f_t(y) = \n    (1-t)f_0(y) + t f_1(y). Then \n    (y,t) \u21a6 f_t(y) is a continuous mapping from Y \u00d7 [0,1] to V. Furthermore, for every y \u2208 Y, the image f_t(y) = (1-t)f_0(y) + t f_1(y) belongs to the same simplex \u03c3\u2282 that contains f_0(y) and f_1(y). Thus we get a straight line homotopy f_t  Y \u2192.\n    \n    Let Y be a paracompact space, on which a group G acts by homeomorphisms.  Let I be a set equipped with a left G\u2013action, and let \n    ={Y_i}_i\u2208 I be an open covering of Y with the following properties:\n    \n      * gY_i=Y_gi for all g\u2208 G and i\u2208 I;\n         \n      *  for any finite F\u2282 I, the intersection \u22c2_i\u2208 FY_i is either empty or \n    contractible.\n    \n    Let  be the nerve of the covering .  \n    \n    Then G acts on  by simplicial automorphisms, and there is \n    a  homotopy equivalence f  Y\u2192(,\ud835\udcaf_m).\n    Consequently, there is also a \n      homotopy equivalence Y\u2192 (,\ud835\udcaf_w).\n    \n    If the G\u2013action is trivial, this result is the classical nerve theorem, proved for instance in Hatcher\u00a0<cit.>.\n    We adapt Hatcher's line of argument, accounting for the G\u2013action where necessary.  Until we say otherwise, at the very end of the proof, the nerve  will be equipped with the metric \n    topology \ud835\udcaf_m.\n    \n    Simplices comprising the nerve:  Let \u2131 be the set of \n    finite subsets F\u2282 I \n    such that \u22c2_i\u2208 FY_i\u2260\u2205.  Then, by Definition\u00a0<ref>, every finite set F \u2208\u2131 can be canonically identified with the set of vertices of a simplex \u03c3(F) \u2282.\n    The partial order on \u2131 given by set inclusion corresponds to the face relation on .\n    The action of G on   induces an action on \u2131, hence a simplicial action on .\n    \n    The space Y and its quotient maps:  Let \u03c3= \u03c3(F) be a simplex \n    of , corresponding to a finite set F \u2208\u2131. \n    Let U_F = \u22c2_i \u2208 F Y_i, a contractible open set, and consider the product U_F \u00d7\u03c3(F) \u2282 Y \u00d7. Then, define\n    \n        Y = \u22c3_F \u2208\u2131( U_F \u00d7\u03c3(F) )  \u2282  Y \u00d7.\n    \n     The diagonal G\u2013action on Y \u00d7 induces a G\u2013action on Y.\n    The projections from Y \u00d7 to its factors restrict to G\u2013equivariant projection maps\n    \n        p  Y \u2192 Y,      q  Y \u2192.\n    The homotopy equivalence Y \u2192:  \n     Given a point x \u2208 contained in the interior of a simplex \u03c3(F), the fiber  q^-1(x) = U_F \u00d7{x} is contractible by hypothesis.  Thus, by <cit.>, \n    the projection q  Y \u2192 is a homotopy equivalence.\n    \n    The fiber p^-1(y):\n    Fix y\u2208 Y, and consider the fiber \n    p^-1(y). Let (y,x) \u2208 p^-1(y) \u2282 Y \u00d7. Let \u03c3(F) be a simplex of  containing x = q(y,x). The vertices of \u03c3 correspond to the elements of F, hence to subsets Y_i for i \u2208 F.\n    We endow \u03c3(F) with barycentric coordinates, so that\n     x = \u2211_i \u2208 F\u03b2_i Y_i where \u2211\u03b2_i = 1. Thus\n     \n        p^-1(y) = {(y,  \u2211_i \u2208 F\u03b2_i Y_i )   |   y \u2208 U_F , F \u2208\u2131} = {y}\u00d7\u03a3_y\n    \n    for a simplicial subcomplex \u03a3_y \u2282. Since the projection p  Y \u2192 Y is G\u2013equivariant, we have\n    \n        {gy}\u00d7 g \u03a3_y   =   g (  {y}\u00d7\u03a3_y )   =   g p^-1(y) = p^-1(gy)   =  {gy}\u00d7\u03a3_gy,\n    \n    and in particular g \u03a3_y = \u03a3_gy.\n    \n    \n    For any pair of points x,x' \u2208\u03a3_y, belonging to simplices \u03c3(F), \u03c3(F') of , we have y \u2208 U_F \u2229 U_F' = U_F \u222a F'. Thus there is also a simplex \u03c3(F \u222a F') containing both \u03c3(F) and \u03c3(F') as faces. It follows that x,x' are connected by an affine line segment in the common simplex \u03c3(F \u222a F'). \n    In other words, \u03a3_y is convex.\n    \n    \n    The section s  Y \u2192 Y:  \n    Since Y is paracompact, there is a partition of unity {\u03d5_\u03b1}_\u03b1\u2208 A subordinate to = {Y_i}_i \u2208 I. That is,\n     for each \u03b1\u2208 A, we have (\u03d5_\u03b1)  \u2282 Y_i(\u03b1) for some i(\u03b1) \u2208 I.\n      Given y\u2208 Y, let A(y) = {\u03b1\u2208 A : y \u2208(\u03d5_\u03b1) }, a finite set.\n    Then, define\n    \n        f(y) = \u2211_\u03b1\u2208 A(y)\u03d5_\u03b1 (y) Y_i (\u03b1) \u2208 \u03a3_y\n            and    \n        s(y) = ( y, f(y) )\n          \u2208  \n        p^-1(y) .\n     \n    We will eventually show that f  Y \u2192 is the homotopy equivalence claimed in the theorem statement. For now, we focus on s.\n    \n    Checking that s is a homotopy inverse of p:\n    Since s(y) \u2208 p^-1(y), we have p \u2218 s = id_Y by construction.\n    We claim that the other composition s \u2218 p is homotopic to id_ Y. \n    To prove this, consider the following pair of functions from  Y \u2192:\n    \n        q_0(y,x) = q(y,x) = x,      q_1(y,x) = f(y).\n    \n    For every pair (y, x) \u2208 Y, the image points x = q_0(y,x) and x' = q_1(y,x)  = f(y) are both contained in \u03a3_y. Above, we have checked both image points x,x' are contained in a common simplex \u03c3(F \u222a F') \u2282\u03a3_y \u2282. Recall that we are working with the metric topology on . Thus, by Lemma\u00a0<ref>, q_0 is homotopic to q_1 via a straight line homotopy q_t.  For every y, this straight-line homotopy runs through \u03a3_y.\n    \n    We can now define a homotopy h_t  Y \u2192 Y \u00d7 as follows:\n    \n        h_t(y,x) = (y, q_t(y,x)).\n    \n    Observe that p \u2218 h_t is continuous because p \u2218 h_t(y,x) = y, and q \u2218 h_t is continuous because q \u2218 h_t(y,x) = q_t(y,x). Thus, by the universal property of the product topology, h_t is continuous.\n    Restricting t to be 0 or 1 gives\n    \n        h_0(y,x) = (y, q_0(y,x)) = (y,x),    h_1(y,x) = (y, q_1(y,x)) = (y, f(y)) = s\u2218 p(y,x).\n    \n    In fact, for every (y,x), the path t \u21a6 q_t(y,x) has image in \u03a3_y, hence\n    h_t(y,x) has image in {y}\u00d7\u03a3_y \u2282 Y. Thus h_t is a homotopy from s\u2218 p to id_ Y, and s is a homotopy inverse of p.\n    \n     \n    A  homotopy equivalence:  Thus far, we have homotopy equivalences s  Y\u2192 Y and q  Y\u2192.  Hence the composition f = q\u2218 s  Y \u2192 is a homotopy equivalence as well.  \n    \n    It remains to check that f is a  homotopy equivalence. Recall from above that for every y \u2208 Y and  g \u2208 G, we have f(y) \u2208\u03a3_y, hence gf(y) \u2208 g\u03a3_y = \u03a3_gy. Similarly, we have f(gy) \u2208\u03a3_gy. Thus both f(gy) and gf(y) lie in \u03a3_gy, and we have already checked that every pair of points of \u03a3_gy belong to a common simplex of . \n    Thus Lemma\u00a0<ref> says that the maps gf and fg are homotopic for every g \u2208 G, hence f   Y \u2192 (,\ud835\udcaf_m) is a  homotopy equivalence, as claimed in the statement of the theorem.\n    \n    Conclusion for the weak topology:  This follows since \ud835\udd40_ (,\ud835\udcaf_w)\u2192(,\ud835\udcaf_m) is G\u2013equivariant and is a homotopy equivalence by\u00a0<cit.>.\n    \n    \n    We are now finished with having the metric topology on our nerves, \n    and work only with the weak topology in the remainder of the paper.\n    \n    \n    The following result is stated (without the group action) as \n    <cit.>.  The proof given there assumes that = {\u03a3_i} is a locally finite cover, and then \n    mentions that the general case requires a slightly different argument.\n    (See Ramras <cit.> for a sketch of how the argument might go.)\n      Since we need the conclusion in the case where \n    {\u03a3_i} might be locally infinite, and since we need to adapt the proof slightly to account for the group action, we write down a proof using Theorem\u00a0<ref>.  \n    \n    \n    \n    \n    Let Y be a simplicial complex, and let G be a group \n    acting on Y by simplicial automorphisms.   Let I be a set equipped with a left G\u2013action, and let \n    ={\u03a3_i}_i\u2208 I be a covering of Y by subcomplexes, with the following properties:\n    \n      * g \u03a3_i = \u03a3_gi for all g\u2208 G and i\u2208 I;\n         \n      *  for any finite F\u2282 I, the intersection \u22c2_i\u2208 F\u03a3_i is either empty or \n    contractible.\n    \n    Let  be the nerve of the covering . \n    Then there is a \n     homotopy equivalence f  Y\u2192 (,\ud835\udcaf_w).\n    \n    Let Y' be the barycentric subdivision of Y. We think of Y and Y' as the same underlying topological space, with different simplicial structures. \n    \n    Every subcomplex \u03a3\u2282 Y be viewed as a subcomplex of Y'. Indeed, \u03a3\u2282 Y is a full subcomplex of Y', in the following sense: for every simplex \u03c4\u2282 Y' whose vertices belong to \u03a3, it follows that \u03c4\u2282\u03a3. This holds because the vertices of \u03c4 correspond to simplices of Y; if these vertices belong to \u03a3, then so do the corresponding cells of Y, hence \u03c4\u2282\u03a3.\n    \n    Complementary complexes and open neighborhoods: \n    For a subcomplex \u03a3\u2282 Y, \n    define the complementary complex T_\u03a3 to be the union of all closed simplices of Y' disjoint from \u03a3. Then T_\u03a3 is also a full subcomplex of Y'. Indeed, consider a simplex \u03c4\u2282 Y' whose vertices are disjoint from \u03a3. Then \u03c4\u2229\u03a3 cannot contain any faces of \u03c4, hence \u03c4\u2229\u03a3 = \u2205. Since T_\u03a3 is a subcomplex of Y', it is closed (in the weak topology).\n    \n    Given a subcomplex \u03a3\u2282 Y, we define an open neighborhood U_\u03a3 = Y \u2216 T_\u03a3. Thus U_\u03a3 is the union of all the open simplices of Y' whose closures intersect \u03a3. \n    \n    \n    For every subcomplex \u03a3_i, where i \u2208 I, we write U_i = U_\u03a3_i.  Observe that U_g i=gU_i for all g\u2208 G and i \u2208 I. We will prove the theorem by replacing the subcomplex cover = {\u03a3_i }_i \u2208 I by the open cover\n    = { U_i }_i \u2208 I.\n    \n    Same nerve: Let \u03a3_\u03b1 and \u03a3_\u03b2 be a pair of subcomplexes of Y, not necessarily belonging to . We claim that \u03a3_\u03b1\u2229\u03a3_\u03b2 = \u2205 if and only if U_\u03a3_\u03b1\u2229 U_\u03a3_\u03b2 = \u2205. The \u201cif\u201d direction is obvious. For the \u201conly if\u201d direction, suppose that \u03a3_\u03b1\u2229\u03a3_\u03b2 = \u2205. Then T_\u03a3_\u03b1\u222a T_\u03a3_\u03b2 = T_\u03a3_\u03b1\u2229\u03a3_\u03b2 = T_\u2205 = Y', hence U_\u03a3_\u03b1\u2229 U_\u03a3_\u03b2 = \u2205, as desired.\n    \n    Now, let F \u2282 I be a finite set. By induction on |F|, combined with the argument of the above paragraph, we see that \n    \u22c2_i\u2208 F\u03a3_i = \u2205 if and only if \u22c2_i\u2208 F U_\u03a3_i = \u2205. Hence the open cover = { U_i }_i \u2208 I and the subcomplex cover = {\u03a3_i }_i \u2208 I have the same nerve .\n    \n    Same homotopy type: For every subcomplex \u03a3\u2282 Y, we claim that the open neighborhood U_\u03a3 deformation retracts to \u03a3. This is a standard fact about simplicial complexes, proved e.g. in Munkres <cit.>. The proof constructs a straight-line homotopy in every simplex \u03c3\u2282 Y' that belongs to neither \u03a3 nor T_\u03a3. The proof uses the fullness of \u03a3 and T_\u03a3 in Y', but does not depend on any finiteness properties of these complexes.\n    \n    Now, let F \u2282 I be a finite set such that \u22c2_i\u2208 F\u03a3_i \u2260\u2205. Define \u03a3_F = \u22c2_i\u2208 F\u03a3_i, and recall that by hypothesis, \u03a3_F is contractible. Since U_\u03a3_F =  \u22c2_i\u2208 F U_\u03a3_i, and U_\u03a3_F deformation retracts to \u03a3_F, it follows that \u22c2_i\u2208 F U_i = \u22c2_i\u2208 F U_\u03a3_i is also contractible.\n    \n    Conclusion: By a theorem of Bourgin <cit.>, the simplicial complex Y is paracompact (with the weak topology \ud835\udcaf_w).\n    We have shown that the open cover = { U_i }_i \u2208 I and the subcomplex cover = {\u03a3_i }_i \u2208 I have the same nerve . We have checked that U_g i=gU_i for all g\u2208 G and i \u2208 I. Furthermore, for every finite set F \u2282 I, the intersection \u22c2_i\u2208 F U_i is either empty or contractible. Thus, by Theorem\u00a0<ref>, we have a  homotopy equivalence f  Y\u2192 (,\ud835\udcaf_w).\n    \n    \n    \u00a7 CUBE COMPLEXES AND THE ROLLER BOUNDARY\n    \n    \n    This section recalls some background about CAT(0) cube complexes and their Roller boundaries. Many facts about CAT(0) cube \n    complexes, median graphs, wallspaces, and related structures occur in various \n     places in the literature, in many equivalent \n    guises. We have endeavored to connect some of the perspectives, in part because we will need to use these connections in the sequel. We refer the reader to <cit.> and <cit.> for more background.  \n    \n    \n    \n     \u00a7.\u00a7 CAT(0) cube complexes and metrics\n    \n    A cube is a copy of a Euclidean unit cube [-1/2,1/2]^n for 0\u2264 n<\u221e.  A face of \n    [-1/2,1/2]^n is a subspace obtained by restricting some of the coordinates to \u00b11/2.  A cube \n    complex is a CW complex whose cells are cubes and whose attaching maps restrict to isometries on faces.  A cube complex \n    with embedded cubes is nonpositively curved if, for all vertices v and all edges e_1,\u2026,e_k incident to v such that \n    e_i,e_j span a 2\u2013cube for all i\u2260 j, we have that e_1,\u2026,e_k span a unique k\u2013cube. \n     If X is \n    nonpositively-curved and simply connected, then X is a CAT(0) cube complex.  The dimension of X, denoted X, is the \n    supremum of the dimensions of cubes of X.\n    \n    Throughout this paper, X will denote a finite-dimensional CAT(0) cube complex.   We let (X) denote the group of \n    cellular automorphisms of X.  We do not assume that X is locally finite. \n    \n    The cube complex X carries a metric _X such that (X,_X) is a CAT(0) space, the restriction of _X to \n    each cube is the Euclidean metric on a unit cube, and each cube is geodesically convex (see\u00a0<cit.>). \n     We refer to _X as the \u2113^2 metric or the CAT(0) metric on X.  \n     \n    One can view X^(1) as a graph whose vertices are the 0\u2013cubes and whose edges are the 1\u2013cubes.  (We \n    often refer to 0\u2013cubes as vertices of X, and 1\u2013cubes as edges.)  We let d_1 denote the \u2113^1 metric on the \n    vertex set X^(0), which is the restriction of the usual graph metric on X^(1). We refer to d_1 as the combinatorial metric on X^(0). A combinatorial geodesic between x,y \u2208 X^(0) is an edge path in X^(1) that realizes d_1(x,y).\n    \n    \n    \n    \n     \u00a7.\u00a7 Hyperplanes, half-spaces, crossing, and separation\n    \n    \n    Let [- 1/2, 1/2]^n be an n-dimensional cube. A midcube of [- 1/2, 1/2]^n is the subset obtained by restricting one coordinate to be 0.\n    \n    A hyperplane of a CAT(0) cube complex X is a connected subset whose intersection with each cube is either a midcube \n    of that cube, or empty. The open 1/2\u2013neighborhood of a hyperplane \u0125 in the metric d_X is denoted N(\u0125) is called the \n     open \n    hyperplane carrier of \u0125. It is known that every open carrier N(\u0125) is geodesically convex in d_X. Furthermore, X \u2216 N(\u0125) consists of two connected components, each of which is also convex\n     <cit.>.\n     \n     A component of X \u2216 N(\u0125) is called a CAT(0) half-space. \n     The intersection of one of these components with the vertex set X^(0) is called a vertex half-space. \n     \n     The two vertex half-spaces associated to a hyperplane \u0125 are denoted h, h^*. Note that \u0125^*= \u0125.\n     Given a vertex half-space h,  the corresponding CAT(0) half-space is the union of all cubes of X whose vertices lie in h.\n     We will use the unmodified term half-space to mean either a CAT(0) half-space or a vertex half-space when the meaning is clear from context. \n    \n    \n     \n     The collection of all vertex half-spaces is denoted by , or (X) if we wish to specify the space X.    \n     If h\u2208, then h^* = X^(0)\u2216 h is exactly the complementary half-space associated to the same hyperplane \n    \u0125.\n    \n    The collection of all hyperplanes of X is denoted  (for \u201cwalls\u201d). \n     Generally speaking, calligraphic letters denote collections of hyperplanes, while gothic letters denote collections of  \n    half-spaces.\n    There is a two-to-one map \u2192, namely h \u21a6\u0125. Given a subset \ud835\udcae\u2282, an orientation on \ud835\udcae is a choice of a lift \ud835\udcae\u2192. \n    \n    \n     \n    A  pair of half-spaces h,k\u2208 are called transverse (denoted h\u22d4 k) if the four intersections h\u2229 \n    k, h\u2229 k^*, h^*\u2229  k and h^*\u2229 k^* are nonempty. In terms of the underlying hyperplanes \u0125 and k\u0302, \n    transversality is equivalent to the condition that \u0125\u2260k\u0302 and \u0125\u2229k\u0302\u2260\u2205. In this case, \n    we also write \u0125\u22d4k\u0302.  We sometimes say that transverse hyperplanes cross.  \n    \n    Given subsets A,B\u2282 X, we say that \u0125separatesA,B if, up to relabelling the half-spaces associated to \n    \u0125, we have A\u2282 h and B\u2282 h^*.  We will usually be interested in situations where A,B are subcomplexes, sets \n    of vertices, or hyperplanes, in which case this notion is equivalent to another notion of separation:  namely that A,B lie in distinct components of X \u2216\u0125.  Later in the paper, we will occasionally use the \n    latter notion when we need to talk about points in N(\u0125) being separated by \u0125.  (Elsewhere in the literature, \n    e.g.\u00a0<cit.>, the half-spaces associated to \u0125 are defined to be the components of X \u2216\u0125, or sometimes \n    their closures.  This small difference in viewpoint is usually irrelevant.)\n    \n    \n    If e is an edge, i.e. a 1\u2013cube,  of X, then there is a unique hyperplane \u0125 separating the two vertices of e.  \n    We say that \u0125 is dual toe, and vice versa.  Note that  \u0125 is the unique hyperplane intersecting e.  \n    More generally, if k\u2265 0 and c is a k\u2013cube, then there are exactly k hyperplanes intersecting c.  These \n    hyperplanes pairwise cross, and their intersection contains the barycenter of c.  We say that c is dual to this \n    family of hyperplanes.  Any set of k pairwise-crossing hyperplanes is dual to at least one k\u2013cube.  In particular, \n    X bounds the cardinality of any set of pairwise crossing hyperplanes in X.\n    \n    For any points x,y \u2208 X, define (x,y) to be the set of hyperplanes separating x from y.  If x,y\u2208 X^(0), \n    then an edge path \u03b3 from x to y is a geodesic in X^(1) if and only if \u03b3 never crosses the same hyperplane twice. Consequently,\n     \n        _1(x,y)=|(x,y)|.\n    \n    In view of this, the following standard lemma relates the metrics _X and _1. See Caprace and \n    Sageev\u00a0<cit.> or Hagen\u00a0<cit.> for proofs.\n    \n    \n    There are constants \u03bb_0 \u2265 1, \u03bb_1 \u2265 0, depending on X, such that the following holds. For any pair \n    of points x, y \u2208 X,\n    \n        1/\u03bb_0 d_X(x,y) - \u03bb_1 \u2264 |(x,y)| \u2264\u03bb_0 d_X(x,y) + \u03bb_1.\n    \n    \n    \n    For an arbitrary set B \u2282 X, let (B) be the union of all (x,y) for all x,y \u2208 B.  In practice, we will \n    often be interested in the following special cases.  First, if B is a hyperplane, then (B) coincides with the set of hyperplanes\n    \u0125 that cross B.  If B is a convex subcomplex (see Definition\u00a0<ref>), then (B) coincides with the set of \u0125 with \u0125\u2229 \n    B\u2260\u2205.  If B is a combinatorial geodesic in X^(1), then, because of the above characterization of _1, the set \n    (B) is the set of hyperplanes dual to edges of B, or equivalently the set of hyperplanes intersecting B, or \n    equivalently the set of hyperplanes separating the endpoints of B.\n    \n    \n    \n    One can extend the \u2113^1 metric  on X^(0) to all of X as follows. On a single cube c, let d_1 |_c \u00d7 c\u2192 be the standard \u2113^1 metric. This can be extended to a path-metric on all of X by concatenating paths in individual cubes. Miesch\u00a0<cit.> showed that this procedure gives a geodesic path metric on X that extends the graph metric on X^(1). With this extended definition, d_1 becomes bilipschitz to d_X, with the Lipschitz constant \u03bb_0 depending only on (X).\n    \n    \n     \u00a7.\u00a7 The Roller boundary X\n    \n    Next, we define the Roller boundary and Roller compactification of X. \n    \n    \n    Every vertex v\u2208 X^(0) defines the collection _v^+= {h\u2208: v\u2208 h} of half-spaces containing v.  Going \n    in the opposite direction, the collection _v^+ uniquely determines v:\n    \n        \u22c2_h \u2208_v^+ h = {v}.\n    \n    \n    We endow the set 2^ with the product topology, which is compact by Tychonoff's theorem. Recall that a basis for this \n    topology consists of cylinder sets defined by the property that finitely many coordinates (i.e. finitely many half-spaces)  take a specified value (0 \n    or 1). Cylinder sets are both open and closed.\n    \n    There is a continuous one-to-one map X^(0)\u21aa 2^ defined by v\u21a6_v^+. (In fact,  \n    X^(0) is homeomorphic to its image if and only if X is locally compact. We will not need this fact.)\n    \n    \n    The Roller Compactification of X^(0), denoted by X\u0303 or X\u0303(), \n    is the closure of the image of X^(0) in 2^\u210c. \n    The Roller Boundary of X is  X = X\u0303\u2216 X^(0). \n    \n    \n    Recall that (X) is the group of cubical automorphisms of X. We observe that the action of (X) extends to a \n    continuous action on X\u0303 and therefore on X.\n    \n    Let h \u2208(X). The extension of h to X\u0303 is defined to be the intersection in 2^ between X\u0303 and \n    the cylinder set corresponding to h. \n     It is straightforward to check that the extensions of h and h^* form a partition \n    of  X\u0303. We think of the extensions of h and h^* as complementary (vertex) half-spaces in X\u0303. By a slight abuse of \n    notation, we use the same symbol h to refer to both a half-space in X and its extension in X\u0303.\n    \n    By the above discussion of the topology on 2^\u210c, the basic open sets in X\u0303 are intersections between X\u0303 and \n    cylinder sets. Therefore, every basis set is a finite intersections of (extended) half-spaces.\n    \n    \n    \n    The duality between points and half-spaces in X, described above, extends to all of X\u0303 = X^(0)\u222a X.\n    Let y \u2208X\u0303, and let _y^+ be the set of extended half-spaces that contain y. Then y and _y^+ determine \n    one another:\n    \n        \u22c2_h \u2208_y^+ h = { y }.\n    \n    \n    Chatterji and Niblo <cit.>, and independently Nica <cit.>, extended Sageev's construction \n    <cit.> to prove the following.\n    \n    \n    Let ' \u2282(X) be an involution-invariant collection of half-spaces. Then ' determines a CAT(0) cube \n    complex X(') and the Roller compactification X\u0303(').  In particular, X((X)) = X.\n    \n    \n    \n    If  x \u2208 X^(0), the corresponding set _x^+ \u2208 2^ satisfies the descending chain condition: any \n    decreasing sequence of elements of _x^+ is eventually constant. On the other hand, the collection of half-spaces _y^+ corresponding to a boundary point y \n    \u2208 X will fail the descending chain condition. Namely, for y\u2208X\u0303 we have that y\u2208 X if and only if \n    there exists a sequence {h_n}_n\u2208\u2282_y^+ such that h_n+1\u228a h_n for each n\u2208.\n    \n    \n    \n    \n    \n     \u00a7.\u00a7 Convexity, intervals, and medians\n    \n    Here, we discuss the related notions of convexity and intervals in X and X\u0303. Since we are interested in two different metrics on X, there are several distinct definitions of convexity (\u2113^1 geodesic convexity, cubical convexity, interval convexity) that turn out to be equivalent for cubical subcomplexes of X.\n    \n    We then introduce a median operation on X\u0303 and its restriction to X.\n    \n    \n    \n    \n    A set A \u2282 X^(0) is called vertex-convex if it is the intersection of vertex half-spaces in \n    X. For a set S \u2282 X^(0), the vertex convex hull of S is the intersection of all vertex-convex sets containing S, or equivalently the  intersection of all vertex half-spaces containing S.\n    \n    A subcomplex C \u2282 X is called cubically convex \n    if it is the intersection of CAT(0) half-spaces. For a set S \u2282 X, the cubical convex hull, denoted (S), is the intersection of all cubically convex sets containing S, or equivalently the  intersection of all CAT(0) half-spaces containing S. We remark that for subcomplexes of X, this definition coincides with geodesic convexity in the CAT(0) metric d_X; see <cit.> and  <cit.>.\n    \n    \n    Observe that if C is a full subcomplex of X (meaning, C contains a cube c whenever it contains the 0\u2013skeleton of c), then C is cubically convex whenever C^(0) is vertex\u2013convex. For this reason, we can use the two notions of convexity interchangeably when referring to full subcomplexes. \n    \n    \n    Given x,y \u2208 X^(0), define the (vertex) interval(x,y) to be vertex convex hull of {x, y}. Define the cubical interval(x,y) to be the cubical convex hull of {x, y}. \n    \n    \n    Observe that (x,y) is a full, convex subcomplex, and is the union of all the cubes whose vertex sets are contained in (x,y). In addition, ^(1)(x,y) is the union of all of the combinatorial geodesics from x to y. In fact, intervals can be used to characterize convexity as follows:\n    \n    \n    A set A \u2282 X^(0) is vertex-convex if and only if the following holds: for all x,y \u2208 A, the interval (x,y) \u2282 A.\n    \n    A subcomplex C \u2282 X is cubically convex if and only if the following holds: for all x,y \u2208 C^(0), the cubical interval (x,y) \u2282 C.\n    \n    Suppose C is a cubically convex subcomplex and x,y \u2208 C. Since (x,y) is the intersection of all convex subcomplexes containing x,y, and C is one such set, we have (x,y) \u2282 C. \n    \n    Toward the converse, suppose that C is interval-convex, meaning (x,y) \u2282 C for every pair x,y. We wish to prove that C is convex.\n    \n    We claim the following: for every  hyperplane \u0125 that intersects C and is dual to an edge e with endpoints x,y such that x \u2208 C, the other endpoint y belongs to C as well. This can be shown as follows. Since \u0125 intersects C, there is an edge e' \u2282 C that is dual to \u0125. Let x', y' be the endpoints of e', such that x and x' are on the same side of \u0125. Then (x,y') = (x,x') \u2294\u0125 = \u0125\u2294(y,y'). In particular, there exists a combinatorial geodesic from x to y' whose initial edge is e. Since C is interval-convex, this proves the claim.\n    \n    We can now show that C is cubically convex. Suppose z \u2208 X^(0)\u2216 C. Let \u03b3\u2282 X^(0) be a shortest combinatorial geodesic from z to C, and let x be the terminus of \u03b3, and let e be the last edge of \u03b3. Since the next-to-last vertex of \u03b3 is not in C, the above claim implies that the hyperplane \u0125 dual to e is disjoint from C, and separates C from z. Thus C is contained in a CAT(0) half-space disjoint from z. Since z was arbitrary, it follows that C is cubically convex.\n    \n    The proof for vertex-convex subsets is identical, up to replacing all the appropriate sets by their 0\u2013skeleta.\n    \n    \n    Our next goal is to extend the notion of convexity to X\u0303. \n    It turns out that in X\u0303, the correct definition of convexity begins with intervals. After developing some definitions and tools, we will eventually prove  a generalization of Lemma\u00a0<ref> to X\u0303, using a very different argument.\n    \n    \n    Given x,y \u2208X\u0303, define the interval(x,y) to be the intersection of all (extended, vertex) half-spaces that \n    contain both x and y.  Equivalently, \n    \n        (x,y) = { z \u2208X\u0303  :  ^+_z \u2283 ( ^+_x\u2229^+_y) }.\n    \n    A nonempty set A \u2282X\u0303 is called convex if it contains (x,y) for all x, y \n    \u2208 A.  \n    \n    \n    As a very particular case, half-spaces and hence also their intersections are convex in X\u0303.\n    \n    Observe that for x,y \u2208 X^(0), the interval (x,y) will in fact be contained in X^(0), and coincides with the previous definition of (x,y). Consequently, X^(0) is convex in X\u0303. By Lemma\u00a0<ref>, any vertex-convex subset of X^(0) is also convex in X\u0303.\n    \n    Since X\u0303\u2282 2^(X) is by definition a set of vertices, we do not define convex subcomplexes of X\u0303.\n    \n    \n    As in <cit.>, the fact that X\u0303 is a median space is captured by the following property: for every x,y,z \u2208X\u0303 there is a unique point m = m(x,y,z) \u2208X\u0303 such that \n    \n        {m}= (x,y) \u2229(y,z) \u2229(x,z).\n    \n    This unique point m = m(x,y,z) is called the  median of x, y, \n    and z. \n    We will not need the general definition of an (extended) median metric space; \n    the only property of medians that we will need is  that m X\u0303\u00d7X\u0303\u00d7X\u0303\u2192X\u0303 satisfies (<ref>). \n    In terms of half-spaces, we have:\n    \n        ^+_m = (^+_x \u2229^+_y) \u222a (^+_y\u2229^+_z)\u222a ( ^+_x \u2229^+_z).\n    \n    Since intervals between points in X^(0) are contained in X^(0), we see that m(x,y,z)\u2208 X^(0) if \n    x,y,z\u2208 X^(0).  So, the median m on X\u0303 restricts to a median m on X^(0).  The point m(x,y,z) is the unique \n    vertex m for which any two of x,y,z can be joined by a geodesic in X^(1) passing through m. In other words, we also get an analogue of  (<ref>) with (\u00b7,\u00b7) replaced by (\u00b7, \u00b7):\n    \n        {m}= (x,y) \u2229(y,z) \u2229(x,z)\n          for   x,y,z\u2208 X^(0).\n    \n    \n    \n     In fact, a graph with \n    this property \u2014 called a median graph\u2014 is always the 1\u2013skeleton of a uniquely determined CAT(0) cube \n    complex\u00a0<cit.>.  \n    \n    \n     \u00a7.\u00a7 Lifting decompositions and convexity\n    \n    \n    \n    A set of half-spaces \ud835\udd30\u2282 is called consistent if the following two conditions hold: if h\u2208\ud835\udd30 then h^*\u2209\ud835\udd30, and if k \u2283 h \u2208\ud835\udd30 then k\u2208\ud835\udd30. Given a \n    subset ' \u2282, a lifting decomposition for ' is a consistent set of half-spaces \n    \ud835\udd30\u2282\u2216' such that = '\u2294\ud835\udd30\u2294\ud835\udd30^*. \n    Lifting decompositions do not necessarily exist, and are not necessarily unique.\n     \n    Lifting decompositions naturally occur in the following way. Consider a set A \u2282X\u0303. Analogous to _x^+,  we \n    define a set _A^+ = {h\u2208 : A\u2282 h} of half-spaces that contain A, and observe that _A^+ is \n    consistent. Define _A^- = (_A^+)^* to be the set of half-spaces disjoint from A, and finally a set  \n    \n        _A = {h\u2208 : A\u2229 h \u2260\u2205,   A\u2229 h^*\u2260\u2205}\n    \n     of half-spaces that cut A. Then we get a lifting decomposition = _A \u2294_A^+ \u2294_A^-, \n    where \ud835\udd30 = _A^+.\n    \n    \n    \n     Observe that if A\u2282 B, then _B^+ \u2282_A^+. \n    \n    \n    Given points x,y \u2208X\u0303, let (x,y)= _x^+ _y^+ denote \n    the set of half-spaces that separate x from y. \n     More generally, given two disjoint convex sets A,B\u2282X\u0303, let (A,B)= _A^+ _B^+ denote \n    the set of half-spaces that separate A from B. \n    \n    In an analogous fashion, we generalize the definition of (x,y) from Section\u00a0<ref> to convex subsets A, \n    B \u2282X\u0303. For subsets of this form, (A,B) = (A,B) consists of all the hyperplanes that \n    separate A from B. \n    We also extend the\n     \u2113^1 metric on X^(0) to X\u0303, where \n    d_1(x,y) = | (x,y) | = 1/2 | _x^+ _y^+| is allowed to take the value \u221e.\n    \n     The following result says that lifting decompositions are in one-to-one correspondence with Roller-closed subcomplexes of \n    X\u0303. \n    \n    \n       \n    \n    \n     \n    The following are true:\n    \n      *  Suppose that '\u2282(X). If there exists a lifting decomposition \n    \ud835\udd30 for ', then there is a d_1\u2013isometric\n     embedding X\u0303(') \u21aaX\u0303 induced from the map 2^'\u21aa 2^(X) where U \n    \u21a6 U\u2294\ud835\udd30. The image of this embedding is \n    \n    \n        \u22c2_h\u2208\ud835\udd30 h\u2282X\u0303.\n    \n    \n      *  Similarly, if \ud835\udd30\u2282(X) is a consistent set of half-spaces, then, \n    setting _\ud835\udd30 = \n    (X)\u2216(\ud835\udd30\u2294\ud835\udd30^*) we get an isometric embedding \n    X\u0303(_\ud835\udd30) \u21aaX\u0303, obtained as above, onto\n    \n    \n        \u22c2_h\u2208\ud835\udd30 h\u2282X\u0303.\n    \n    \n      *  The set \ud835\udd30 satisfies the descending chain condition if and only if the image of \n    X(_\ud835\udd30) is in X. \n    \n    Furthermore, if the set \ud835\udd30 is G\u2013invariant, for some group G\u2264(X), then, with the restricted action on \n    the image, the above natural embeddings are  G\u2013equivariant.\n    \n    \n    This result is a slightly strengthened version of  <cit.>. See also <cit.> for a \n    very similar statement.\n    \n    \n    We remark that  \n    Proposition\u00a0<ref> includes the possibility that \ud835\udd30=\u2205 and hence \u2294\u2205\u2294\u2205 is a legitimate lifting decomposition of . In this case, recall that an intersection over an empty collection of sets is everything, i.e. \u22c2_h\u2208\u2205 h= X\u0303. \n    \n    \n    Suppose that there is a lifting decomposition \ud835\udd30 for  '. Then, since s \u2229 s^* = \u2205 \n    and = '\u2294 s \u2294 s^*, we deduce that ' = \u2216( s\u2294 s^*) \n    is involution invariant. \n    \n    Next, we claim that ' \u2282 has a property called tightly nested, meaning that  for every pair h,k\u2208', \n    and for every \u2113\u2208 with h\u2282\u2113\u2282 k, we have \u2113\u2208'. Assume, for a contradiction, that \n    h,k\u2208', and \u2113\u2208 with h\u2282\u2113\u2282 k, but \n    \u2113\u2209'. Then (up to replacing the three half-spaces with their complements) we may assume that \u2113\u2208\ud835\udd30. But then k\u2208\ud835\udd30, a contradiction. \n    \n    With the verification that ' is involution invariant and tightly nested, our hypotheses imply those of  <cit.>. \n    Now, conclusions <ref>\u2013<ref> follow from that lemma.\n    \n    Finally, the conclusion about G\u2013invariance follows because the embeddings are canonically determined by the associated \n    half-spaces.\n    \n    In Proposition\u00a0<ref>, the  isometric embeddings of X\u0303(') and X\u0303(_\ud835\udd30) restrict to \n    isometric embeddings of X(') and X(_\ud835\udd30), respectively. \n    Although X is typically not closed, the images under the isometric embedding of  X(') and X(_\ud835\udd30)  always lie in X. Indeed, recall from the discussion following Theorem \n    <ref> that a point belongs to the Roller boundary if and only if there is an infinite descending chain  of \n    half-spaces containing the point in question. Hence, if U has an infinite descending chain, then so does U\u2294 \n    s. \n    \n    \n    \n    As a first application of Proposition\u00a0<ref>, we will prove a generalization of Lemma\u00a0<ref> to X\u0303. Observe that a naive generalization of  Lemma\u00a0<ref> does not hold, because X is (interval) convex in X\u0303 by Definition\u00a0<ref>, but is not an intersection of extended half-spaces. However, the following lemma says that a closed, convex set in X\u0303 is always an intersection of extended half-spaces.\n    \n    \n    Let A \u2282X\u0303 be a convex set. Then the Roller closure A in X\u0303\n     is the image of X\u0303(_A) under the embedding of Proposition\u00a0<ref>, and\n     \n        A = \u22c2_h \u2208_A^+ h = \u22c2_A \u2282 h h.\n    \n    Observe that _A^+ is a consistent set of half-spaces. Thus Proposition\u00a0<ref>.<ref> gives an embedding X\u0303(_A) \u21aaX\u0303 whose image is\n     \n        W =  \u22c2_A \u2282 h h = \u22c2_h \u2208_A^+ h =  \u22c2_h \u2208_\u00c3^+ h.\n    \n    Here, the first equality is the definition of W, the second equality is the definition of _A^+, and the third equality holds because half-spaces are closed, meaning _A^+=_\u00c3^+.\n     \n    It remains to show that A = W. The inclusion A\u2282 W is obvious, because A\u2282 h for every h \u2208_\u00c3^+. To prove the reverse inclusion, suppose for a contradiction that there is a point  y \u2208 W \u2216\u00c3. Since X\u0303\u2216\u00c3\n    is open, there is a basic open neighborhood of y of the form \u22c2_i=1^n h_i, such that \n    \n        y \u2208( \u22c2_i=1^n h_i ) \u2282X\u0303\u2216\u00c3.\n    \n    Therefore, A \u2282 h_1^*\u222a\u22ef\u222a h_n^*. Without  loss of generality, assume that n is minimal  in the sense that \n    for each j =1, \u2026, n there is a point \n    \n        a_j \u2208 A\u2216(\u22c3_j \u2260 i=1^n h_i^* ) = A \u2229(\u22c2_j \u2260 i=1^n h_i ).\n    \n    One crucial observation is that n\u2265 2: otherwise, if A \u2282 h_1^*, then h_1 \u2229 W = \u2205, but we know that y \u2208 h_1 \u2229 W.\n    \n    \n    Now, define p = m(y,a_1, a_2). Recall that (a_1,a_2)\u2282 A, because A is convex. By the definition of medians, we have \n    \n        p \u2208(a_1,a_2)\u2282 A,     \n        p \u2208(y, a_1) \u2282(\u22c2_j =2^n h_i ),\n             \n        p \u2208(y, a_2) \u2282 h_1.\n    \n    Consequently, we have p \u2208 A \u2229( \u22c2_i =1^n h_i )= \u2205, a contradiction.\n    Thus A = W.\n    \n    \n     \u00a7.\u00a7 Gates and bridges\n    \n    A very useful property of a convex subset A\u2282 X^(0) is the existence of a gate map_A  X\u2192 A; this is \n    a well-known notion, see e.g.\u00a0<cit.> and the citations therein.  Metrically, \n    _A  X^(0)\u2192 A^(0) is just closest-point projection, but gates can be characterized entirely in terms of the median \n    (see e.g.\u00a0<cit.> and citations therein).  Since we saw that X\u0303 has a median satisfying (<ref>), convex \n    subsets of X\u0303 do similarly admit gates.  This is the content of  \n    Proposition\u00a0<ref>, which has the advantage of showing an important relationship between \n    gates and walls.\n    \n    Recall that (x,Y) is the set of hyperplanes separating x from Y, where Y\u2282X\u0303 is convex. \n    \n    \n    \n     Let C\u2282X\u0303 be closed and convex. There is a unique projection _CX\u0303 C such that for any x\u2208X\u0303 we have \n     \n        (x,_C(x)) = (x,C).\n    \n    Let = _C\u2294_C^+ \u2294_C^- be the lifting decomposition associated to C.  The map \n    2^\u2192 2^_C defined by U\u21a6 U\u2216 (_C^+ \u2294_C^-) restricts to a surjection X\u0303X\u0303(_C). \n    Next, Proposition\u00a0<ref> gives an embedding  X\u0303(_C) \u2192X\u0303, namely V \u21a6 V \u2294_C^+.\n    Composing the surjection X\u0303X\u0303(_C) with the embedding X\u0303(_C) \u2192X\u0303 yields a map _C X\u0303\u2192X\u0303. The image _C(X\u0303) is C since, by Lemma\u00a0<ref>, the image of the embedding X\u0303(_C)\u2192X\u0303 is exactly C=C.\n    \n    To prove the equality in the statement, first observe that (x,C) \u2282(x,_C(x)) because _C(x) \u2208 C. For the opposite inclusion, consider a hyperplane \u0125\u2208(x,_C(x)), and choose an orientation h \u2208_x^+. By the definition of _C, we have\n    \n        __C(x)^+ = (_x^+ \u2216_C^-) \u222a_C^+.\n    \n    Since h \u2208_x^+ \u2216__C(x)^+, we must have h \u2208_C^-, hence \u0125\u2208(x,C). Thus (x,C) = (x,_C(x)).\n    \n    Finally, for x \u2208 C, we must have x = _C(x) because (x,_C(x)) = (x,C) = \u2205. Thus _C is indeed a projection to C.\n    \n    \n    Note that _C restricts to the identity on C.  We call _C the gate map to C, which is consistent \n    with the terminology used in the theory of median spaces because of the following lemma:\n    \n    \n    Let _C be the map from Proposition\u00a0<ref>.  Then for all x\u2208X\u0303 and y\u2208 C, we have \n    m(x,y,_C(x))=_C(x).  In particular, _C(x) \u2208\u22c2_y \u2208 C(x,y).\n    \n    By Proposition\u00a0<ref> and the fact that y\u2208 C, we have (x,_C(x))\u2282(x,y), so \n    (x,_C(x))\u2282(x,y).  So, _C(x)\u2208(x,y)\u2229(x,_C(x))\u2229(y,_C(x)), hence m=_C(x).\n    \n    \n    The above lemma has two corollaries. First, we can characterize medians in terms of projections:\n    \n    \n    Suppose that x,y,z \u2208 X^(0). Then _(x,y)(z)=m(x,y,z). \n    \n    By\n    Lemma\u00a0<ref>, we have _(x,y)(z)  \u2208(x,z) and _(x,y)(z) \u2208(y,z).  On the \n    other hand, _(x,y)(z)\u2208(x,y) by definition.  So, by (<ref>), we get  \n    _(x,y)(z)=m(x,y,z).\n    \n    \n    Second, Lemma\u00a0<ref> allows us to project from X to convex subcomplexes of X.\n    \n    \n    Let A \u2282 X be a convex subcomplex. Then, for all x \u2208 X^(0), we have _A (x) \u2208 A. Consequently, we get a projection _A = _A X^(0)\u2192 A^(0).\n    \n    Let x \u2208 X^(0) and y \u2208 A^(0). By Lemma\u00a0<ref>, we have _A(x) \u2208(x,y) \u2282 X^(0). But A\u2229 X^(0) = A^(0).\n    \n    In fact, it is possible to extend _A over higher-dimensional cubes to \n    get a map _A  X\u2192 A. This is done as follows (see also <cit.>).  First let e be a 1\u2013cube of X joining 0\u2013cubes x,y and dual to a hyperplane \u0125.  From \n    Proposition\u00a0<ref>, one has the following: if \u0125 does not cross A, then _A(x)=_A(y), and, otherwise, _A(x) and _A(y) are joined by an edge e\u0305\u2282 A dual \n    to \u0125.  \n    \n    In the former case, _A extends over e by sending every point to _A(x)=_A(y); in the latter case, we extend by declaring _A  e\u2192e\u0305 to be the obvious \n    isometry. \n    \n    Now, if c is a d\u2013cube for d\u2265 2, then for some s\u2208{0,\u2026,d}, there are 1\u2013cubes e_1,\u2026,e_s\u2282 c that span an s\u2013cube c' and have the property that the \n    hyperplanes \u0125_1,\u2026,\u0125_s respectively dual to e_1,\u2026,e_s are precisely the hyperplanes intersecting both c and A.  (The case s=0 corresponds to the situation where no \n    hyperplane intersecting c intersects A, and c' is an arbitrary 0\u2013cube of c.)  So for 1\u2264 i\u2264 s, we have that e\u0305_i=_A(e_i) is a 1\u2013cube of A dual to \u0125_i, and the \n    1\u2013cubes e\u0305_1,\u2026,e\u0305_s span an s\u2013cube c\u0305'.  We extend _A over c' using the obvious cubical isometry c'\u2192c\u0305' extending the map _A on 1\u2013cubes.  By \n    construction, for each v\u2208 c^(0), there is a unique 0\u2013cube v'\u2208 c' such that _A(v)=_A(v'), the assignment v\u21a6 v' extends to a cubical map c\u2192 c' (collapsing the \n    hyperplanes not in {\u0125_1,\u2026,\u0125_s}), and composing this with _A:c'\u2192 A gives the (extended) gate map _A:c\u2192 A.  Note that c'\u2282 c is only unique up to parallelism, \n    but any two allowable choices of c' give the same map c\u2192 A.  \n    \n    \n    \n    We conclude that gates enjoy the following properties: \n    \n    \n    Let A\u2282 X be a convex subcomplex.  Then:\n    \n      *  For all x,y\u2208 X, we have (_A(x),_A(y))=(x,y)\u2229(A), and (x,_A(x))=(x,A).\n      *  The map _A is 1\u2013lipschitz on X^(0) with the d_1 metric and the CAT(0) \n    metric d_X.\n    \n    For 0\u2013cubes, the first part of conclusion\u00a0<ref> appears in various places in the literature; see e.g.\u00a0<cit.>, or one can deduce it easily from \n    Proposition\u00a0<ref>.  The second part of the first assertion (again for 0\u2013cubes) restates Proposition\u00a0<ref>.  The generalization of <ref> to arbitrary points in X \n    follows immediately from the corresponding assertion for 0\u2013cubes, together with the construction in Remark\u00a0<ref>. \n    \n    Finally, <ref> implies the first part of <ref>, since _1(x,y)=|(x,y)| for \n    0\u2013cubes x,y.  For the second part, first note that the restriction of \u03c0_A to each cube is 1\u2013lipschitz for the \n    CAT(0) metric, since it factors as the natural projection of the cube onto one of its faces (which is lipschitz for the \n    Euclidean metric) composed with an isometric embedding.  Now, fix x,y\u2208 X and let \u03b3 be the CAT(0) geodesic joining \n    them, which decomposes as a finite concatenation of geodesics, each lying in a single cube.  Each such geodesic is mapped to \n    a path whose length has not increased, so \u03c0_A\u2218\u03b3 is a path from \u03c0_A(x) to \u03c0_A(y) of length at most \n    _X(x,y), as required.\n    \n    \n    The following standard application of gates is often called the bridge lemma.  \n    \n    \n    \n    Let I,J\u2282 X be convex subcomplexes.  Let _I  X \u2192 I and _J  X\u2192 J be the gate maps.  Then the following hold:\n     \n      * _I(J) and _J(I) are convex subcomplexes.\n         \n      * (_I(J))=(_J(I))=(I)\u2229(J).\n         \n      *  The map _I _J(I)\u2192_I(J) is an isomorphism of CAT(0) cube complexes.\n         \n      *  The cubical convex hull  (_I(J)\u222a_J(I)) is a CAT(0) cube complex isomorphic to _J(I)\u00d7(x,_J(x)) for any vertex x\u2208_I(J).\n    \n      *  If I\u2229 J\u2260\u2205, then _I(J)=_J(I)=I\u2229 J, and (I\u2229 J)=(I)\u2229\ud835\udcb2(J).\n     \n         This can be assembled from results in the literature in various ways.  For example, the first statement is part \n    of\u00a0<cit.>; the second and last statements follow from\u00a0<cit.>.  The \n    third follows from\u00a0<cit.>.  For the fourth, see\u00a0<cit.> or\u00a0<cit.>.\n    \n    \n     \u00a7.\u00a7 Facing tuples and properness\n    \n    A facing k\u2013tuple of hyperplanes is a set {\u0125_1,\u2026,\u0125_k} of hyperplanes such that, for each i\u2264 \n    k, we can choose a half-space h_i such that h_i\u2229 h_j=\u2205 for i\u2260 j.  We are often particularly interested in \n    facing triples, since many of the subcomplexes of X considered later in the paper will be CAT(0) cube complexes that do \n    not contain facing triples.\n    \n    One useful application of the notion of a facing tuple is the following lemma, which in practice will be used to guarantee \n    properness of certain subcomplexes of X.  See\u00a0<cit.> for a more detailed discussion. See also <cit.> for a related result,  where X is required to  isometrically  embed into ^D for some D.\n    \n    \n    \n    Let X be a CAT(0) cube complex of dimension D<\u221e.   Suppose that there exists T such that X does not contain a \n    facing T\u2013tuple.  Then  (X,_X) is a \n    proper CAT(0) space.\n    \n    Let R\u2265 0 and let B be a ball of radius R in X (with respect to the CAT(0) metric _X).  Let (B) be the set of hyperplanes intersecting B.\n    \n    We say that hyperplanes \u0125_1,\u2026,\u0125_n in (B) form a chain if (up to relabelling), each\n    \u0125_i separates \u0125_i-1 from \u0125_i+1 for 2\u2264 i\u2264 n-1.\n    \n    We claim that there exists N, depending only on D and R,  such that any chain in (B) has cardinality at most \n    N. Indeed, if \u0125_1,\u2026,\u0125_n is a chain, then any edge dual to \u0125_1 lies at \u2113^1 distance at least \n    n-2 from any edge dual to \u0125_n. Now,  Lemma\u00a0<ref> implies there exists N (depending only on D and R) such that n>N implies that \n    _X(\u0125_1,\u0125_n)>2R.  This is impossible, since \u0125_1,\u0125_n intersect a common R\u2013ball.\n    \n    On the other hand, <cit.> provides a constant K=K(D,T) such that any finite set \n    \u2131\u2282(B) must contain a chain of length at least |\u2131|/K.  So, |(B)|\u2264 KN.\n    \n    Let (B) be the cubical convex hull of B. \n      The set of hyperplanes of the CAT(0) cube complex (B) is \ud835\udcb2(B), which we have just shown is finite.  Hence (B) is a compact CAT(0) cube complex, and hence proper.  Since B\u21aa X is an isometric embedding (with respect to CAT(0) metrics), B is a ball in (B), and is therefore \n    compact.  This completes the proof.\n    \n    \n    The use of the above lemma will be the following.  Given x\u2208 X^(0) and y\u2208 X, we can consider the interval \n    (x,y) in X\u0303.  The intersection (x,y)\u2229 X is a vertex-convex set, which is the 0\u2013skeleton of a uniquely \n    determined convex subcomplex A.  Note that (A)=(x,y).  This \n    infinite set of hyperplanes cannot contain a facing triple.  Hence, Lemma\u00a0<ref> shows that A is \n    proper.  We will need this in the proof of Lemma\u00a0<ref>, to arrange for a sequence of CAT(0) geodesic segments in A to converge uniformly on compact sets to a CAT(0) \n    geodesic ray.  In this way, we avoid a blanket hypothesis that X is proper. \n    \n    Note that we therefore only use a special case of the lemma, namely properness of cubical intervals.  Properness of intervals follows from a much stronger statement: intervals endowed with the \u2113_1 metric  isometrically embed into ^(X) (i.e. are Euclidean). It follows that intervals are proper in the CAT(0) metric, since the two metrics are bilipschitz.  This \n    embedding  into ^(X) goes back at least to <cit.>. This embedding is closely related to <cit.>, which bounds the cardinality of facing tuples in Euclidean CAT(0) cube \n    complexes, which include, but are more general than, cubical intervals.  \n    \n    \n    \n    \n     \u00a7.\u00a7 Combinatorial Geodesic Rays\n    \n    \n    Next, we develop some basic facts about combinatorial geodesics in CAT(0) cube complexes that will be needed when we relate different types of boundaries.\n    \n    \n     A map \u03b3 [0, \u221e)\u2192 X^(1) is said to be a combinatorial geodesic ray if \u03b3() \u2282 X^(0) and for each \n    n,m \u2208 we have  d_1(\u03b3(n), \u03b3(m) ) = |n-m| and \u03b3 is an isometry on each interval [n, n+1]. \n    \n     Let \u03b3 [0,\u221e)\u2192 X be a combinatorial geodesic ray. There exists a unique point  y\u2208 X such that \u03b3(n) \u2192  y\n    in X\u0303 as n \u2192\u221e. \n    \n    \n    In the sequel, we will write y = \u03b3(\u221e) to mean \u03b3(n) \u2192  y.\n    \n    \n    \n    Consider the set\n    \n        D(\u03b3) = {h\u2208: \u03b3([N,\u221e)\u2229)\u2282 h for some  N\u2208}.\n     \n    This is clearly a consistent choice of half-spaces. We claim that for each h\u2208, either h or h^* belongs to \n    D(\u03b3).\n    Indeed, up to replacing h by h^*, there must be a monotonic sequence n_k\u2192\u221e such that \u03b3(n_k) \u2208 h. Since h is \n    convex, it follows that \u03b3([n_1,\u221e)\u2229) \u2282 h.\n    \n    Now, define C = \n    \u22c2_ h \u2208 D(\u03b3) h. We claim that C consists of exactly one point. Note that C \u2260\u2205 because \n    it is a nested intersection of compact sets in X\u0303. On the other hand, if x,x' \u2208 C are distinct points, then consider \n    a \n    half-space h such that x \u2208 h and x' \u2208 h^*. This half-space must satisfy both h \u2208 D(\u03b3) and h^* \u2208 D(\u03b3), a contradiction. Thus \n    C = {y}, as desired.\n    \n     For every x\u2208 X^(0) and every y \u2208 X, there is a combinatorial geodesic ray \u03b3 [0,\u221e) \u2192 X such that \u03b3(0) = \n    x and \u03b3(\u221e) =  y. \n    \n    \n    The proof of Lemma\u00a0<ref> is modeled on the construction of normal cubed paths, introduced by Niblo and Reeves in\u00a0<cit.>.\n    \n    \n    Without loss of generality, let us assume that X\u0303= (x,y), that is, (X) = _x^+_y^+. \n    The collection of half-spaces _x^+\u2216_y^+ is partially ordered by set inclusion. Consider h, k \u2208_x^+\u2216_y^+. Since x\u2208 h\u2229 k and y\u2208 h^*\u2229 k^*, the possible relations between h and k are: h\u2282 k or k\u2282 \n    h or h\u22d4 k. In other words, incomparable elements are transverse. In particular, all minimal elements of \n    _x^+\u2216_y^+ must be pairwise transverse.  By finite dimensionality, the set M_1 of minimal elements is \n    finite.  Let x_1 be the vertex obtained by replacing every h \u2208 M_1 by h^*, that is, _x_1^+= \n    (_x^+\u2216 M_1)\u222a M_1^*, a clearly consistent and total choice of half-spaces. In other words, x_1 is \n    diagonally across from x in the unique maximal cube containing x in the vertex interval (x, y). \n    \n    Proceeding by induction, suppose that x_n-1 has been defined. \n    Let M_n be the set of minimal elements of  _x_n-1^+ \u2216_y^+.\n    \n    Let x_n be the vertex obtained by replacing every h \u2208 M_n by h^*, corresponding to the half-space interval _x_n^+= (_x_n-1^+\u2216 M_n)\u222a M_n^*.\n    \n    Observing that M_k^*\u2229 M_j = \u2205 for j < k,\n    we conclude that \n    \n        _x_n^+= ( _x^+\u2216\u22d3j=1n-1 M_j ) \u222a( \u22d3j=1n-1 M_j^*).\n    \n    \n    Fix k<m \u2208. We claim that for any integer \u2113\u2208  [k, m], x_\u2113 lies on every geodesic path from x_k to \n    x_m.\n    Equivalently, we claim that\n    the median of x_k, x_\u2113, and x_m is x_\u2113. Recall that this will be the case if every half-space \n    containing x_k and x_m also contains x_\u2113. This containment can be established as follows\n    \n        _x_k^+ \u2229_x_m^+     = ( _x^+ \u2216\u22d3j=1m-1 M_j )\u222a( \u22d3j=1k-1M_j^* ) \n           \u2282( _x^+ \u2216\u22d3j=1\u2113-1 M_j ) \u222a( \u22d3j=1\u2113-1M_j^* ) = \n        _x_\u2113^+.\n    \n    This proves the claim.\n    \n    Set x_0=x and choose an edge-geodesic \u03b3_k  [0, d(x_k-1, x_k)] \u2192(x_k-1, x_k) from x_k-1 to x_k. Finally, define \u03b3 as the infinite\n    concatenation \u03b3_1  \u03b3_2 \u22ef. Then, by construction, \u03b3(\u221e) =  y.\n    \n    \n    We will discuss further properties of combinatorial geodesic rays in Section\u00a0<ref>.\n    \n    \n    \n    \u00a7 CUBOID COMPLEXES WITH MODIFIED CAT(0) METRICS\n    \n    \n    A cuboid is a box of the form [0,a_1] \u00d7\u2026\u00d7 [0,a_n] \u2282^n. \n    In this section, we describe a way to modify the metric on a\n    finite-dimensional CAT(0) cube complex X to produce a new CAT(0) space whose cells are cuboids rather than cubes.   Our \n    results relating the Tits boundary and simplicial boundary of a CAT(0) cube \n    complex will carry over to this context with small changes to some proofs, which we will indicate in the relevant places.\n    \n    The reader only interested in CAT(0) cube complexes with the standard CAT(0) metric can safely skip this section, apart from the statements of Lemmas\u00a0<ref> and\u00a0<ref>. \n    Those lemmas are cuboid generalizations of standard results in the literature, namely\u00a0<cit.> and\u00a0<cit.>. Thus, in the standard metric, one can substitute those results from the literature for the lemmas of this section.\n    \n    \n    \n    Let X be a finite-dimensional CAT(0) cube complex and let G \u2192(X) be a group acting on X by cubical automorphisms.  Let \n     be the set of hyperplanes in X. \n    \n    \n    A hyperplane rescaling \n     of X is a map \u03c1\u2192 (0,\u221e). The rescaling is called G\u2013admissible \n    if it is G\u2013invariant, and in addition we have m_\u03c1=inf_\u0125\u2208\u03c1(\u0125)>0 and M_\u03c1=sup_\u0125\u2208\u03c1(\u0125)<\u221e.\n    \n    \n    Let \u03c1 be a G\u2013admissible hyperplane rescaling of X.  Fix a cube c of X.  For each hyperplane \u0125_i \n    intersecting c, let \u03c1_i=\u03c1(\u0125_i).  Regarding c as an isometric \n    copy of \u220f_i[0,\u03c1_i], with the Euclidean metric, let d_X^\u03c1 be the resulting piecewise-Euclidean path metric on \n    X.\n    \n      The following result is a special case of a theorem of Bowditch\u00a0<cit.>, but we are able to give a direct proof. \n    \n    \n    Suppose that G acts on X by cubical automorphisms, and let \u03c1 be a G\u2013admissible hyperplane rescaling of X.  Then \n    (X,d_X^\u03c1) is a CAT(0) space, and the \n    action of G on (X,d_X^\u03c1) is by isometries.\n    \n    Let x \u2208 X be an arbitrary point. Then the link of x in (X,^\u03c1_X) \n    is isometric to the link of x  in (X,d_X), and is hence a CAT(1) space. Since the amount of rescaling in bounded, there is a small \u03f5 depending on x and \u03c1 such that the \n    \u03f5\u2013balls about x in the two metrics are (abstractly) isometric. Thus (X, d_X^\u03c1) is locally CAT(0). Recalling that X is contractible (the homeomorphism type has not changed), we \n    conclude that (X, d_X^\u03c1) is globally CAT(0) by Cartan\u2013Hadamard theorem\u00a0<cit.>. \n    \n     Since \u03c1 is G\u2013equivariant, G takes cuboids to d_X^\u03c1\u2013isometric cuboids, \n    hence G acts by isometries.  \n    \n    \n    One can also prove Lemma\u00a0<ref> using a result of Bridson and Haefliger\u00a0<cit.>. Our proof is essentially the same argument, but the cubical structure allows us to assume bounded rescaling rather than\n    finitely many shapes.\n    \n    \n    \n    Consider a finite-dimensional CAT(0) cube complex X, a group G acting on X by cubical automorphisms, and a G\u2013admissible hyperplane rescaling \n    \u03c1 of X. We say that the CAT(0) metric \n    d_X^\u03c1 from Lemma\u00a0<ref> is a CAT(0) cuboid metric on X, and (X,d_X^\u03c1) is a CAT(0) \n    cuboid complex.\n    \n    Suppose that G acts on X by cubical automorphisms, and let \u03c1 be a G\u2013admissible hyperplane rescaling of X. Define (X^\u03c1) \u2282(X) to be the automorphism group of the rescaled complex (X,d_X^\u03c1). By construction, the representation G \u2192(X) has image in \n    (X^\u03c1). \n    \n    Every cubically convex subcomplex Y \u2282 X is also geodesically convex in the rescaled metric d_X^\u03c1.\n    In particular, every CAT(0) half-space (k) is convex in d_X^\u03c1.\n    \n    By Definition\u00a0<ref>, a cubically convex subcomplex is an intersection of CAT(0) half-spaces. Since any intersection of d_X^\u03c1\u2013convex sets will be d_X^\u03c1\u2013convex, it suffices to prove that CAT(0) half-spaces are d_X^\u03c1\u2013convex.\n    \n    Now, let k \u2208(X), and let (k) be the the corresponding CAT(0) half-space. Observe that (k) is a CAT(0) cube complex in its own right with half-space structure (k) = {h\u2208: \n    h\u22d4 k}. Let G_k= _G(k) which then acts by isometries on ((k)). Clearly the restriction \n    \u03c1|_(k) is G_k\u2013admissible. By Lemma <ref> we have ((k), \n    d^\u03c1|(k)_(k)) is a CAT(0) space, so that\n    \n        d_X^\u03c1|_(k) = d^\u03c1|_(k)_(k).\n    \n    \n    Therefore, the identity inclusion (h) \u21aa X is isometric with respect to this new CAT(0) metric, and in \n    particular (k) is d_X^\u03c1\u2013convex. \n    \n     \n     The following result is a generalization of\u00a0<cit.> for CAT(0) cuboid complexes.\n    \n    \n    \n    Let X be a CAT(0) cube complex and let \u03c1 be a G\u2013admissible hyperplane rescaling.  Suppose that (X) =\ud835\udcb2_1\u2294_2, where \u0125,v\u0302 cross whenever \u0125\u2208_1,v\u0302\u2208_2.  \n    \n    Then X=X_1\u00d7 X_2 (as a product cube complex), where X_1 and X_2 are CAT(0) cube complexes dual to _1 and _2.  \n    \n    Letting p_i  X\u2192 X_i denote the natural projection, \n    for i\u2208{1,2}, the map p_i induces a bijection on the sets of hyperplanes such that the preimages of the hyperplanes in \n    X_i are the hyperplanes in _i.  \n    \n    Moreover, restricting \u03c1 \n     to _i, we obtain rescaled CAT(0) metrics ^\u03c1_X_i such that (X_i,^\u03c1_X_i) is a CAT(0) \n    cuboid complex and we have\n    \n        ^\u03c1_X(x,y)=\u221a(^\u03c1_X_1(p_1(x),p_1(y))^2+^\u03c1_X_2(p_2(x),p_2(y))^2)\n     \n     for all x,y\u2208 X. \n    \n    The statement about X decomposing as a product cube complex follows from\u00a0<cit.> and the \n    discussion in\u00a0<cit.> preceding it.  So, it remains to prove the \n    statement about rescaled CAT(0) metrics.\n    \n    Admissibility of the rescalings on X_1,X_2 follows from admissibility of \u03c1 and the fact that p_i is a \n    restriction quotient in the sense of\u00a0<cit.>, meaning it sends \n    hyperplanes to hyperplanes.  So, Lemma\u00a0<ref> makes each (X_i,^\u03c1_X_i) a CAT(0) cuboid \n    complex.\n    \n    We now verify the metric statement.  Let x,y\u2208 X.  Let \u03b1 be the ^\u03c1_X\u2013geodesic from x=(p_1(x),p_2(x)) \n    to y=(p_1(y),p_2(y)).  Let \u03b2 be the ^\u03c1_X\u2013geodesic from \n    (p_1(x),p_2(y)) to (p_1(x),p_2(x)), and let \u03b3 be the ^\u03c1_X\u2013geodesic from (p_1(y),p_2(y)) to (p_1(x),p_2(y)).  So, \n    \u03b1\u03b3\u03b2 is a geodesic triangle.  \n    \n    Note that every point on \u03b2 has the form (p_1(x),z) and every point on \u03b3 has the form (z,p_2(y)), because the \n    p_i are restriction quotients and therefore have convex fibers by \n    Lemma\u00a0<ref>.  In particular, \u03b2=^\u03c1_X_2(p_2(x),p_2(y)) and \n    \u03b3=^\u03c1_X_1(p_1(x),p_1(y)) and p_1,p_2 are respectively isometries on \u03b3 \n    and \u03b2.  Moreover, the Alexandrov angle (see Definition <ref>) formed by \u03b2 and \u03b3 at their common point is \u03c0/2.  Perform the \n    same construction with (p_1(x),p_2(y)) replaced by (p_1(y),p_2(x)).  This \n    yields a geodesic quadrilateral in (X, ^\u03c1_X), with all angles \u03c0/2, two adjacent sides having length \n    ^\u03c1_X_2(p_2(x),p_2(y)) and ^\u03c1_X_1(p_1(x),p_1(y)), and x and y as opposite \n    corners.  The Flat Quadrilateral Theorem (<cit.>) now implies that \n    \n        ^\u03c1_X(x,y)=\u221a(^\u03c1_X_1(p_1(x),p_1(y))^2+^\u03c1_X_2(p_2(x),p_2(y))^2),\n    \n    as required.\n    \n    \n    We also need the following standard lemma.  In the context of CAT(0) cube complexes, this is\u00a0<cit.>.  We state it here for cuboid complexes.  The proof \n    from\u00a0<cit.> goes through with tiny changes that we indicate below.\n    \n    \n     Let X be a D\u2013dimensional CAT(0) cube complex and let \u03c1 be a G\u2013admissible hyperplane rescaling.  Let (X,d^\u03c1_X) be the resulting CAT(0) cuboid complex.  Let \n    \u03b3 [0,\u221e)\u2192 X be a geodesic ray for the metric d^\u03c1_X, with \u03b3(0)\u2208 X^(0).  Then X contains a combinatorial geodesic ray \u03b1 in X^(1) such that \n    \u03b1(0)=\u03b3(0) and such that \u03b1 fellow-travels with \u03b3 at distance depending only on D and \u03c1.\n    \n    The proof from\u00a0<cit.> works with almost no change.  First, <cit.> is about the combinatorial structure of X only, which does not change \n    when we rescale edges to pass from the CAT(0) metric d_X to the CAT(0) metric d_X^\u03c1.  The proof of\u00a0<cit.>  needs this lemma, plus CAT(0) convexity of \n    half-spaces, which continues to hold in view of Corollary\u00a0<ref>.  The proof of\u00a0<cit.> produces a combinatorial ray \u03b1 such that each \n    point of \u03b1 lies in a common cube as a point of \u03b3, and vice versa.  Hence the two rays fellow travel at CAT(0) distance bounded by the diameter of a cube.  In the metric d_X, this is \n    bounded in terms of D; in the metric d_X^\u03c1, this is bounded in terms of D and the constant M_\u03c1 from Definition\u00a0<ref>, as required by the statement.\n    \n    \n    Since d_X and d_X^\u03c1 are path-metrics, and for each cube c of X, the standard CAT(0) metric d_X on c is bilipschitz \n    to the restriction of d_X^\u03c1 (with constant depending only on the rescaling constant), the identity map \n    (X,d_X)\u2192(X,d_X^\u03c1) is bilipschitz.  Combining this fact with Lemma\u00a0<ref> yields a version of Lemma\u00a0<ref> for the rescaled metric d_X^\u03c1:\n    \n    \n    There are constants \u03bb_0^\u03c1\u2265 1, \u03bb_1^\u03c1\u2265 0, depending on X and \u03c1, such that the following holds. For any pair \n    of points x, y \u2208 X,\n    \n        1/\u03bb_0^\u03c1  d_X^\u03c1(x,y) - \u03bb_1^\u03c1\u2264 |(x,y)| \u2264\u03bb_0^\u03c1  d_X^\u03c1(x,y) + \u03bb_1^\u03c1.\n    \n    \n    In a similar fashion, by Remark\u00a0<ref>, there is a bilipschitz relationship between (X, d_X^\u03c1) and (X, d_1).\n    \n    \n    \n    \u00a7 THE  SIMPLICIAL ROLLER BOUNDARY X\n    \n    In this section, we discuss one of the main objects in the paper: the simplicial Roller boundary.\n    \n    \n    \n    Let x,y \u2208X\u0303.  Recall that (x,y) = _x^+  _y^+ is the set of half-spaces that separate x from y. We say that x is commensurate to y, and write x\u223c y, if  |(x,y)|< \u221e.  \n    Observe that X^(0) forms a single commensurability class in X\u0303. Commensurability classes contained in  X = \n    X\u0303\u2216 X^(0) are also called Roller classes.\n    \n     The Guralnik quotient of the Roller Boundary is X =  X / \u223c,  the set of commensurability \n    classes of points in the Roller boundary\u00a0<cit.>. We shall often implicitly consider elements [x]\u2208 X as \n    subsets [x]\u2282X\u0303. \n    \n    \n     \n    In most cases,  the quotient topology on X =  X / \u223c is not Hausdorff (in  fact, it does not even \n    satisfy the T_1 axiom). We think of X as only a set, without a topology. In \n    Definition\u00a0<ref>, we will use a partial order on X to define a simplicial complex X with far nicer topological properties.\n    \n    \n    Following <cit.>,  we  say a set S\u2282 is non-terminating if S contains no minimal elements: \n    given any half-space h\u2208 S, there is a half-space k\u228a h with k\u2208 S. \n    \n    \n    \n    Let C \u2282 X be a closed, convex set. The following are equivalent:\n    \n      *  There is a point y\u2208\u2202 X such that C= [\u0303\u1ef9]\u0303.\n    \n      *  There exists k\u2264 (X) and a family (h^1_m)_m\u2265 0, (h_m^2)_m\u2265 0,\u2026, (h_m^k)_m\u2265 0 of descending chains of  half-spaces  such that \n    \n        C =\u22c2_i=1^k\u22c2_m\u2265 0h_m^i.\n    \n      * C is a union of Roller classes.\n    \n      *  The set of half-spaces _C^+ is non-terminating.\n    \n    We will prove <ref>\u21d2<ref>\u21d2<ref>\u21d2<ref> and <ref>\u21d4<ref>. \n    \n    The claim that <ref> implies <ref>  is a restatement of <cit.>.\n    \n    \n    \n    \n    \n    \n    To prove that <ref> implies <ref>,\n    assume that y \u2208 C = \u22c2_i=1^k\u22c2_m\u2265 0h_m^i and y' \u223c y\n    meaning that  |(y, y')|< \u221e. \n    Since _y^+ \u2216_y'^+ is finite, it follows that there exists an N for which h_m^i \u2208_y'^+ (i.e. y'\u2208 h_m^i) for each m\u2265 N and i=1, \u2026, k.\n    That is to say, \n    \n        y'\u2208\u22c2_i=1^k\u22c2_m\u2265 Nh_m^i= \u22c2_i=1^k\u22c2_m\u2265 0h_m^i = C.\n    \n    \n    To prove\n    <ref> implies <ref>,\n    suppose that C is  a union of Roller classes. \n    Let _C be the collection of half-spaces that cut C.  By Theorem\u00a0<ref>, there is an associated cube complex X(_C). \n    Since C is closed and convex, Proposition <ref> and Lemma\u00a0<ref> give an embedding i_C X\u0303(_C)\u21aaX\u0303 whose image is C, and furthermore\n    C= \u22c2_h\u2208_C^+h.\n    \n    \n    Let y_0 \u2208 X(_C)^(0) and note that [\u0303\u1ef9_\u03030\u0303]\u0303= X\u0303(_C).   Let  y=i_C(y_0)\u2208 C and note that i_C([y_0]) \u2282 [y], hence C=i_C([\u0303\u1ef9_\u03030\u0303]\u0303) \u2282[\u0303\u1ef9]\u0303.  Since C is a union of equivalence classes, we have [y]\u2282 C. Since C is closed, we have that [\u0303\u1ef9]\u0303\u2282 C and hence C= [\u0303\u1ef9]\u0303.\n     \n    \n    \n    \n    To prove <ref> implies <ref>,\n    suppose  there exists a minimal half-space h_0\u2208_C^+. We claim that _C^+\u2216{h_0} is consistent. Indeed, if h\u2208_C^+\u2216{h_0} then h^*\u2209_C^+\u2216{h_0}. If h\u2282 k then k\u2208_C^+, and since h_0 is minimal, h_0\u2260 k so k\u2208_C^+\u2216{h_0}. \n    \n    We may therefore consider the CAT(0) cube complex associated to _C \u2294{h_0, h_0^*}. Fix y, y' \u2208 X(_C \u2294{h_0, h_0^*}) such that y\u2208 h_0 and y'\u2208 h_0^*. Then, by Proposition <ref>  there is a unique point \u1ef9\u2208 C associated to the total and consistent choice of half-spaces \n        {h\u2208_C: y\u2208 h}\u2294_C^+.\n     Similarly, there is a unique point \u1ef9'\u2208 X\u2216 C associated to \n        {h\u2208_C: y'\u2208 h}\u2294{h_0^*}\u2294 (_C^+\u2216{h_0}).\n    \n    By construction, |(\u1ef9, \u1ef9')| = 2, hence C is not a union of Roller classes. \n    \n    \n    \n    Finally, to prove <ref> implies <ref>, suppose that C is not a union of Roller classes. Then there are commensurate elements \n    y\u2208 C and  y' \u2208 X \u2216 C. Convexity means \n    \n        C = \u22c2_h\u2208_C^+h,\n    \n    hence there is a half-space h\u2208_C^+ with y\u2208 C \u2282 h and y'\u2209 h. Under the assumption that \n    |(y,y')|<\u221e, we may choose a minimal such h and conclude that _C^+ fails to be non-terminating. \n    \n    Given a closed, convex set C satisfying \n    one of the equivalent conditions of Lemma\u00a0<ref>, the class [y] whose closure is C is called the principal class of C. Compare Guralnik <cit.>. \n    \n    Let [x],[y] \u2282 X be Roller classes. \n    We define a partial order on X by setting [x] \u2264 [y] whenever _[x]^+ \u2282_[y]^+, or equivalently _[\u0303x\u0303]\u0303^+ \u2282_[y]^+.\n    \n    \n    The following result is essentially a corollary of Lemma\u00a0<ref>.\n    \n    \n     For Roller classes [x],[y] \u2282 X, the following are equivalent:\n     \n      * [x] \u2264 [y]\n      * _[x]^+ \u2282_[y]^+\n      * [y]\u2282[\u0303x\u0303]\u0303\n      * [y]\u2229[\u0303x\u0303]\u0303\u2260\u2205\n    \n    Conditions <ref> and <ref> are equivalent by Definition\u00a0<ref>.  Since _[x]^+ =_[\u0303x\u0303]\u0303^+, by Lemma\u00a0<ref>, Remark <ref> implies that <ref> and <ref> are equivalent. Next, <ref> trivially implies <ref>. Finally, <ref> implies <ref> by Lemma\u00a0<ref>.\n    \n    The simplicial Roller boundaryX is the simplicial realization of the partial order of Definition\u00a0<ref>. That is: vertices of X correspond to points of X, or equivalently Roller classes in X. Simplices in  X correspond to totally ordered chains of Roller classes. \n    \n    Observe that the action of (X) on X preserves commensurability classes and the order \u2264, yielding a bijective action  on X and a simplicial action on X.\n    \n    The characterization of Lemma\u00a0<ref>.<ref> implies that any simplex in X has k \u2264 X vertices, hence X\u2264 X-1.\n    \n    \n    \u00a7 THE SIMPLICIAL BOUNDARY\n    \n    \n    In this section, we recall the definition of the simplicial boundary \u2202_ X<cit.>; see Definition\u00a0<ref>. Then, we \n    develop some connections between \u2202_ X, the Roller boundary X, and the simplicial Roller boundary X. See Theorem\u00a0<ref> and Corollary\u00a0<ref> for the most top-level statement. The lemmas used to prove those top-level results will be extensively used in later sections.\n    \n    \n    \n     \u00a7.\u00a7 Unidirectional boundary sets\n     \n    Recall that  is the set of half-spaces of X and  is the set of hyperplanes of X. In this section, we mainly focus on collections of hyperplanes.\n    \n    \n    A  triple  h_1, h_2, h_3 \u2208 is called a facing triple if  their complements h_1^*, h_2^*, h_3^* are \n    pairwise disjoint. Similarly, a triple of hyperplanes \u0125_1, \u0125_2, \u0125_3 \u2208 is called a facing \n    triple if there exists a choice of orientation such that h_1, h_2, h_3 form a facing triple.\n    \n    \n    Caprace and Sageev  <cit.> showed that  in a non-elementary\n     essential CAT(0) cube complex, given any half-space h\u2208 there exist half-spaces k, \u2113\u2208 such that {h,k,\u2113} is a facing triple. \n    \n    \n    \n    A collection  of hyperplanes \ud835\udcae\u2282 is called unidirectional if for every \u0125\u2208\ud835\udcae, at most one side of \u0125 contains infinitely many other elements of \ud835\udcae. \n    \n    A collection \ud835\udcae\u2282 is called inseparable if whenever \u0125, k\u0302\u2208\ud835\udcae and \u2113\u0302 is a hyperplane that separates \u0125 and k\u0302, then \u2113\u0302\u2208\ud835\udcae. This is closely related to the \u201ctightly nested\u201d condition in Proposition\u00a0<ref>.\n    \n     A set \u2282 is a unidirectional boundary set (abbreviated UBS) if it is infinite, unidirectional, inseparable, and does not contain a facing triple. \n      \n    Let  and \ud835\udcb1 be UBSes.  Define a relation \u227c where \u227c\ud835\udcb1 if all but finitely many elements of  lie in\n    \ud835\udcb1.  Say that  and  are commensurate (denoted \u223c)  if \u227c and \u227c.\n    \n    The relation \u227c on UBSes descends to a\n    partial order on commensurability classes of UBSes. We say that  is minimal if its commensurability class is minimal \u2014 that is, if  \u227c implies \u223c. Similarly, we say that  is maximal if \u227c' implies \u223c'.\n    \n    For disjoint subsets A, B \u2282X\u0303, let (A, B) be the set of hyperplanes separating A from B.\n     It is straightforward to check that (A, B) is inseparable and does not contain a facing triple. Furthermore, if A\u2282 X then (A, B) is unidirectional.  If, in addition, B\u2282 X, then (A, B) is infinite. Under these last two conditions, we conclude that (A, B) = (A, B) is a UBS. Compare Lemma <ref>.\n     \n    Let  be a UBS. We say that  is pruned if every hyperplane \u0125\u2208 has exactly one associated half-space h containing infinitely many elements of . In this situation, we call \n    h the  canonical orientation of \u0125 or the canonical half-space associated to \u0125.\n    \n    Let  be a UBS. Then  contains a canonical pruned sub-UBS ' \u2282 that is commensurate to .\n    \n    Let F_ be the set the hyperplanes of  with the property that both associated half-spaces contain finitely many elements of . We claim that F_ is finite.\n    To see this, let \u0125_1, \u2026, \u0125_D be a maximal family of pairwise transverse hyperplanes in F_. This family is finite because D \u2264 X. For any \u0125\u2208 F_\u2216{\u0125_1, \u2026, \u0125_D} there is at least one i for which \u0125 is parallel (i.e. not transverse) to \u0125_i. By the definition of F_,  there are finitely many hyperplanes in  parallel to each \u0125_i,\n     hence F_ is finite. \n     \n     Now, define ' = \u2216 F_. By construction, every \u0125\u2208' has exactly one associated half-space containing infinitely many elements of , hence infinitely many elements of ' as well.\n     \n    We claim that ' is a UBS. Since F_ is finite, it follows that ' is infinite. Unidirectionality and the lack of facing triples are properties that pass to subsets of , hence to '.  Next, suppose that \u0125, k\u0302\u2208' with \u2113\u0302 in between. Since \u0125, k\u0302\u2208 and  is inseparable, observe that \u2113\u0302\u2208. But\n    \u2113\u0302\u2209 F_, because \u0125, k\u0302 both bound half-spaces containing infinitely many elements of . We conclude that \u2113\u0302\u2208', verifying that ' is a UBS. Since  and ' differ by finitely many hyperplanes, they are commensurate.\n    \n    \n    \n    Hagen proved that every (commensurability class of) UBS  decomposes in a well-defined fashion into a disjoint union of minimal UBSes.\n    The following is a restatement of <cit.> and <cit.>.\n    \n    \n    Let  be a UBS. Then there is a decomposition \u223c_i=1^k _i, where:\n    \n      *  each _i is a minimal UBS;\n      \n      *  any UBS \u2282 is commensurate with the disjoint union of some of the _i;\n      \n      *  if 1\u2264 j < i \u2264 k, then every hyperplane in _i crosses all but finitely many of the hyperplanes in _j.\n     \n    Consequently, there are finitely many commensurability classes of UBSes \u227c.\n    \n    \n    Lemma\u00a0<ref> enables the following definition.\n    \n    \n    \n    \n    For a UBS , the dimension of  is the number k appearing in the decomposition of Lemma\u00a0<ref>. This is an invariant of the commensurability class.\n    An immediate consequence of Lemma\u00a0<ref>.<ref> is that () \u2264 (X).\n    \n    The simplicial boundaryX is the following simplicial complex.  For each commensurability class of a UBS \n    , there is a (k-1)\u2013simplex \u03c3_, where k is the dimension of the class of .  The face relation is defined \n    as follows: \u03c3_ is a face of \u03c3_ if and only if \u227c.  \n    \n    \n    Note that X has a vertex for each commensurability class of a minimal UBS. Furthermore, a finite collection of \n    vertices spans a maximal simplex if and only if the union of the corresponding minimal UBSes is commensurate with a maximal UBS. However, there can exist non-maximal simplices that do not correspond \n    to a UBS; see Example\u00a0<ref>. For this reason, X is not the simplicial realization of the partial order \u227c.\n    \n    \n    Observe that (X) acts on UBSes in a way that preserves  the \u227c relation, and hence preserves commensurability. Thus (X) acts simplicially on X.\n    \n    \n    \n    \n     \u00a7.\u00a7 Minimal and dominant UBSes\n    \n    Next, we establish some structural results about minimal UBSes. \n    Given a set S consisting of hyperplanes, the inseparable closure of S, denoted S,\n     is the intersection of all inseparable sets containing S. \n    \n    \n    Let \u2282(X) be a minimal UBS.  Then there exists an infinite descending chain {h_n : n \u2208}\u2282 with \u0125_n \u2208, such that \u223c{\u0125_n:n\u2208}.\n    \n    \n    Conversely, for every descending chain {h_n : n \u2208}\u2282, there exists N\u2265 0 such that {\u0125_n:n\u2265 N} is a minimal UBS.\n    \n    Let  be a minimal UBS.  Let  {h_n : n \u2208}\u2282 be a descending chain such that {\u0125_n}\u2282, which exists because  is infinite, unidirectional, contains no facing triple, and \n    contains no infinite collection of pairwise-crossing hyperplanes.  Let ' = {\u0125_n} be the inseparable closure of {\u0125_n}. Since  is \n    inseparable, we have '\u2282 by the definition of the inseparable closure.   Note that ' is a UBS (compare the proof of\u00a0<cit.> or\u00a0<cit.>).  Since '\u2282 and  is minimal, we have '\u223c, which \n    proves the first assertion of the lemma.\n    \n    Now we prove the second assertion.  For each m\u2265 0, let C_m={h_n:n\u2265 m} and let C_m be its inseparable closure.  As before, each C_m is a UBS.  Note that C_m\u2282C_m' whenever m\u2265 m'.  In particular, C_m\u227cC_m' for m' \u2265 m.  So, by Lemma\u00a0<ref>, there exists M\u2265 0 such that C_m\u223cC_M for all \n    m\u2265 M.  Hence, if m\u2265 M and {k_i} is any descending chain of half-spaces corresponding to hyperplanes in C_M, then there exists I\u2265 0 such that {k\u0302_i : i\u2265 I}\u2282 C_m.  This implies that C_M is commensurate with {k\u0302_i :i \u2265 0}, by, for example\u00a0<cit.>. See also the proof of\u00a0<cit.>.    \n    \n    Now let \u2282 C_M be a minimal UBS, which exists by\u00a0<cit.>.  By the first part of the lemma,  is commensurate with the inseparable closure of some chain contained in \n    C_M.  By the preceding paragraph, C_M\u223c, so C_M is minimal, as required.\n    \n    Lemma\u00a0<ref> has been generalized to the setting of median spaces by Fioravanti\u00a0<cit.>. In fact, the same result of Fioravanti also generalizes \n    many other basic facts about UBSes, such as\u00a0<cit.>.  \n    \n    The second assertion of Lemma\u00a0<ref> corrects a slight misstatement in\u00a0<cit.>: it is \n    true that minimal UBSes are commensurate with inseparable closures of chains, but inseparable closures of chains need not be minimal; one might first need to pass to a (cofinite) sub-chain (see \n    e.g.\u00a0<cit.> and the paragraph following).  We emphasize that this does not affect the use \n    of\u00a0<cit.> in\u00a0<cit.>, because what's being used is the (correct) statement that, up to \n    commensurability, minimal UBSes arise \n    as inseparable closures of chains.\n    \n    In this paper, we primarily use the first assertion of Lemma\u00a0<ref>, in conjunction \n    with Lemma\u00a0<ref>, to decompose a UBS  as a disjoint union of minimal UBSes (up to commensurability), \n    each of which has the additional property that it is the \n    inseparable closure of a chain.\n    \n    \n    \n    \n    The following consequence of Lemma\u00a0<ref> neatly sums up the special properties of chains whose inseparable \n    closures are minimal UBSes:\n    \n    \n    \n    Let {h_n:n\u2265 0} be an infinite descending chain of half-spaces.  For each m\u2265 0, let _m be the inseparable closure of {\u0125_n:n\u2265 m}.  Then the following are equivalent:\n    \n      *  The UBS _m is minimal for all m\u2265 0.\n     \n      * _m\u223c_0 for all m\u2265 0.\n    \n    In particular, if _0 is minimal, then _0\u223c_m for all m\u2265 0.\n    \n    Since _m\u227c_0 for all m, the first statement immediately implies the second.  For the reverse direction, Lemma\u00a0<ref> provides M\u2265 0 such that _m is minimal for m\u2265 \n    M.  If the second assertion holds, it then follows that the first must also.  \n    \n    Following Corollary\u00a0<ref>,  for the rest of this subsection we shall refer to a sequence of disjoint hyperplanes {\u0125_n } whose inseparable closure is a minimal UBS\n     as a chain of hyperplanes.\n    \n     \n     In particular, a chain of hyperplanes {\u0125_n }_n\u2265 0 defines a descending chain of half-spaces { h_n }_n\u2265 0.  A descending chain of half-spaces { h_n }_n\u2265 0 has the \n    property that for all sufficiently large N, the sequence {\u0125_n }_n\u2265 N  is a chain of hyperplanes, in view of Lemma\u00a0<ref>. \n    \n    \n    \n    Let  be a UBS. A hyperplane \u0125\u2208 is called dominant for  if \u0125 = \u0125_0 is the base of a chain of hyperplanes { h_n }\u2282 such that \u0125 \n    crosses all but finitely many hyperplanes in \u2216{ h_n }. \n    \n    \n    \n     Recall that by definition of a chain of hyperplanes, {h_n } is a minimal UBS. See Figure\u00a0<ref> for an example. \n    By Lemma\u00a0<ref>, the inseparable closure { h_n }  is commensurate to some minimal UBS _i in the decomposition \u223c_i=1^k _i of that lemma. Furthermore, _i \n    is unique: since a dominant hyperplane \u0125\u2208 is the base of a chain in _i, then \u0125 must intersect all but finitely many hyperplanes of _j (for j \u2260 i), hence \u0125 \n    cannot be disjoint from a chain in _j.\n    \n    \n    We also observe that if  is minimal and pruned, then every hyperplane of  is vacuously dominant.\n    \n    \n    \n    \n    \n    The following lemma is only stated in the special case where (X) is already a UBS. In practice, we will apply Lemma\u00a0<ref> to convex subcomplexes (such as the convex hull of a geodesic ray) where this hypothesis holds.\n    \n    \n     Suppose that = (X)\n      is a pruned UBS of dimension k.  Then  contains minimal UBSes \ud835\udc9f_d ,\u2026, \ud835\udc9f_k such that the following hold: \n     \n      * Each \ud835\udc9f_i is a set of dominant hyperplanes for , and all but finitely many dominant hyperplanes belong to \u22c3_i = d^k \ud835\udc9f_i.\n      \n      * For each i\u2208{d, \u2026, k} and each \u0125_0 \u2208\ud835\udc9f_i, there is a chain {\u0125_n \n    }_n\u22650\u2282\ud835\udc9f_i such that \ud835\udc9f_i is commensurate with {\u0125_n },  the \n    inseparable closure of the chain.\n    \n      *  For any such chain {\u0125_n }, there is N > 0, such that for all n \u2265 N, we have \n    \n        (\u0125_n+1)\u2216\ud835\udc9f_i\u2282(\u0125_n)\u2216\ud835\udc9f_i.\n     Furthermore, for all n \n    \u2265 0, we have \n    \n        |(\u0125_n)-(\u0125_n+1)|<\u221e.\n    \n      *  For every hyperplane \u00fb\u2208, there exists \u2208\u2208{d,\u2026,k} and a dominant hyperplane \u0125\u2208\ud835\udc9f_i such that \u0125 lies in the canonical \n    half-space \n    associated to \u00fb. \n     \n    \n    We will not use item (<ref>) later in the paper, but we record it as a potentially useful fact about UBSes.\n    \n    \n    By Lemma\u00a0<ref>, there is a decomposition \u223c_i=1^k_i, with an ordering such that for j < i, every hyperplane in _i crosses all but finitely many of the hyperplanes in _j. The ordering is only partially determined: if every hyperplane in _i crosses all but finitely many hyperplanes in _i+1, then we can \n    reverse the order of _i,_i+1 while keeping the conclusion of Lemma\u00a0<ref>.<ref>.  Let d be the smallest index i such that _i can be placed at the top of the order in such a decomposition.\n    \n    \n    Now, fix an index i \u2265 d. \n    By Lemma\u00a0<ref>, _i is commensurate with \ud835\udc9f_i = {\u0125_n}, where \n    {\u0125_n}\u2282_i is a chain. Thus \ud835\udc9f_i \u223c_i is a minimal UBS.\n    \n    We claim that every \u0125\u2208\ud835\udc9f_i is dominant. \n     Given \u0125\u2208\ud835\udc9f_i and the canonical associated half-space h (recall Definition\u00a0<ref>), there exists N\u2265 0 such that \u0125_N \u2282 h. \n     Thus \u0125 is the base of the infinite chain {\u0125,\u0125_N,\u0125_N+1,\u22ef}. Furthermore, \u0125\u2208\ud835\udc9f_i \u2282_i intersects all but finitely many hyperplanes in _j \n    for j \u2260 i, because we have chosen an index i \u2265 d. Thus \u0125 is dominant by Definition\u00a0<ref>.\n     Thus we have found dominant minimal UBSes \ud835\udc9f_d,\u2026,\ud835\udc9f_k satisfying conclusions\u00a0<ref> and \n    <ref>.\n    \n    Now we verify assertion <ref>. Fix i \u2265 d and let \u0125,\u0125'\u2208\ud835\udc9f_i.  Since the \n    minimal UBS \ud835\udc9f_i is the inseparable closure of a chain, \u0125,\u0125' both cross finitely many hyperplanes in \ud835\udc9f_i.  Indeed, if \ud835\udcb2(\u0125)\u2229\ud835\udc9f_i is infinite, it must contain a chain of hyperplanes whose inseparable closure \ud835\udc9f' belongs to \ud835\udc9f_i, and is contained in \n    \ud835\udcb2(\u0125) since the latter is inseparable.  Since \ud835\udc9f_i is minimal, \ud835\udc9f'\u223c\ud835\udc9f_i.  Hence \ud835\udcb2(\u0125) contains all but finitely many elements of \ud835\udc9f_i;  since \u0125\u2208\ud835\udc9f_i, this contradicts that \ud835\udc9f_i is the inseparable closure of a chain.  Thus \ud835\udcb2(\u0125)\u2229\ud835\udc9f_i is finite.  Moreover, since \ud835\udc9f_i \n    is dominant, \u0125,\u0125' both cross all but finitely many hyperplanes of \u2216\ud835\udc9f_i, and we can therefore conclude that \n    \n        |(\u0125)(\u0125')|<\u221e.\n    \n    \n    So,  it suffices to show that, for all sufficiently large n,  we have (\u0125_n+1)\u2216\ud835\udc9f_i\u2282(\u0125_n)\u2216\ud835\udc9f_i.\n    \n    If this doesn't hold, then  for infinitely many n we can find a hyperplane \u00fb_n\u2209\ud835\udc9f_i that crosses \n    \u0125_n+1 but not \n    \u0125_n; note that \u00fb_n does not separate any two elements of our chain since \u00fb_n\u2209\ud835\udc9f_i.  Since there are no facing \n    triples, \u00fb_n \n    crosses \u0125_m for \n    m\u2265 n+1. \n       Since the collection of violating \n    hyperplanes {\u00fb_n} is infinite and contains no hyperplanes crossing \u0125_0, dominance of \u0125_0 is \n    therefore \n    contradicted.  Thus there exists N such that (\u0125_n+1)\u2216\ud835\udc9f_i\u2282(\u0125_n)\u2216\ud835\udc9f_i for n\u2265 N, establishing <ref>.\n    \n    We now prove assertion\u00a0<ref>.  Let \u00fb\u2208 be a hyperplane, and let u be the  canonical \n    half-space associated to \u00fb. Given the fixed decomposition \u223c_i=1^k_i, let i be the \n    largest index such that\n    u contains a chain of hyperplanes in , whose inseparable closure _i' is commensurate to some _i. Such an i exists because  is pruned. We claim that i \u2265 d. This claim implies \n    that u contains infinitely many hyperplanes of \ud835\udc9f_i, which will suffice to prove the lemma.\n    \n    Suppose for a contradiction that i < d. Fix v\u0302\u2208_i', and consider a minimal UBS _j for j > i. If any hyperplane in _j fails to cross v\u0302, then it fails to cross \u00fb, \n    hence u contains a chain in _j, contradicting the maximality of i. See Figure\u00a0<ref>.\n    \n    \n    \n    \n    Furthermore, since v\u0302\u2208_i, it must cross all but finitely many hyperplanes of _\u2113 for \u2113 < i by \n    Lemma\u00a0<ref>.<ref>. Thus v\u0302 crosses all but finitely many hyperplanes of \u2216_i', hence v\u0302 is dominant. Since v\u0302\u2208_i' was \n    arbitrary, this shows that i \u2265 d by the definition of d.\n    \n    \n     \u00a7.\u00a7 Connections between X and X\n    \n    The next several lemmas develop tools for comparing the Roller boundary and the simplicial boundary. \n    \n    \n    \n    \n    Let \u2282(X) be a  UBS, and let ' \u223c be a pruned UBS commensurate to . For every \u0125\u2208', let \n    h \u2208(X\u0303) be the canonical orientation of \u0125,  that is,  the (extended, vertex) half-space  containing \n    infinitely many hyperplanes \n    of '. \n    \n    The umbra\u1ef8_ associated to  is \n    \n        \u1ef8_ = \u22c2_\u0125\u2208' h \u2282X\u0303.\n    \n    By Definition\u00a0<ref>, the umbra \u1ef8_ is a convex subset of X, one may think of it as the Roller realization of the UBS . In Lemma\u00a0<ref>, we will show that  \u1ef8_ satisfies the equivalent conditions of Lemma\u00a0<ref>. Then, Y_ will denote the principal class of \u1ef8_: that is, the unique Roller class whose closure is \u1ef8_.\n    \n    Let \u2282(X) be a UBS. Then the umbra \u1ef8_ associated to  is a nonempty subset of X.\n    Furthermore, \n     \n      *  If \u223c then \u1ef8_ = \u1ef8_. \n    \n      *  If \u223c_1\u222a\u22ef\u222a_N for some UBSes _1, \u2026,_N then \n        \u1ef8_ = \u22c2_i=1^N\u1ef8__i.\n    \n    Let ' be the pruned UBS commensurate to . As in Definition\u00a0<ref>, let h be the canonical orientation of every \u0125\u2208', and define  \ud835\udd18' = {h : \u0125\u2208' }\u2282. Then\n     \u1ef8_:= \u22c2_h\u2208\ud835\udd18'h. \n      \n     Since X\u0303 is compact, to show that \u1ef8_ is not empty, it is sufficient to show that \ud835\udd18' has the  finite \n    intersection property. By the Helly property for half-spaces\u00a0<cit.> this is equivalent \n    to showing that every pair of half-spaces h,k \u2208\ud835\udd18' has nonempty intersection. But a disjoint pair \n    h, k\u2208\ud835\udd18'  contradicts the unidirectionality of ', as both sides of \u0125 would contain infinitely many elements  of '. \n    \n    Using the same argument, we observe that for every h\u2208\ud835\udd18' there is an infinite descending chain { h_n } with h_0 = h and h_n\u2208\ud835\udd18'. Indeed, fix h\u2208\ud835\udd18'. Since ' is pruned, there are infinitely many hyperplanes in ' contained in h. Since ' is unidirectional, k\u0302\u2282 h and k\u0302\u2208' implies k \u2282 h. Applying induction, we find the infinite descending chain. Thus \u1ef8_\u2282 X.\n    \n    We now turn to the commensurability class of . Suppose that  is a UBS commensurate to . Since commensurability is an equivalence relation, we conclude that ' and ' are commensurate as well. Let \ud835\udd19' = {h : \u0125\u2208' }\u2282 be the set of canonical half-spaces associated to '.\n    \n    \n    We claim that \ud835\udd18' and \ud835\udd19' are also commensurate. Since the map taking half-spaces to hyperplanes is 2-to-1, it suffices to show that under this map, the set \ud835\udd18'\u2216\ud835\udd19'  has image in the finite set '\u2216', and vice versa. Let h\u2208\ud835\udd18'\u2216\ud835\udd19'. Then \u0125\u2208'. By definition of \ud835\udd18', we know that the set {k\u0302\u2208: k\u0302\u2282 h} is infinite. The commensurability of  and  implies that {k\u0302\u2208: k\u0302\u2282 h} is infinite as well. But h\u2209', hence it must be the case that \u0125\u2209'. \n    \n    \n    To see that \u1ef8_= \u1ef8_ it is sufficient to  show that if h\u2208\ud835\udd18'  then there is k\u2208'\u2229\ud835\udd18' with k\u2282 h. But this is immediate. As was proved above, for any h\u2208\ud835\udd18' there is an infinite descending chain { h_n }\u2282\ud835\udd18' with h_0 = h. Since \ud835\udd18' and \ud835\udd19' are commensurate, for N sufficiently large, we must have that h_N\u2208\ud835\udd19'.\n    \n    \n    \n    \n    Finally, the construction above makes it clear that  if  is commesurate to _1\u222a\u22ef\u222a_N for some  UBSes \n    _1, \u2026,_N then \u1ef8_ = \u22c2_i=1^N\u1ef8__i. \n    \n    For every UBS , there is a Roller class Z \u2282 X such that \u1ef8_ = Z\u0303. Furthermore, the assignment \u21a6 Z = Y_ is (X)\u2013equivariant.\n    \n    By Lemmas\u00a0<ref> and\u00a0<ref>,  is commensurate to a UBS =_i=1^k_i, where _i = {\u0125_n^i} for a descending chain of half-spaces { h_n^i }. Note that every _i is pruned. Thus\n    \n        \u1ef8_ =  \u22c2_1\u2264 i \u2264 k\u1ef8__i = \u22c2_1\u2264 i \u2264 k  \u22c2_\u0125\u2208_i h = \u22c2_1\u2264 i \u2264 k  \u22c2_n \u2208 h_n^i.\n    \n    Here, the first equality holds by Lemma\u00a0<ref>, the second equality holds by Definition\u00a0<ref>, and the third equality holds because the hyperplanes added in the inseparable closure do not affect the intersection. By Lemma\u00a0<ref>, a set of this form is the closure of a unique (principal) Roller class Y_. \n    \n    We observe that the above construction is independent of the choice of  descending chains with the desired properties, and hence the map \u21a6 Y_ is (X)\u2013equivariant.\n    \n    Let x\u2208 X^(0) and let Y \u2282 X be a convex set. Then the set of separating hyperplanes (x,Y)= (x,_Y(x)) is a pruned UBS.  \n    If x'\u2208 X^(0), then \n    (x',Y) \u223c(x,Y). Finally, (x,[y])\u223c(x,y) for every y\u2208 X. \n    \n    We begin by showing that  :=(x,Y) is a UBS.  Recall that (x,Y) is the set of hyperplanes associated to _x^+ _Y^+. Since x \u2208 X^(0), it follows that _x^+ satisfies the descending chain condition and since Y\u2282 X, it follows that _Y^+=_\u1ef8^+ \n    has an infinite descending chain. Hence,  is unidirectional and infinite. Since =(x,Y) is an interval, it follows that it is inseparable and does not contain a facing triple, hence  is a UBS. The fact that (x,Y)= (x,_Y(x)) follows from Proposition\u00a0<ref> and shows that  is pruned.  \n    \n    Let x,x' \u2208 X^(0). We claim that (x,Y) (x',Y) \u2282(x,x').  By symmetry, it suffices to observe that  a hyperplane \u0125 separating x from Y but not x' from Y necessarily separates x from x'. Since the cardinality of (x,x')  is the distance d(x,x')<\u221e, we conclude that the two UBSes are commensurate. \n     \n    Finally, fix y\u2208\u2202 X. We show that (x,[y])\u223c(x,y). Proposition\u00a0<ref> says that (x,[y]) = (x,_[y](x)), which implies that (x,[y]) \u222a(_[y](x), y)= (x,y). But _[y](x) \u2208 [y] by definition, hence  | (_[y](x),y) | < \u221e, completing the proof. \n    \n    Let  Y \u2208 X be a Roller class, and fix a basepoint x \u2208 X^(0). Following Lemma\u00a0<ref>, we call (x,Y) a UBS representing the class Y, and denote it _Y. Since the commensurability class [_Y] is independent of x, by Lemma\u00a0<ref>, we do not include the basepoint x in the notation _Y.\n    \n    It follows immediately that the assignment Y \u21a6 [ _Y ] is (X)\u2013equivariant.\n    \n    \n    \n    With this notation in place, we  conclude:\n    \n    \n    Fix x\u2208 X^(0) and Y\u2208 X. Then  Y = Y__Y. In particular,  every Roller class arises as the principal class of the umbra of some UBS.\n    \n    Since _Y = (x,Y) is a UBS, by Lemma\u00a0<ref> it is commensurate to _i=1^k  {\u0125_n^i} for descending chains { h_n^i }, hence Equation\u00a0(<ref>) gives\n    \n        \u1ef8__Y =  \u22c2_1\u2264 i \u2264 k  \u22c2_n \u2208 h_n^i.\n    \n     By construction, \u1ef8\u2282 h_n^i for every \u0125_n^i \u2208_i, hence \u1ef8\u2282\u1ef8__Y.\n    \n    As in Lemma <ref>, let  Y__Y  denote  the principal Roller class of \u1ef8__Y. \n     We claim that Y = Y__Y. So far, we have shown that Y__Y\u2264 Y in the partial order of Lemma\u00a0<ref> and so we are left to show that Y\u2264 Y__Y. To this end, we fix a half-space h\u2208 with Y \u2282 h and now show that  Y__Y\u2282 h. \n    \n    Let x'\u2208 h^* \u2229 X^(0) and set '_Y = (x',Y). Observe that \u0125\u2208'_Y by construction. Then by Lemma <ref> we have that '_Y is a pruned UBS commensurate to _Y and so Lemma <ref> implies \u1ef8__Y=\u1ef8_'_Y. Finally, by Definition\u00a0<ref> we have that Y__Y\u2282\u1ef8__Y\u2282 h. \n    \n    Let \u03b3\u2282 X be a geodesic ray, in either the CAT(0) or combinatorial metric. Let  (\u03b3) be the collection of hyperplanes intersecting \u03b3, which is a UBS by  <cit.>.\n     If  is a UBS and \u223c\ud835\udcb2(\u03b3) for some combinatorial geodesic ray \u03b3, we say that the class of  is \u2113^1\u2013visible. \n    Let Y \u2208 X. Then, for any x \u2208 X^(0) and any y \u2208 Y, Lemma\u00a0<ref> provides a combinatorial geodesic ray \u03b3 such that \u03b3(0)=x and \u03b3(\u221e) =  y \u2208 Y. By Definition\u00a0<ref> and Lemma\u00a0<ref>, we have \n    \n        (\u03b3) = (x, y) \u223c(x, [y]) = (x, [\u0303\u1ef9]\u0303).\n    \n    \n    Furthermore, by Lemma\u00a0<ref>, the commensurability class [(\u03b3)]= [_Y] does not depend on the choice of x \u2208 X^(0) and  y \u2208 Y.  In particular, every UBS representing a class Y is \u2113^1\u2013visible.\n    \n    Let  be a UBS.  Let y\u2208\u1ef8_ and let \u03b3 be a combinatorial geodesic in X such that \n    \u03b3(\u221e) = y. \n     Then \u227c(\u03b3).  In particular, if  is maximal, then \u223c(\u03b3).\n    \n    As in Lemma\u00a0<ref>,  is commensurate to _i=1^k _i, where the _i are minimal and _i = {\u0125_n^i} for a descending chain of half-spaces { h_n^i }. Thus \n    Equation\u00a0(<ref>) gives\n    \n        \u1ef8_ =  \u22c2_1\u2264 i \u2264 k\u1ef8__i = \u22c2_1\u2264 i \u2264 k  \u22c2_\u0125\u2208_i h = \u22c2_1\u2264 i \u2264 k  \u22c2_n \u2208 h_n^i.\n    \n    Since \u03b3(m) \u2192 y \u2208\u1ef8_, we must have y \u2208 h_n^i for every i and every n. At the same time, since the sequence { h_n^i } is a descending chain for each i, we have that x = \u03b3(0)\n    \u2209 h_n^i for sufficiently large n. Thus all but finitely many hyperplanes \u0125_n^i belong to (x,y)=(\u03b3). The inseparable closure of this cofinite subset of {\u0125_n^i} must belong \n    to (\u03b3), and by minimality of _i and Corollary\u00a0<ref>, it follows that all but finitely many elements of each _i belong to W(\u03b3).\n    \n    Let  be a maximal UBS. Then, for every y \u2208  Y_, there is a combinatorial geodesic \u03b3 limiting to y, such that \u223c(\u03b3). In particular, the commensurability class [] is \u2113^1\u2013visible.\n    \n    Let y \u2208 Y_. By Lemma\u00a0<ref>, there is a combinatorial geodesic ray \u03b3 limiting to y.  By  \n    Lemma\u00a0<ref>, we have \u223c(\u03b3). Thus, by Definition\u00a0<ref>,  is \u2113^1\u2013visible.\n    \n    \n    In Corollary\u00a0<ref>, the conclusion that [] is visible was previously shown by Hagen <cit.>. The above proof, using the Roller \n    boundary viewpoint, is considerably simpler.\n    \n    \n    \n    \n     \u00a7.\u00a7 Order-preserving maps\n    \n    Recall from Definitions\u00a0<ref> and\u00a0<ref> that the partial order \u2264 on Roller classes is set containment of the associated sets of half-spaces, while the partial order \u227c on commensurability classes of UBSes  is set containment up to commensurability. \n    The following theorem says that these partial orders are closely related.\n    \n    \n    \n    Let \ud835\udcb0\u212c\ud835\udcae(X) be the collection of commensurability classes of UBSes in X. Then there are (X)\u2013equivariant functions \n    \ud835\udcb0\u212c\ud835\udcae(X) \u2192 X and X \u2192\ud835\udcb0\u212c\ud835\udcae(X), with the following properties.\n    \n      *  The assignment [] \u21a6 Y_ is order-preserving and onto.\n    \n      *  The assignment Y \u21a6 [_Y] is an order-preserving section of .\n    \n      *  restricts to a bijection between the set of  \u227c\u2013maximal classes of UBSes and the set of \u2264\u2013maximal Roller classes, with inverse .\n    \n    \n    The notation  stands for \u201cRoller to unidirectional,\u201d while  stands for \u201cunidirectional to Roller.\u201d This is inspired from the classical notation denoting the collection of maps from a set A to a set B as B^A.\n    \n    \n    To prove <ref>, let  be a UBS. By Lemma\u00a0<ref>, there is a well-defined Roller class Y_ such that the\n     umbra \u1ef8_ is the Roller closure of Y_. By \n    Lemma\u00a0<ref>, Y_ only depends on the commensurability class []. Hence the assignment [] \u21a6 Y_ gives a well-defined function  \n    \ud835\udcb0\u212c\ud835\udcae(X) \u2192 X. This function  is (X)\u2013equivariant by Lemma\u00a0<ref>, and onto by Corollary\u00a0<ref>. \n    \n    Next, we check that  respects the ordering. Lemma\u00a0<ref> implies that if\n     \u227c\ud835\udcb1, then\n    Y_\ud835\udcb1\u2282Y_, hence the\n    Roller classes satisfy\n    Y_\u2264 Y_\ud835\udcb1 by Lemma\u00a0<ref>. Thus  is order-preserving, proving <ref>.\n    \n    \n    \n    To prove <ref>, let Y \u2208 X. By Definition\u00a0<ref>, there is a well-defined commensurability class of UBS representing Y, namely [_Y] = (Y) \u2208\ud835\udcb0\u212c\ud835\udcae(X). Thus  is well-defined. Equivariance also follows from Definition\u00a0<ref>. Next, observe that\n    \n        \u2218(Y) = ([_Y]) = Y__Y = Y,\n    \n     where the last equality follows from Corollary\u00a0<ref>. Thus  is a section of .\n    \n    To check that  is order-preserving, let Y, Z be Roller classes with Y \u2264 Z. By  Lemma\u00a0<ref>, this means Z\u2282Y.  Fix a base vertex x\u2208 X^(0).  By Lemma\u00a0<ref>, there exist \n    combinatorial geodesic rays \u03b3_y, \u03b3_z, originating at x, such that \u03b3_y(\u221e) =  y\u2208 Y and \u03b3_z(\u221e) =  \n    z \u2208 Z.  Now, Remark\u00a0<ref> says that \n    \n        _Y\u223c(x,Y) \u2282(x,Z) \u223c_Z,\n    \n    hence [_Y] \u227c [_Z], as desired.\n    \n    \n    \n    To prove <ref>, let  be a maximal UBS. Choose a point y \u2208 Y_ = ([]). By Corollary\u00a0<ref>, there is a combinatorial geodesic ray \u03b3 limiting to y, such that \u223c(\u03b3). Thus, by Remark\u00a0<ref>, we have\n    \n        [] = [(\u03b3)] = [_Y_] = (Y_) = \u2218([]).\n    \n    Thus the restriction of  to maximal classes in \ud835\udcb0\u212c\ud835\udcae(X) is invertible, and in particular bijective.\n    \n    Equation\u00a0(<ref>) also shows that  sends maximal classes in \ud835\udcb0\u212c\ud835\udcae(X)  to maximal classes in X. Indeed, suppose that [] is maximal but ([]) = Y_ < Z for some Roller class Z. Then we would have [] = (Y_) < (Z), contradicting the maximality of . That  sends maximal classes to maximal classes is checked in the same way.\n    \n    \n    The following example shows that  can fail to be injective.\n    \n    \n     Consider the standard 1/8th-plane staircase, corresponding to squares whose  vertices (x,y) satisfy x\u2265 y\u2265 0. In \n    this case, there are exactly 2 equivalence classes of minimal UBS, corresponding to vertical hyperplanes _V and horizontal \n    hyperplanes _H. These are almost transverse, hence _H_V  \u222a_H. However, [_H] = ([_V  \u222a_H]). Thus  is not injective.\n    \n    \n    \n    On the other hand, the following corollary shows that  is finite-to-one.\n    \n    \n    Let Y \u2208 X be a Roller class. Then there are finitely many other Roller classes Z such that Z \u2264 Y.\n    \n    For each Z \u2264 Y, Theorem\u00a0<ref>.<ref> says that (Z) \u227c(Y). Furthermore,  is injective.\n    By Lemma\u00a0<ref>, there are only finitely many commensurability classes  [] \u227c(Y). Thus there are finitely many Z \u2264 Y. \n    Let ( X)' be the barycentric subdivision of X. Recall from Definition\u00a0<ref> that\n    X is the union of simplices corresponding to commensurability classes\n    of UBSes. However, a simplex of X may have proper faces that do not come from commensurability\n    classes, as illustrated in Example\u00a0<ref> below.  Hence, a vertex of ( X)' might fail to be \n    associated to a UBS commensurability class. \n    \n    Let X be the simplicial realization of the partial order \u227c on \ud835\udcb0\u212c\ud835\udcae(X). Then X naturally embeds into ( X)'. By the above paragraph, this embedding is not \n    in general onto.\n    \n    \n    The following example, constructed by Dan Guralnik and Alessandra Iozzi, illustrates a subtlety in the definition of X which shows the difference between X and X.\n    \n    \n    [Weird faces of simplices of X]\n    Let X be the 3\u2013dimensional \n    CAT(0) cube complex given by the following data:\n    \n      *  The set of hyperplanes has the form (X) = {B_i}_i \u22650\u2294{S_j}_j\u22650\u2294{D_k}_k \u22650.  \n      *  For each \n    A\u2208{B,S,D} and each n\u22651, the hyperplanes A_n\u00b11 are separated by A_n.\n    \n      * B_i crosses S_j if and only if i \u2265 j.\n    \n      * S_j crosses D_k if and only if j \u2265 k.\n    \n      * B_i crosses D_k if and only if i \u2265 k.\n    \n      *  If i < j < k, then S_j separates B_i from D_k.\n    \n    Part of X is shown in Figure\u00a0<ref>.  \n    \n    \n    Then X is a single 2\u2013simplex represented by the UBS \n    {B_i}_i \u22650\u222a{S_j}_j\u22650\u222a{D_k}_k \u22650.  The 0\u2013simplices are represented by the minimal UBSes \n    {B_i}, {S_j}, {D_k}.  The sets {B_i}\u222a{S_j} and {S_j}\u222a{D_k} are UBSes representing 1\u2013simplices, \n    but {B_i}\u222a{D_k} is not a UBS, because it is not inseparable (consider the last bullet).  The complex X is therefore obtained from \n    the barycentric subdivision of the 2\u2013simplex by deleting all of the cells that contain a vertex at the barycenter of {B_i}\u222a{D_k}.\n    \n    \n    \n     We remark that by <cit.>, a face of a simplex of X can only fail to correspond to a commensurability class of UBSes when one of the 0\u2013simplices of that face is\n     \u2113^1\u2013invisible.\n    \n    \n    Having passed from X to X, Theorem\u00a0<ref> has the following corollary.\n    \n    \n    The order-preserving maps  and  of Theorem\u00a0<ref> induce (X)\u2013equivariant simplicial maps X\u2192 X and X \u2192  X, as follows:\n    \n      * X\u2192 X is  surjective.\n    \n      * X \u2192  X  is an injective section of .  \n    \n      *  is a homotopy \n    equivalence with homotopy inverse  .\n    \n     By definition, X is the simplicial realization of the partial order \u2264 on X.  Similarly, X is the simplicial realization of the partial order \n    \u227c on \ud835\udcb0\u212c\ud835\udcae(X).  So, the first two enumerated assertions follow from \n    Theorem\u00a0<ref>.  \n    \n    To prove <ref>, let Y be a Roller class.  Let [\ud835\udcb1]\u2208 ()^-1(Y).  Then Y_\ud835\udcb1=Y__Y.  By \n    Remark\u00a0<ref> and Lemma\u00a0<ref>, we have \ud835\udcb1\u227c_Y.\n    \n    Using the notation Y for the 0\u2013simplex of X corresponding to the Roller class Y, we have just shown that ^-1(Y) is a subcomplex of X spanned by \n    0\u2013simplices adjacent or equal to the 0\u2013simplex [_Y], so ^-1(Y) is topologically a \n    cone.  In particular, ^-1(Y) is contractible.  Quillen's fiber theorem (see e.g.\u00a0<cit.>) implies that  is a homotopy equivalence, such that any section is a homotopy inverse. In particular,  is a homotopy inverse of .\n    \n    The preceding corollary provides an explicit (X)\u2013equivariant homotopy equivalence X\u2192 X.  Furthermore, it is possible, although somewhat tedious, to construct an explicit, \n    (X)\u2013equivariant homotopy equivalence X\u2192  X.  Composing these maps gives\n    a homotopy equivalence X \u2192 X, which is (X)\u2013equivariant on the nose.\n    This is slightly stronger than Proposition\u00a0<ref>, which asserts that X and \n    X are  homotopy equivalent.  We have chosen a different proof of Proposition\u00a0<ref> that is somewhat shorter, relying on the nerve theorem, and only yielding \n    (X)\u2013equivariance up to homotopy.  Our ultimate goal is to relate the homotopy type of X and X to that of the Tits boundary X, and in any case our homotopy equivalence X\u2192 X, provided by Theorem\u00a0<ref>, is only equivariant up to homotopy. \n    \n    \n    \u00a7 THE TITS BOUNDARY\n    \n    \n    In this section, we recall the definition of the Tits boundary X, and establish some \n    connections between points on the Tits boundary and UBSes. The main result of this section, Proposition\u00a0<ref>, is a technical result about combining UBSes that will be crucial in the next section.\n    \n    In this section, we will work extensively with the CAT(0) metric d_X on the cube complex X, hence most half-spaces considered here are CAT(0) half-spaces.  Recall from Section\u00a0<ref> that if \u0125 is a hyperplane with open carrier N(\u0125),\n    the two vertex half-spaces associated to  \u0125 are denoted h, h^*. The two CAT(0) half-spaces associated to \u0125 are the cubical convex hulls (h) and (h^*), respectively. \n    Observe that \n     (h) and (h^*) are exactly the components of X \u2216 N(\u0125). \n    \n    \n    \n    The Tits boundary of X, denoted X, is the set of equivalence classes of CAT(0) geodesic rays  in \n    X, where rays \u03b3,\u03b3' are equivalent if the Hausdorff distance between them is finite.  As a set, X coincides with the visual boundary of X.\n    \n    We endow X with a metric, as follows.\n    Given CAT(0) geodesic rays \u03b1,\u03b2 [0,\u221e)\u2192 X with \u03b1(0)=\u03b2(0)=x, the Alexandrov angle formed by \u03b1,\u03b2 at x is \n    \n        \u2220_x(\u03b1,\u03b2)=cos^-1(lim_t,t'\u21920_X(\u03b1(t), \u03b2(t'))^2-t^2-(t')^2/2tt')\n    \n    In other words, \u2220_x(\u03b1,\u03b2) is computed by applying the law of cosines to a triangle with sides along \u03b1 and \u03b2, and then taking a limit as the triangle shrinks.\n    Let a = [\u03b1] \u2208 X and b = [\u03b2] \u2208 X be the the equivalence classes of \u03b1,\u03b2 respectively.  Following  <cit.>, we define\n    \n        \u2220_T(a,b) = \u2220_T([\u03b1],[\u03b2])\n        :=sup_x\u2208 X\u2220_x(\u03b1_x,\u03b2_x),\n    \n     where \u03b1_x,\u03b2_x are the rays emanating from x and representing \n    a,b respectively.  Then \u2220_T induces a length metric d_T on X in the standard way, making it a CAT(1) \n    space. See <cit.>. We always equip X with the metric _T. By <cit.>, the automorphism group \n    (X) acts on X by isometries.\n    \n    \n    We remark that the original definition of the Alexandrov angle <cit.> is somewhat more involved. In our setting, since X is a CAT(0) space, <cit.> says the limit in (<ref>)  exists and is equal to the Alexandrov angle in the original definition. Compare <cit.>.\n    \n    Definition\u00a0<ref> has the following generalization to the cuboid setting.\n    \n    \n    \n    Fix a group G acting on X by cubical automorphisms, as well as a G\u2013admissible hyperplane rescaling \u03c1, as in Definition\u00a0<ref>.\n    Then the cuboid metric d_X^\u03c1 is still a CAT(0) metric by Lemma\u00a0<ref>. Applying Definition\u00a0<ref> to the CAT(0) space (X, d_X^\u03c1), we obtain the cuboid Tits boundary^\u03c1 X = (X, d_X^\u03c1), with an associated CAT(1) metric d_T^\u03c1. \n    The restricted automorphism group (X^\u03c1) acts on ^\u03c1 X by isometries. Since \u03c1 is a G\u2013admissible rescaling, we have G \u2282(X^\u03c1) by Definition\u00a0<ref>, hence ^\u03c1 X still admits a G\u2013action.\n    \n    \n    All of the results of this section extend to a cuboid metric d_X^\u03c1. See Remarks\u00a0<ref>, <ref>, and\u00a0<ref> for details.\n    \n    Throughout this section, we use Greek letters \u03b1, \u03b2, \u03b3 to denote geodesic rays, and the corresponding Roman letters a,b,c to denote equivalence classes. We write a = [\u03b1] = \u03b1(\u221e) to denote the endpoint of \u03b1 in X.\n    \n    \n    \n    \n    \n     \u00a7.\u00a7 Deep sets\n    \n    Every point of the Tits boundary has an associated deep set of half-spaces.\n    \n    \n    Let a\u2208 X, and\n    let \u03b1 [0,\u221e)\u2192 X be a CAT(0) geodesic representing a. We define the deep set\n        D_a = {h\u2208 :  for all  R>0  there is  t_R>0  s.t. \ud835\udca9_R( \u03b1[t_R,\u221e)) \u2282(h) }.\n    \n    It is immediate to check that the definition does not depend on the representative geodesic \u03b1. If h \u2208 D_a, we say that h is deep for a.\n    \n    Let \u03b1 [0,\u221e)\u2192 X be a CAT(0) geodesic ray with \u03b1(0) \u2208 X^(0), and let \u0125\u2208(\u03b1). Then the following hold:\n    \n      *  Define f(t) = d_X(\u03b1(t), \u0125), and let t_0 = \u03b1^-1(\u0125). Then, for \n    t_0 \u2264 s \u2264 t, we have\n    \n        f(t)-f(s) \u2265 A_0 \u00b7 (t-s),\n    \n    where A_0 > 0,  and A_0 may depend on \u0125 and \u03b1 but not on s,t.\n    \n      *  The hyperplane \u0125 has a deep half-space h \u2208 D_a.\n    \n    Consequently, (\u03b1) is a pruned UBS. \n    \n    By\u00a0<cit.>, f is a convex, 1\u2013Lipschitz function.   \n    By convexity, f has left and right derivatives at every point in (0,\u221e), and these are non-decreasing.  Since f is Lipschitz and convex,  the left and right \n    derivatives coincide almost everywhere, hence f' is well-defined almost everywhere, and\n    non-decreasing at all points where it is defined.\n    \n    Let t_0 = \u03b1^-1(\u0125). Since the carrier N(\u0125) \u2245\u0125\u00d7 (-1/2, 1/2) is an \u2113^2 product and \u03b1(t_0) \u2208\u0125 lies on the midcube of a cube, there \n    is an initial segment of \u03b1 after crossing \u0125 on which f(t) is an increasing linear function. Therefore, f'(t) = f'(t_0) = A_0 > 0 on this segment. (In fact, f'(t_0) = sin\u03b8_0, \n    where \u03b8_0 is the angle between \u03b1 and \u0125 in the \u2113^2 metric on a cube.) Hence f'(t) \u2265 A_0 for all t\u2265 t_0 at which f'(t) is defined. Since f is Lipschitz, it \n    follows that for all t_0\u2264 s\u2264 t, we have \n    \n        f(t)-f(s)=\u222b^t_sf'(z)  dz \u2265 A_0\u00b7(t-s),\n    \n    proving <ref>. \n    \n    Now, <ref> immediately implies <ref>.\n    The conclusion that (\u03b1) is pruned is then immediate from Definition\u00a0<ref>.\n    \n    \n    The following lemma is a strengthening of <cit.>. While <cit.> proves that D_a contains an infinite descending chain, we prove the stronger statement that D_a is non-terminating.\n    \n    \n    For a point a \u2208 X, define \u1ef8_a = \u22c2_h\u2208 D_a h. Then D_a and \u1ef8_a have the following properties:\n    \n      * D_a is consistent, and therefore D_a = ^+_\u1ef8_a. \n    \n      *  Every half-space h_0 \u2208 D_a belongs to a descending chain {h_0, h_1, \u2026}\u2282 D_a. Furthermore, if \u0125_0 \u2208(\u03b1) for a ray \u03b1\u2208 a, then \u0125_n \u2208(\u03b1) for all n.\n    \n      * \u1ef8_a\u2282 X is the closure of a (unique, principal) Roller class Y_a.\n    \n    The consistency of D_a is immediate from the definition. Thus, by Proposition\u00a0<ref>.<ref>, we obtain D_a = ^+_\u1ef8_a. This proves <ref>.\n    \n    To prove <ref>, let h_0 \u2208 D_a.  By <cit.>,  there exists a geodesic \n    ray \u03b1 representing a such that \u03b1(0) \u2208 h_0^*. Since h_0 \u2208 D_a, Definition\u00a0<ref> implies that \n    \u03b1 must deviate arbitrarily far from \u0125_0.\n    Thus, by Lemma\u00a0<ref>, a point \u03b1(t) for large t has the property that |(\u03b1(t), y)| \u2265 1 for \n    every y \u2208 N(\u0125_0). Now,  Proposition\u00a0<ref> says that there is at least one hyperplane \u0125_1 separating \n    \u03b1(t) from N(\u0125_0). Observe that \u0125_1 \u2208(\u03b1) by construction, and orient \u0125_1 by choosing the \n    half-space h_1 \u2282 h_0. Now, Lemma\u00a0<ref> says that h_1 \u2208 D_a. Continuing inductively, we obtain \n    a descending chain {h_0, h_1, \u2026}\u2282 D_a where \u0125_n \u2208(\u03b1) for all n, proving \n    <ref>.\n    \n    \n    By <ref>,  D_a = ^+_\u1ef8_a is consistent, and by  <ref>, D_a contains an infinite descending chain. Thus \u1ef8_a  = \u22c2_h\u2208 D_a h is a convex, nonempty subset of X.  Since D_a is non-terminating by  <ref>, Lemma\u00a0<ref> implies\n     that \u1ef8_D_a is the closure of a principal Roller class Y_a \u2208 X. (Compare Definition\u00a0<ref>.) This proves <ref>.\n     \n    The previous lemmas generalize readily to a cuboid metric d_X^\u03c1. Indeed, Lemma\u00a0<ref> generalizes because because hyperplane carriers are still \u2113^2 products, and because <cit.> works in any CAT(0) space.\n    Similarly, Lemma\u00a0<ref> generalizes because <cit.> works in every CAT(0) space and, because d_X^\u03c1 is quasi-isometric to the \u2113^1\u2013metric on X^(0). \n    \n    \n     \u00a7.\u00a7 CAT(0) rays and their UBSes\n    \n    Given a CAT(0) geodesic ray \u03b3 in X, starting at a point of X^(0), recall that  (\u03b3) denotes the set of \n    hyperplanes h that intersect \u03b3.  It is easy to see (cf.\u00a0<cit.>) that \n    (\u03b3) is a UBS.\n    \n    \n    \n    \n    Throughout this subsection, fix a,b\u2208 X and let \u03b1, \u03b2 be CAT(0) geodesic rays representing a and b, respectively. We can assume that  \u03b1(0)=\u03b2(0) = x \u2208 X^(0).\n    \n    The following lemma says that when (\u03b1)\u222a(\u03b2) has finite symmetric difference with a UBS, it actually is a UBS. \n    Several subsequent lemmas build toward Proposition\u00a0<ref>, which will show that (\u03b1)\u222a(\u03b2) is in fact a UBS associated to a ray \u03b3.\n    \n    \n    Suppose that (\u03b1)\u222a(\u03b2) is commensurate with a UBS. \n    Define \ud835\udc9c=(\u03b1) \u2216(\u03b2) and \u212c=(\u03b2) \u2216(\u03b1) and  \ud835\udc9e=(\u03b1)\u2229(\u03b2).\n    Then\n    \n      *  Each of \ud835\udc9c,\u212c is infinite or empty.\n     \n      *  Every element of \ud835\udc9c crosses every element of \u212c.\n      \n      * (\u03b1) \u222a(\u03b2) = \ud835\udc9c\u2294\u212c\u2294\ud835\udc9e is a UBS.\n    \n    \n    Let = (\u03b1) \u222a(\u03b2). Since  is commensurate with a UBS by hypothesis, it must be infinite and unidirectional. We \n    will check the other properties of a UBS at the end of the proof.\n    \n    \n    By Lemma\u00a0<ref>, every hyperplane \u0125 = \u0125_0 \u2208(\u03b1) corresponds to a deep half-space h_0 \u2208 D_a, and  by Lemma\u00a0<ref>, h_0 is the start of a descending chain {h_0, h_1, \u2026}\u2282 D_a, where h_n \u2208(\u03b1) for every n. Similarly, every hyperplane k_0 \u2208(\u03b2) defines a descending chain {k_0, k_1, \u2026}\u2282 D_b, where k_m \u2208(\u03b2) for every m.\n    \n     If \ud835\udc9c = (\u03b1) \u2216(\u03b2) \u2260\u2205, then any hyperplane \u0125_0 \u2208\ud835\udc9c defines a chain  {\u0125_0, \u0125_1, \u2026}\u2282(\u03b1), as above. Furthermore, \u0125_0 separates every \u0125_n from \u03b2. Thus \u0125_n \u2208\ud835\udc9c, and \ud835\udc9c is infinite. Similarly, \u212c must be empty or infinite, proving  <ref>.\n    \n    Next, suppose for a contradiction that \u0125_0 \u2208\ud835\udc9c is disjoint from k\u0302_0 \u2208\u212c. Then the deep half-spaces h_0 \u2208 D_a and k_0 \u2208 D_b are also disjoint. But then the disjoint chains {\u0125_n}\u2282(\u03b1) and {k\u0302_m }\u2282(\u03b2) contradict the fact that = (\u03b1) \u222a(\u03b2) is unidirectional. This proves  <ref>.\n    \n    \n    Finally, we show that  is a UBS. We have already checked that  is infinite and unidirectional.\n    To check inseparability, suppose that \u2113\u0302 is a hyperplane of X that separates \u0125, k\u0302\u2208. Since we already know that (\u03b1) and (\u03b2) are inseparable, it suffices to check the case that \u0125\u2208\ud835\udc9c and k\u0302\u2208\u212c. But then \u0125 and k\u0302 must cross by <ref>, a contradiction. Similarly, since (\u03b1) and (\u03b2) contain no facing triples, any potential facing triple in  must contain at least one hyperplane  \u0125\u2208\ud835\udc9c and at least one hyperplane  k\u0302\u2208\u212c. But then \u0125 and k\u0302 must cross, hence  cannot contain any facing triples. Thus  is a UBS, proving <ref>.\n    \n    \n    Recall from Definition\u00a0<ref> that given a UBS , we have the umbra \u1ef8_\u2282X\u0303.\n    Following Proposition\u00a0<ref>, let _Y_ = _\u1ef8_X\u0303\u2192 Y_ be the gate projection to \u1ef8_.\n    \n    \n    Suppose \u03b1 and \u03b2 are geodesic rays starting at x\u2208 X^(0), and that = (\u03b1)\u222a(\u03b2) is commensurate with a UBS. Then = (x, _Y_(x)). \n    \n    Since the geodesic rays start at the vertex x, Lemma\u00a0<ref> says that  all the hyperplanes they cross are deep, i.e.  (x,Y_a) =(\u03b1) and (x,Y_b)= (\u03b2), hence = (x,Y_a)\u222a(x,Y_b). In addition, Lemma\u00a0<ref> says that  is a UBS.\n    \n    \n    Now, Lemma <ref> gives  \u1ef8_= \u1ef8_a  \u2229\u1ef8_b, and in particular _\u1ef8_^+ = D_a\u222a D_b. By Lemma <ref> and\n      Remark <ref>, we have \n     (x, \u1ef8_)=(x, Y_)= (x, _Y_(x)). \n    We must show that this UBS equals  = (x,Y_a)\u222a(x,Y_b).\n     To this end we have by Proposition <ref>:\n     \n        __Y_a(x)^+    =    [_x^+\u2216 D_a^*]\u222a D_a,\n        __Y_b(x)^+    =    [_x^+\u2216 D_b^*]\u222a D_b,\n        __Y_(x)^+    =    [_x^+\u2216 (D_a^*\u222a D_b^*)]\u222a (D_a\u222a D_b).\n    \n    Then a standard Venn diagram argument shows that \n    \n        _x^+\u2216__Y_(x)^+    =    _x^+\u2216( [_x^+\u2216 (D_a^*\u222a D_b^*)]\u222a (D_a\u222a D_b)\n        )\n        \n           =   ( _x^+\u2229 (D_a^*\u222a D_b^*) ) \u2216(D_a\u222a D_b).\n    \n    The set of hyperplanes on the left-hand side is (x, _Y_(x)), while the set of hyperplanes on the right-hand side is (x,Y_a)\u222a(x,Y_b).\n    \n     Suppose that (\u03b1)\u222a(\u03b2) is commensurate with a UBS.  Then d_T(a,b)\u2264\u03c0/2.\n    \n    We will show that \u03c0/2 is an upper bound on the Alexandrov angle between rays representing a,b based at an arbitrary point, and then \n    use (<ref>).  The bound will be produced by finding a convex subspace, \n    isometric to a Euclidean cube, which has one corner at the basepoint and which contains nontrivial initial segments of the \n    rays.\n    \n    Angle bound at a vertex:  Let y\u2208 X be an arbitrary vertex.  Let \u03b1',\u03b2' be CAT(0) geodesic rays \n    emanating from y and representing a,b respectively (so, \u03b1 is asymptotic to \u03b1' and \u03b2 is asymptotic to \n    \u03b2').  Let =(\u03b1)\u222a(\u03b2), and let '=(\u03b1')\u222a\ud835\udcb2(\u03b2').  Then  is commensurate to ', and hence commensurate to a UBS.  \n    Lemma\u00a0<ref> then implies that ' is actually a UBS.\n    \n    Now let X_y\u2282 X be the cubical convex hull of \u03b1'\u222a\u03b2'.  Then the set of hyperplanes crossing X_y is \n    exactly '.  Moreover, by Lemma\u00a0<ref>, there exists a point y\u0305 in the Roller boundary \n    such that ' is precisely the set of hyperplanes separating y from y\u0305.\n    \n    Let \u25c3 be the partial order on ' defined by declaring that \u0125\u25c3\u0125' if the hyperplane \u0125 \n    separates y from \u0125'.  Since every hyperplane of X_y separates y from y\u0305, any hyperplanes \u0125,\u0125'\u2208' are either \u25c3\u2013comparable, or they cross.\n    \n    Note that if \u0125\u2208' is dual to a 1\u2013cube of X_y incident to y, then \u0125 is \u25c3\u2013minimal.  \n    Hence the set '_min of \u25c3\u2013minimal hyperplanes is nonempty. Since \u25c3\u2013incomparable hyperplanes cross, '_min is a \n    set of pairwise-crossing hyperplanes of X.  Since X_y is convex and every hyperplane in ' crosses X_y, we \n    have a cube C \u2282 X_y such that the hyperplanes crossing C are exactly those in '_min.\n    \n    Note y\u2208 C.  Also note that any cube C' of X_y with y\u2208 C' satisfies C'\u2282 C.  Thus any nontrivial \n    CAT(0) geodesic segment in X_y emanating from y has a nontrivial initial subsegment  lying in C.  In \n    particular, \u03b1' and \u03b2' have nontrivial initial segments lying in C.  Since the ambient CAT(0) metric restricts \n    to the Euclidean metric on the cube C, the Alexandrov angle made by \u03b1',\u03b2' at y satisfies\n    \n        \u2220_y(\u03b1',\u03b2')=lim_t,t'\u21920\u2220_y(\u03b1'(t),\u03b2'(t))\u2264\u03c0/2,\n    \n    because any two segments in a cube emanating from a common corner make an angle at most \u03c0/2.\n    \n    Angle bound at arbitrary points:  We now bound the angle made by rays representing a,b and emanating from \n    non-vertex points, by an identical argument taking place in an appropriate cubical subdivision of X.  Let y\u2208 X be an \n    arbitrary point.  Perform a cubical subdivision of X to obtain a CAT(0) cuboid complex X' in which y is a vertex, so that\n    the CAT(0) cuboid metric coincides with the original metric on X.  \n    \n    More precisely, for each hyperplane \u0125, identify its carrier with \u0125\u00d7[-1/2,1/2].  For each \u0125 \n    such that y\u2208\u0125\u00d7(-1/2,1/2), let \u03f5_\u0125 be such that y\u2208\u0125\u00d7{\u03f5_\u0125}.  The (geodesically convex) subspace \u0125\u00d7{\u03f5_\u0125} has a natural cubical structure with an n\u2013cube \n    for each (n+1)\u2013cube intersecting \u0125.  We subdivide X so that the cubes of \u0125\u00d7{\u03f5_\u0125} are \n    subdivided cubes whose edges are segments in X whose lengths are inherited from X.  The result is a cuboid complex X' such that \n    the identity map X\u2192 X' is an isometry in the CAT(0) metric, preserves the median, and sends y to a vertex.  Since the \n    hyperplanes of X' are parallel copies of hyperplanes of X, the set of hyperplanes of X' that cross \u03b1\u222a\u03b2 \n    continues to be a UBS, so Lemma\u00a0<ref> still applies. (Compare Remark\u00a0<ref>.) We can thus argue exactly as before to see that \n    \u2220_y(\u03b1',\u03b2')\u2264\u03c0/2.\n    \n    Conclusion:  We have shown that, for all y\u2208 X, letting \u03b1',\u03b2' be the rays based at y and \n    representing a,b respectively, we have \u2220_y(\u03b1',\u03b2')\u2264\u03c0/2.  Taking the supremum over all y\u2208 X, as in (<ref>), we see \n    that the angular metric satisfies \u2220_T(a,b)\u2264\u03c0/2.  Now, \n    Definition\u00a0<ref> gives _T(a,b)\u2264\u03c0/2, as required.\n    \n    Lemmas\u00a0<ref> and\u00a0<ref> extend immediately to the cuboid setting, because they use only hyperplane combinatorics and prior lemmas. The above proof of \n    Lemma\u00a0<ref> also extends to cuboids, because it uses prior lemmas combined with CAT(0) geometry. Indeed, the above argument uses cuboids in combination \n    with Remark\u00a0<ref> to prove the desired angle bound for arbitrary basepoints in X. The key conceptual reason why the argument works for cuboids is that every pair of geodesic segments \n    in a cuboid,  emanating from a corner, meets at angle at most \u03c0/2. \n    \n    The reliance on cuboids to prove the desired result for cubes can be avoided, as follows. First, prove the angle bound at a vertex of X, exactly as above. Then, let X' be the cubical subdivision \n    of X, and observe that the CAT(0) geodesics in X' are exactly the same as those in X. (See e.g. <cit.>.) Thus the same argument proves the angle bound at \n    every vertex of X'. \n    \n    Continuing to subdivide by induction, we obtain a set V_\u221e\u2282 X of points that are vertices of the subdivision at some (and hence all subsequent) stages.  Note that V_\u221e intersects \n    each of the original cubes of X in a dense subset, and in particular contains all the original vertices.  The desired angle bound holds when the rays in question are based at any point in \n    V_\u221e.  Now, fixing a,b\u2208 X, we can consider the function x\u21a6\u2220_x(\u03b1,\u03b2), where \u03b1,\u03b2 are the rays representing a,b and starting at x.  This function need \n    not be continuous on X (it is upper semicontinuous <cit.>), but it can be shown to be continuous on each open cube of X (of any dimension).  Since it is \n    bounded above by \u03c0/2 on a dense subset of each such cube, we conclude that sup_x\u2220_x(\u03b1,\u03b2)=\u2220_T(a,b)\u2264\u03c0/2.\n    \n    Finally, observe that the statement and proof of Lemma\u00a0<ref> fail completely if we modify the angles of the cubes, precisely because two segments emanating from a vertex of a parallelogram might meet at a large angle.\n    \n    \n    \n    Our main goal in this section is to show that if \u03b1,\u03b2 are geodesic rays with common initial point, and (\u03b1)\u222a(\u03b2) is a UBS, then any \n    geodesic ray \u03b3 representing an interior point on the Tits geodesic from \u03b1(\u221e) to \u03b2(\u221e) must cross all the hyperplanes in (\u03b1)\u222a(\u03b2).  Before proving this in Proposition\u00a0<ref>, we will need a few auxiliary results,  starting with a corollary of Lemma\u00a0<ref>.\n    \n    \n    \n    \n    Suppose that = (\u03b1)\u222a(\u03b2) is a UBS. Let Y be the cubical convex hull of \u03b1\u222a\u03b2. Let \u03b3 [0,\u221e)\u2192 X be a CAT(0) geodesic ray with \u03b3(0)=\u03b1(0)=\u03b2(0).  Suppose that \u03b3 is contained in Y and crosses every dominant hyperplane in .  Then \u03b3 crosses every \n    hyperplane in .\n    \n    This follows immediately from \n    Lemma\u00a0<ref>.<ref> applied to = (Y).\n    \n    \n    Next, we study angles at which rays cross dominant hyperplanes. \n    \n    \n     Let \u03b1 be a CAT(0) geodesic ray with \u03b1(0)\u2208 \n    X^(0).  Then there exists \u03ba>0 such that the following holds.  Let \ud835\udc9f_d,\u22ef,\ud835\udc9f_k\u2282(\u03b1) be the dominant minimal UBSes provided by applying Lemma\u00a0<ref> to \ud835\udcb2(\u03b1), and let i\u2208{d,\u2026,k}.  Then \ud835\udc9f_i contains a chain {\u00fb_n}_n\u22650 of hyperplanes such \n    that \ud835\udc9f_i is commensurate with the inseparable closure of {\u00fb_n}_n\u2265 0, and \n    \n        \u2220_y_n(\u03b1,\u00fb_n)\u2265\u03ba\n    \n    for all n\u2265 0, where y_n is the point \u03b1\u2229\u00fb_n.\n    \n    Recall from Lemma\u00a0<ref> that (\u03b1) is a pruned UBS. Thus Lemma\u00a0<ref> applies to (\u03b1).\n    \n    Now, fix i\u2208{d,\u2026,k}.  \n    Lemma\u00a0<ref> says that \ud835\udc9f_i={\u0125_m}_m\u22650, where\n    each \u0125_m is dominant. This means each \u0125_m crosses all but finitely many hyperplanes in \ud835\udcb2(\u03b1) \u2216\ud835\udc9f_i.  \n    \n    The divergence f(t) of \u03b1 from \u0125_0:  Define f(t) = _X(\u03b1(t),\u0125_0), and \n    let T_0 = \u03b1^-1(\u0125_0). By Lemma\u00a0<ref>.<ref>, there is a constant A_0 > 0 (depending on \u0125_0 but not s,t) such that\n    \n        f(t)-f(s) \u2265 A_0\u00b7(t-s)\n    \n    for all T_0\u2264 s\u2264 t.\n    \n    Hyperplane count:  We wish to produce a constant C such that any length\u2013C subpath of \u03b1 \n    crosses an element of \ud835\udc9f_i.\n    \n    Let s_0\u2265 T_0 be sufficiently large that \u03b1([0,s_0)) crosses all of the finitely many hyperplanes in \ud835\udcb2(\u03b1) \u2216\ud835\udc9f_i not crossing \u0125_0.  Suppose that s_0\u2264 s\u2264 t.  Then all hyperplanes crossing \u03b1([s,t]) either cross \u0125_0 or belong to \ud835\udc9f_i.  \n    Assume that \u03b1([s,t]) does not cross any element of \ud835\udc9f_i.  \n    \n    Let H_st = (\u03b1([s,t])) denote the cubical convex hull of \u03b1([s,t]).  There may be hyperplanes crossing H_st that do not cross \u03b1([s,t]), because \u03b1(s),\u03b1(t) need \n    not be vertices. However, we can bound the number of such hyperplanes as follows.  Let \ud835\udcb2_bad\u2282\ud835\udcb2(H_st)\u2282\ud835\udcb2(\u03b1) be the set of hyperplanes \n    that cross H_st but do not cross \n    \u03b1([s,t]).  Note that \ud835\udcb2(H_st) inherits a partial order from \ud835\udcb2(\u03b1), by restricting the partial order \u25c3 from the proof of \n    Lemma\u00a0<ref>.  \n    Suppose that \u0125\u2208\ud835\udcb2(H_st) is neither \u25c3\u2013maximal nor \u25c3\u2013minimal in \ud835\udcb2(H_st).  Then there exist \u00fb,v\u0302\u2208\ud835\udcb2(H_st) such that \n    \u0125 separates \u00fb from v\u0302.  By the definition of the convex hull, \u0125 cannot separate \u00fb or v\u0302 from \u03b1([s,t]), so \u0125 must cross \u03b1([s,t]).  Thus \n    every hyperplane in \ud835\udcb2_bad is \u25c3\u2013minimal or \u25c3\u2013maximal.  Since incomparable hyperplanes have to cross, we conclude that |\ud835\udcb2_bad|\u2264 \n    2(X), hence there are at most D=2 X hyperplanes that cross H_st but not \u03b1([s,t]).\n    The rest of the \n    hyperplanes crossing H_st must cross \u0125_0, since they cross \u03b1([s,t]), and we have chosen s \u2265 s_0 and assumed \ud835\udcb2(\u03b1([s,t]))\u2229\ud835\udc9f_i=\u2205.\n    \n     \n     \n    Consider the CAT(0) closest-point projections p  X\u2192\u0125_0 and q  X\u2192 H_st.\n    By\u00a0<cit.>,  the d_X\u2013convex hull of p(H_st)\u222a \n    q(\u0125_0) is isometric to p(H_st)\u00d7 [0,_X(\u0125_0,H_st)], where p(H_st)  is identified with p(H_st) \u00d7{ 0 }, and q(\u0125_0) is identified with p(H_st) \u00d7{_X(\u0125_0,H_st)}.\n    By\u00a0<cit.>, the hyperplanes that cross q(\u0125_0) are precisely those that \n    cross \u0125_0 and H_st.  So, there are at most D hyperplanes crossing H_st but not q(\u0125_0).  By \n    Lemma\u00a0<ref>, the points \u03b1(s),\u03b1(t) are thus both within distance \u03bb_0D+\u03bb_1 of \n    points in q(\u0125_0), where \u03bb_0D+\u03bb_1 depends only on D. Thus\n    \n        _X(\u03b1(t),\u0125_0)  \u2264 \u03bb_0D+\u03bb_1+_X(H_st,\u0125_0)  \u2264 \u03bb_0 D+\u03bb_1+_X(\u03b1(s),\u0125_0).\n      In other words, since  s,t\u2265 s_0 \u2265 T_0, we have shown\n    \n        A_0(t-s) \u2264 f(t)-f(s)\u2264\u03bb_0D+\u03bb_1.\n    \n    Thus, for any 0\u2264 s\u2264 t (without assuming s \u2265 s_0), we get \n    \n        t-s\u2264\u03bb_0D+\u03bb_1/A_0+ s_0.\n    \n    \n    \n    Letting C=  \u03bb_0 D+\u03bb_1/A_0 + s_0+1, we have shown that any subsegment of \u03b1 of \n    length at least C crosses an element of \ud835\udc9f_i.  \n    \n    Hence, for any 0\u2264 s\u2264 t, we have that \u03b1([s,t]) \n    crosses at least \u230a (t-s)/C\u230b elements of \ud835\udc9f_i.  \n    \n    Big angle hyperplanes:  Let \u03c3 be a subsegment of \u03b1.  Consider the hyperplanes in \ud835\udc9f_i \n    crossing \u03c3.  Any two such hyperplanes are either disjoint or not, and any collection of pairwise crossing \n    hyperplanes has size at most X.  So, if there are more than (3, X+1) hyperplanes in \ud835\udc9f_i crossing \u03c3, then there are \n    three disjoint such hyperplanes, where ( \u00b7, \u00b7) denotes the Ramsey number.  Hence, if \u03c3 has length |\u03c3|=C\u00b7(3, X+1)+1, \n    then \u03c3 crosses three disjoint hyperplanes \u00fb,v\u0302,\u0175\u2208\ud835\udc9f_i.  Without loss of generality, \n    say v\u0302 separates \u00fb,\u0175.  Hence \u03b1\u2229 N(v\u0302) is a subpath of \u03b1 lying between the points \n    \u03b1\u2229\u00fb and \u03b1\u2229\u0175\u2208\u03c3, so \n    \n        |\u03b1\u2229 N(v\u0302)|\u2264 C\u00b7(3, X+1)+1=L.\n    \n    Note that L is independent of the hyperplane v\u0302. Indeed, L depends on A_0,\u03bb_0,\u03bb_1,s_0, and hence is determined by X, the hyperplane \u0125_0 and the geodesic \u03b1.  \n    Now, using the fact that N(v\u0302) is isometric to a product\n     of the form v\u0302\u00d7(-1/2,1/2), we see that\n    \n        \u2220_\u03b1\u2229v\u0302(v\u0302,\u03b1)\u2265sin^-1(1L),\n    \n    which we denote by \u03ba.  \n    \n    Since we can do the above procedure for infinitely many disjoint length\u2013L segments in \u03b1, we find infinitely many \n    hyperplanes in \ud835\udc9f_i making an angle at least \u03ba with \u03b1.  Since any infinite subset of a UBS contains \n    a chain, we thus have a chain {\u00fb_n}_n\u2265 0\u2282\ud835\udc9f_i with this property.  Finally, the inseparable \n    closure of {\u00fb_n}_n\u2265 0 is a UBS contained in \ud835\udc9f_i, and hence commensurate with \ud835\udc9f_i since \n    \ud835\udc9f_i is minimal.  This verifies the statement for the given \ud835\udc9f_i, and we conclude by replacing \u03ba \n    with the minimal \u03ba for the various i\u2208{d,\u2026,k}.\n    \n    Extending Lemma\u00a0<ref> to a cuboid metric d_X^\u03c1 requires a bit of care. The above proof relies on \n     some results of of Huang\u00a0<cit.>, which are written in the context of a cube complex with finitely many isometry types of cells. This hypothesis may fail in (X, d_X^\u03c1). \n    Fortunately, we only need to use Huang's results in a finite cuboid complex, namely the convex hull of H_st\u222a p(H_st), where H_st is itself finite and p is a certain CAT(0) \n    projection. Thus Huang's results\u00a0<cit.> apply to the subcomplex we need. \n     \n    Some constants in the proof would need to be adjusted for the cuboid metric.  The constants \u03bb_0, \u03bb_1 of Lemma\u00a0<ref>, used in the definition of C, would have to be replaced \n    by the constants \u03bb_0^\u03c1, \u03bb_1^\u03c1 of Lemma\u00a0<ref>. \n    In the constant sin^-1(1/L), the numerator 1 is the thickness of a hyperplane carrier, and would have to be replaced by the minimal thickness of a hyperplane carrier in  the metric \n    d_X^\u03c1.\n    \n    \n    Now we can prove the main result of this section.\n    \n    \n    \n    Let \u03b1, \u03b2 be CAT(0) geodesic rays with \u03b1(0) = \u03b2(0) \u2208 X^(0).\n    Suppose that (\u03b1)\u222a(\u03b2) is commensurate \n    with a UBS.  Then a=\u03b1(\u221e) and b=\u03b2(\u221e) are joined by a unique geodesic \n    g in X. Furthermore, any interior point c of g is represented by a CAT(0) geodesic ray \u03b3 \n    such that (\u03b3)  = (\u03b1)\u222a(\u03b2).\n    \n     By Lemma\u00a0<ref>, we have \n    _T(a,b)\u2264\u03c0/2, so the CAT(1) space X contains a \n    unique geodesic g from a to b.  This proves the first assertion of the lemma. \n    \n    Let c \u2208 X be an interior point of g.  Let \u03b3 be the unique CAT(0) geodesic ray starting at \u03b1(0) and \n    representing c.  We need to show that (\u03b3)=\ud835\udcb2(\u03b1)\u222a(\u03b2). \n    \n    Working in the convex hull of \u03b1\u222a\u03b2:  Let Y be the \n    cubical convex hull of \u03b1\u222a\u03b2. We claim that g lies in Y\u2282 X.  Indeed, \n    applying Lemma\u00a0<ref> inside of Y shows that a,b can be joined by a unique geodesic g' in \n    Y.  Since the Tits distance in Y from a to b depends only on {_Y(\u03b1(t),\u03b2(t)):t\u2265 0} and \n    _Y(\u03b1(t),\u03b2(t))=_X(\u03b1(t),\u03b2(t)) by convexity of Y, we have that g' is a geodesic of X.   Since \n    g' has length less than \u03c0, it is the unique geodesic in X from a to b, i.e. g=g' and g lies in Y. \n    \n    For the rest of the proof, we work entirely in Y.\n    \n    For any y\u2208 Y, we can choose rays \u03b1_y,\u03b2_y with \u03b1_y(0)=\u03b2_y(0)=y and \u03b1_y(\u221e)=a,\u03b2_y(\u221e)=b, and note that the cubical convex hull Y_y of \n    \u03b1_y\u222a\u03b2_y is contained in Y, and crosses all but finitely many of the hyperplanes crossing Y.  By convexity, Y_y= Y.  So, when convenient, we can move the basepoint.\n    \n    What we will actually verify:  The plan is as follows.  Let \u0125 be a hyperplane of Y that is dominant in the UBS = (Y) = (\u03b1) \u222a(\u03b2).  We will show that c\u2209\u0125.  Since the \n    shallow side of any hyperplane in Y is contained in a neighborhood of that hyperplane, it follows that \u03b3 must cross \u0125.  Once we show that \u03b3 crosses every dominant hyperplane, \n    Corollary\u00a0<ref> will then imply that \u03b3 crosses every hyperplane, i.e. (\u03b3)=(\u03b1)\u222a(\u03b2), as required.  So, it remains to argue that \n    c\u2209\u0125 when \u0125 is a dominant hyperplane.\n    \n    Initial segments of \u03b1 and \u03b2 inside a cube:  For each r\u2265 0, let y_r=\u03b1(r).  Let \u03b1_y_r and \u03b2_y_r be geodesics asymptotic to \u03b1 and \u03b2, defined as above.  Note that Y_y_r\u2282 Y \n    contains a ray based at y_r and representing each element of Y.  As in the proof of Lemma\u00a0<ref>, there is a single cube C_y_r\u2282 Y_y_r, with y_r\u2208 \n    C_y_r, such that any ray in Y_y_r emanating from y_r has a nontrivial initial segment in C_y_r.  \n    \n    Let \u03b1'_y_r,\u03b2'_y_r,\u03b3'_y_r be the maximal (nontrivial) segments of \u03b1_y_r,\u03b2_y_r,\u03b3_y_r that lie in C_y_r.  Then the Alexandrov angle between any two of the rays \n    \u03b1_y_r,\u03b2_y_r,\u03b3_y_r at y_r is just the Euclidean angle in C_y_r between the corresponding segments.\n    \n    By\u00a0<cit.>, \u2220_y_r(\u03b1_y_r,\u03b2_y_r) converges to \u2220_T(a,b) = _T(a,b), where the equality follows from\n    Lemma\u00a0<ref> because the distance is less than \u03c0.\n    \n    Angle computation:  Let \u0125 be a dominant hyperplane in .  By Lemma\u00a0<ref>,  we \n    can assume that \u0125\u2208\ud835\udc9f, where \ud835\udc9f = \ud835\udc9f_j is a minimal UBS consisting of dominant hyperplanes. Since \ud835\udc9f\u2282(\u03b1) \u222a(\u03b2) is a minimal UBS, we must have either \ud835\udc9f\u227c(\u03b1) or \ud835\udc9f\u227c(\u03b2). We assume without loss of generality that \ud835\udc9f\u227c(\u03b1).\n    \n    \n    Note that every hyperplane in \ud835\udc9f is dominant in (\u03b1), because any hyperplane crossing all but \n    finitely many hyperplanes in \u2216\ud835\udc9f crosses all but finitely many hyperplanes in \ud835\udcb2(\u03b1) \u2216\ud835\udc9f.  We now apply Lemma\u00a0<ref> to (\u03b1) and \ud835\udc9f to produce \n    a constant \u03ba and a chain  {\u0125_n }\u2282\ud835\udc9f whose inseparable closure is \ud835\udc9f and whose (necessarily dominant) \n    hyperplanes all cross \u03b1 at an angle at least \u03ba:\n    \n        \u2220_y_n(\u03b1_y_n,\u0125_n)\u2265\u03ba,\n    \n    where y_n=\u0125_n\u2229\u03b1 and \n    \u03b1_y_n is the sub-ray of \u03b1 emanating from y_n.  \n    Since all but finitely many of the \u0125_n lie on the deep side of \u0125, it suffices to show that \u03b3 crosses \u0125_n for sufficiently large n. As explained above, it suffices to show that c \u2209\u0125_n for sufficiently large n.\n    \n    \n    Let \u03b2_y_n be the ray emanating from y_n and \n    asymptotic to \u03b2.  \n    Working in the cube C_y_n constructed above, we have that the segment \u03b1_y_n' makes a Euclidean angle at least \u03ba with the midcube M_n = C_y_n\u2229\u0125_n.  Meanwhile, \n    the segment \u03b2_y_n' makes some angle \u03b8\u2265 0 with M_n.  \n    See Figure\u00a0<ref>.\n    \n    Let s\u2208(0,1) be such that _T(a,c)=s\u00b7_T(a,b) and _T(c,b)=(1-s)\u00b7_T(a,b).  Such an s exists since c is an interior point of the Tits geodesic g from a to b.\n    \n    \n    \n    \n    Let \u03b7_n \u2282 C_y_n be the maximal segment that emanates from y_n and makes an angle s\u00b7\u2220_y_n(\u03b1_y_n',\u03b2_y_n') with \u03b1_y_n' and and \n    angle (1-s)\u00b7\u2220_y_n(\u03b1_y_n',\u03b2_y_n') with \u03b2_y_n'.  Then there exists \u03ba_1= (1-s) \u03ba >0 such that \u2220_y_n(\u03b7_n,\n    M_n) \u2265\u03ba_1. Crucially, \u03ba_1 is  independent of n.  On the other hand, as \n    n \u2192\u221e, we have convergent sequences\n    \n        \u2220_y_n (\u03b1_y_n',\u03b2_y_n')    \u2192_T(a,b), \n        \u2220_y_n (\u03b1_y_n',\u03b3_y_n')    \u2192_T(a,c) = s \u00b7_T(a,b), \n        \u2220_y_n (\u03b2_y_n',\u03b3_y_n')    \u2192_T(b,c) = (1-s) \u00b7_T(a,b),\n    \n    Thus,  for all sufficiently large n, \n    \n        \u2220_y_n(\u03b7_n,\u03b3_y_n')<\u03ba_1/2,\n    \n    so by the triangle inequality for Alexandrov angles, \u2220_y_n(\u03b3'_n,M_n) > \u03ba_1/2 >0.  Hence the ray \u03b3_y_n is not contained in \u0125_n and, since its initial \n    point is in \u0125_n, we thus have c\u2209\u0125_n.  This completes the proof.\n    \n    \n    \n    \n    We observe that the proof of Proposition\u00a0<ref> extends to the cuboid setting with minimal effort. The proof of that lemma combines prior results and the local Euclidean geometry of a \n    cube; all of the local arguments work equally well in a rescaled cuboid. \n    \n    \n    \n    \u00a7 CONNECTIONS BETWEEN TITS AND ROLLER BOUNDARIES\n    \n    \n    \n    In this section, we establish some important connections between X and X. Every Roller class v \u2208 X is assigned a \n    canonical CAT(1)\u2013convex  Tits boundary realizationQ(v) \u2282 X.\n    We define a pair of maps \u03c8 X \u2192 X and \u03c6 X \u2192 X  that will play a major role in the proof of our main theorem. See Proposition\u00a0<ref> for the properties of Q(v) and Proposition\u00a0<ref> for  the relationship between \u03c6 and \u03c8. \n    \n    Toward the end of this section, we focus on \u2113^2\u2013visible Roller classes, namely all v \u2208 X\n     such that \u03c8\u2218\u03c6(v) = v. \n    In Section\u00a0<ref>, we will use the visible Roller classes to construct a closed covering of X that is compatible with a covering of a large part of X, denoted X.\n    \n    All of the results of this section extend with minimal effort to a cuboid metric d_X^\u03c1 obtained via a G\u2013admissible hyperplane rescaling (recall Definitions\u00a0<ref> and\u00a0<ref>). This extension is described in Section\u00a0<ref>.\n    \n    \n    \n    Given a \u2208 X, define \u03c8(a) = Y_a \u2208 X to be the Roller class Y_a constructed in Lemma\u00a0<ref>. That is, \u03c8(a) is the principal Roller class of the  intersection of half-spaces in the deep set  D_a. \n    \n    \n    \n    Our definition of \u03c8 generalizes Guralnik's boundary decomposition map <cit.>, because X agrees as a set with the visual boundary _ X.\n    \n    \n    \n    \n    \n    \n    Let a = [\u03b1] \u2208 X. Let (\u03b1) be the UBS consisting of hyperplanes crossing the geodesic \u03b1. Then \u03c8(a) = Y_a = Y_(\u03b1).\n    \n    By Lemma\u00a0<ref> we have that D_a= _\u1ef8_a^+ and Y_a \u2208 X. Fix x\u2208 X^(0). By definition,  D_a\u2216_x^+ = (x,Y_a) =  (x,[y]) for any y \u2208 Y_a. Finally by  Lemma  <ref>(x,[y])\u223c(x,y). \n    \n    By Lemma\u00a0<ref>, there is a combinatorial geodesic \u03b1'  [0,\u221e) \u2192 X with \u03b1'(0) = x and \u03b1'(\u221e) =  y.  By Remark\u00a0<ref>, we have (\u03b1')= (x,y). \n    \n    Now, Lemma\u00a0<ref> implies that \u03b1 and \u03b1' can be chosen to lie at finite Hausdorff distance. Thus \u03b1 and \u03b1' cross the same hyperplanes, \n    except possibly for \n    finitely many. In symbols,\n     (\u03b1') \u223c(\u03b1). By Lemma\u00a0<ref>, we conclude that Y_a = Y_(\u03b1).\n    \n    \n     \u00a7.\u00a7 Tits boundary realizations\n    \n    Defining a map \u03c6 X \u2192 X that serves as a partial inverse to \u03c8 takes considerably more effort. As a first step, we will define a Tits boundary realizationQ(v) associated to a Roller class v.\n    \n    A family \u2131 of subsets of X is called filtering if for every E,F\u2208\u2131 there is a D\u2208\u2131 such that D\u2282 E\u2229 F. For example, for y\u2208 X,  the family \n    \n        \u2131 :={(h_1)\u2229\u22ef\u2229(h_n)   :   h_1, \u2026, h_n\u2208_y^+, n\u2208}\n     \n    is a filtering family of closed convex subspaces. \n    \n    The following theorem combines results of Caprace\u2013Lytchak <cit.> and Balser\u2013Lytchak <cit.>.\n    \n    \n    Let {X_i}_i\u2208 I be a filtering family of closed convex subsets of a finite-dimensional CAT(0) space X. If the \n    intersection \u22c2_i\u2208 I X_i is empty, then the intersection \u22c2_i\u2208 I X_i of their \n    boundaries is nonempty, and furthermore \u22c2_i\u2208 I X_i has intrinsic radius at most \u03c0/2 and therefore a canonical circumcenter.  \n    \n    \n    Next, we present two definitions that will turn out to be equivalent (compare Lemma\u00a0<ref>). The first of these definitions appears in\u00a0<cit.>.\n    \n    \n    Let y\u2208 X. Define Q(y)=\u22c2_h\u2208_y^+(h). Note that Q(y) \u2260\u2205 by Theorem <ref>.\n    We call Q(y) the Tits boundary realization of y.\n    \n    Let x\u2208 X^(0) and let y\u2208 X.    Recall that (x,y)\u2282X\u0303 is the vertex interval between x and y, so \n    that (x,y)\u2229 X is a vertex\u2013convex subset of X^(0).  Generalizing Definition\u00a0<ref>, let (x,y) be the union of all of the cubes in X \n    whose 0\u2013skeleta lie in (x,y)\u2229 X.\n    Then (x,y) is a convex subcomplex of X, \n    and hence has a well-defined Tits boundary naturally embedded in X.  We define  Q'(y)=(x,y).\n    \n    \n    In fact, the two definitions are equivalent: \n    \n    \n    Let y\u2208 X and let x,x'\u2208 X^(0).  Then:\n    \n      * (x,y)=(x',y), \n    hence Q'(y) is well-defined.\n     \n      * Q(y)=Q'(y).\n     \n      *  If y\u223c y', then Q'(y)=Q'(y') and Q(y)=Q(y').\n    \n     To prove conclusion <ref>, observe that (x,y) and (x',y) lie at \n    Hausdorff distance bounded by _1(x,x'). Hence (x,y) and (x',y) have the same \n    Tits boundary.\n    \n    \n    Next, we consider conclusion\u00a0<ref>.  For any given vertex half-space h\u2208_y^+, \n    let (h) be the \n    associated CAT(0) half-space containing y.  By <ref>, we can assume that x\u2208(h).  \n    Hence (x,y)\u2282(h), so Q'(y)=(x,y)\u2282(h). Therefore Q'(y)\u2282 Q(y).\n    \n    For the reverse inclusion, suppose q\u2209 Q'(y).  Then there is a CAT(0) half-space (h) such that \ud835\udca5(x,y) \u2282(h) and q \u2209(h). (To find such a half-space, let \u03b3 be any CAT(0) geodesic ray \n    representing q. Since \u03b3 leaves every finite neighborhood of (x,y), it must cross a hyperplane \u0125 \n    disjoint from (x,y).) The associated vertex half-space h satisfies h\u2208_y^+ but q \u2209(h). By Definition\u00a0<ref>, it follows that q \u2209 Q(y).  Hence Q(y)\u2282 Q'(y).\n    \n    Finally, consider conclusion\u00a0<ref>. If y \u223c y', the Hausdorff distance from \n    (x,y) to (x,y') is bounded by _1(y,y') < \u221e. Using <ref>, we obtain\n    \n        Q(y) = Q'(y) = (x,y) = (x,y') = Q'(y') = Q(y').\n    \n    \n    \n    Following Theorem\u00a0<ref> and Lemma\u00a0<ref>, we can make the following definition.\n    \n    \n    Let v \u2208 X be a Roller class. Define Q(v) = Q(y) for any representative element y \u2208 v.  \n    The reader can think of Q(y) according to either Definition\u00a0<ref> or Definition\u00a0<ref>.  We call\n     Q(v) the Tits boundary realization of the Roller class v.\n     \n    Observe that the collection of half-spaces \u210c_y^+ containing y has empty intersection in X. Thus, by  Theorem\u00a0<ref>, \n    Q(v)  has a canonical circumcenter. We define \u03c7(v) \u2208 X to be the circumcenter of Q(v). \n    \n    For every v \u2208 X and every g \u2208(X), we have Q(gv) = gQ(v) and (gv) = g (v). Furthermore, Q(v) and Q(gv) have the same intrinsic radius.\n    \n    Let y\u2208 X, and let v=[y]. Then, for every h \u2208_y^+, the map g gives an isometry from (h)  to (gh). Thus g  Q(v) \u2192 Q(gv) is an isometry, hence Q(v) and Q(gv) have the same intrinsic radius. By Theorem\u00a0<ref>, (v) and (gv) are uniquely determined by the geometry of Q(v) and Q(gv), respectively, hence (gv) = g (v).\n    \n    \n    \n    Consider a Roller class v\u2208 X. We say that a combinatorial geodesic  ray \u03b3 in Xrepresentsv if \n    \u03b3(\u221e) = y \u2208 v, or equivalently if \n    the UBS (\u03b3) represents the class v.   Setting x = \u03b3(0), observe that (x,y) is the \n    cubical convex hull of \u03b3, and (\u03b3) = (x,y) is exactly the collection of hyperplanes crossing \n    (x,y). This leads to\n    \n    \n    \n    Let v\u2208 X be a Roller class and let a\u2208 Q(v).  Then \u03c8(a)\u2264 v.  \n    \n    Let \u03b3 be a combinatorial geodesic ray representing v, with \u03b3(0) = x and  \u03b3(\u221e) = y \u2208 v. Then  \n    the cubical convex hull of \u03b3, namely (x,y), is also CAT(0) geodesically convex. Since a\u2208 Q(v) = \ud835\udca5(x,y) by Lemma\u00a0<ref>,\n    we may choose a CAT(0) geodesic \u03b1  representing a such that \u03b1\u2282(x,y).  Then (\u03b1) \n    \u2282(\u03b3) = (x,y).  Thus every hyperplane crossing \u03b1 crosses (x,y) and hence \u03b3.   \n    Hence \u03c8(a)\u2264 v.\n    \n    In Definition\u00a0<ref>, we will define a map \u03c6 X\u2192 X with the property that \u03c6(v)\u2208 Q(v) for each Roller \n    class v. This map will be defined by slightly perturbing the circumcenter (v).  In view of Lemma\u00a0<ref>, we \n    will have \u03c8(\u03c6(v))\u2264 v.\n    \n    Let v,w\u2208 X satisfy w\u2264 v.  Then Q(w)\u2282 Q(v).\n    \n    Fix a basepoint x_0\u2208 X^(0) and let \u03b3_v,\u03b3_w be combinatorial geodesic rays emanating from x_0 and \n    representing v,w respectively.  Since w\u2264 v, Theorem\u00a0<ref>.<ref> says that \ud835\udcb2(\u03b3_w)\u227c(\u03b3_v).  Without moving x_0, we can replace \u03b3_w by its image under the gate map to the \n    cubical convex hull of \u03b3_v, \n    ensuring that \ud835\udcb2(\u03b3_w)\u2282(\u03b3_v).  Hence, setting y_w = \u03b3_w(\u221e) \u2208 w and y_v = \u03b3_v(\u221e) \u2208 v, the \n    cubical convex hulls of these geodesics satisfy (x_0,y_w)\u2282(x_0,y_v).  Taking \n    boundaries and applying Lemma\u00a0<ref> gives  Q(w)\u2282 \n    Q(v).\n    \n    \n     \u00a7.\u00a7 Diameter, intrinsic radius, and Tits-convexity of Q(v)\n    \n    Let v \u2208 X be a Roller class. Recall that Q(v) is the intersection of the Tits boundaries of the half-spaces corresponding to a representative element of v. We will need the following properties of  Q(v):\n    \n    \n    For any Roller class v, the Tits boundary realization Q(v) has the following properties:\n    \n      * Q(v) has diameter at most \u03c0/2.\n         \n      * Q(v) is Tits\u2013convex.\n         \n      * Q(v) is contractible in the Tits metric topology and compact in the visual topology.\n         \n      * Q(v) has intrinsic radius r_v<\u03c0/2. \n         \n      * Q(v) \u2282B\u0303_T((v), r_v).\n    \n     Let v be an arbitrary Roller class and x_0 \u2208 X^(0) an arbitrary basepoint. Let \u03b3 be a combinatorial geodesic ray based at x_0 and representing v. Let H= H(x_0,v,\u03b3) denote the cubical convex hull of \u03b3. Then, for an arbitrary point y \u2208 [y] = v, the cubical hull H and the interval (x_0, y) lie within bounded Hausdorff distance of each other.  Thus, by \n    Lemma\u00a0<ref>, Q(v) is equal to the closed subset H  = (x_0, y) \u2282 X.\n    \n     Diameter: \n    To bound _T(Q(v)), let a,b\u2208 \n    Q(v).  Represent a,b by CAT(0) rays \u03b1,\u03b2 with initial point x_0. Note that \u03b1, \u03b2\u2282 H because H is a convex subcomplex.  Then (\u03b1),(\u03b2) \n    are both subsets of (\u03b3), which is a UBS representing v.  So, \ud835\udcb2(\u03b1)\u222a(\u03b2) \u2282(\u03b3).  Now, (\u03b1)\u222a(\u03b2) is \n    infinite.  Moreover, (\u03b1)\u222a(\u03b2) is unidirectional and contains no facing triple, since (\u03b3) has those properties.  Thus \ud835\udcb2(\u03b1)\u222a(\u03b2) is a UBS, hence Lemma\u00a0<ref> \n    implies _T(a,b)\u2264\u03c0/2.\n    \n    Convexity:  Since H=H(x_0,v,\u03b3)\u21aa X is an isometric embedding in the CAT(0) \n    metric, the \n    inclusion H=Q(v)\u21aa X is a Tits-metric isometric embedding.  Indeed, let a,b\u2208 \n    Q(v) be represented by CAT(0) rays \u03b1,\u03b2\u2282 H with initial point x_0. Since \n    Q(v) has diameter less than \u03c0, we have _T(a,b)=\u2220(a,b) by  \n    <cit.>.  \n    Since \u03b1, \u03b2\u2282 H, the angle \u2220_T(a,b) is \n    determined entirely by \n    the set {_X(\u03b1(t),\u03b2(t))}_t\u2265 0, by <cit.>).  By convexity of H, this set coincides with \n    {_H(\u03b1(t),\u03b2(t))}_t\u2265 0.  Hence the Tits distance from a to b measured in X \n    is the same \n    as the Tits distance measured in H=Q(v).\n    \n    Now, Q(v) contains a unique geodesic joining a,b.  Since this geodesic realizes \n    the distance from a to \n    b in X, this shows that Q(v) is Tits-convex.\n    \n    Intrinsic radius:  Since Q(v) is a CAT(1) space of \n    diameter less than \u03c0, the intrinsic radius r_v satisfies r_v<diam Q(v), by <cit.>.  Since diam Q(v)\u2264\u03c0/2, we have r_v<\u03c0/2, proving \n    assertion\u00a0<ref>.  \n    Now, observe that Q(v) \u2282B\u0303_T((v), r_v) by Definition\u00a0<ref> and Theorem\u00a0<ref>, proving\u00a0<ref>.\n    \n    Topological properties:  Since Q(v) is a uniquely geodesic CAT(1) space, a standard straight-line homotopy allows one to deformation retract Q(v) to \n    a single point. Thus Q(v) is contractible.\n    \n    Finally, recall from Lemma\u00a0<ref> (and from earlier in this proof) that Q(v) = (x_0,y) for an arbitrary point  \n    y \u2208 [y] = v.  By Lemma\u00a0<ref>, the subcomplex (x_0, y) is proper, hence Q(v) is compact in the visual topology.  (The visual topology is defined in <cit.>, where it is called the cone topology.)\n    \n    \n     \u00a7.\u00a7 Visibility and perturbing the circumcenter\n    \n    Recall the (X)\u2013equivariant circumcenter map \n     X \u2192 X, mentioned in Corollary\u00a0<ref>.\n    In this subsection, we perturb   to obtain a map \u03c6 X\u2192 X with slightly nicer \n    properties.  First, like , the map \u03c6 will have the property that \u03c6(v)\u2208 Q(v) for each Roller class \n    v, and hence \u03c8(\u03c6(v))\u2264 v.  Compare Remark\u00a0<ref>.\n    \n    We will define \u03c6 so that Roller classes v for which \u03c8(\u03c6(v))=v are exactly those for which there is some \n    CAT(0) geodesic ray representing v. (Note that a combinatorial geodesic exists for every v, but a CAT(0) geodesic is not guaranteed.) Later, we will work with only such Roller classes, which we term \n    \u2113^2\u2013visible; see Definition\u00a0<ref>. \n    See also Lemma\u00a0<ref> for several equivalent characterizations of visibility. While the map \u03c6 is not guaranteed to be equivariant, the set of \u2113^2\u2013visible Roller classes \n    will still be invariant.\n    \n    The following example illustrates the point that (v) can lie in Q(w)\u228a Q(v) for some w<v. \n    \n    \n    Consider the cone of \u211d^3 cut out by the planes z=0, z=y, and z=x, and let X be the union of all cubes (in the standard cubical tiling of \u211d^3) contained in this cone. Then X has four classes, described in coordinates as u=[(\u221e, 0, 0)], u'=[(0, \u221e, 0)], w = [(\u221e, \u221e, 0)], and v = [(\u221e, \u221e, \u221e)], all of which are represented by \u2113^2 geodesic rays. Furthermore, Q(v) = Q(\u221e, \u221e, \u221e) =  X is isometric to an isosceles triangle of S^2 whose base has length \u03c0/2 and whose height is arctan(1/\u221a(2)). The base of the triangle is Q(w) = Q(\u221e, \u221e, 0).\n    See Figure <ref>.\n    \n    \n    \n    \n    First, observe that (w) is the midpoint of the geodesic segment Q(w). Next, we claim that (v) = (w). To see this, let \u03b2 be the altitude from (w) to the the apex of Q(v). Because Q(v) has a reflective symmetry in \u03b2, its circumcenter must be contained in \u03b2. In addition, since len(\u03b2) = arctan(1/\u221a(2)) < \u03c0/4, any point b \u2208\u03b2 must have distance less than \u03c0/4 to the apex but distance at least \u03c0/4 to the two endpoints of Q(w). Thus (w) = (v) even though w<v and Q(w)\u228a Q(v).\n    \n    \n    The\n    phenomenon of Example\u00a0<ref> will be inconvenient later. To remedy this problem, we will define \n    \u03c6(v) by perturbing (v) slightly, to get a point in the interior of Q(v) that retains the property that \n    all of Q(v) is contained in the r_v\u2013neighborhood of \u03c6(v) for some r_v<\u03c0/2.  (This latter property will \n    also be necessary later.)\n    \n    To achieve this, we need some preliminary discussion and lemmas.  \n    \n    \n    \n    For every Roller class v,  there is a unique Roller class M_v \u2208\u03c8(Q(v)) that is maximal among all Roller classes in \u03c8(Q(v)). Furthermore Q(M_v)=Q(v).\n    \n    If w\u2208\u03c8(Q(v)), then w=\u03c8(a) for some a\u2208 Q(v), so w\u2264 v by Lemma\u00a0<ref>.  \n    Since there is a bound on the length of \u2264\u2013chains, it follows that \u03c8(Q(v)) contains \u2264\u2013maximal elements.\n    \n    Suppose that m,m'\u2208\u03c8(Q(v)) are \u2264\u2013maximal.  Let a,a'\u2208 Q(v) be such that \n    \u03c8(a)=m and \u03c8(a')=m'.  Let \u03b1,\u03b1' be CAT(0) geodesic rays in X representing a,a' \n    respectively, chosen so that \u03b1(0)=\u03b1'(0). Then _m \u223c(\u03b1) and _m'\u223c(\u03b1'). \n     Since m,m'\u2264 v, Theorem\u00a0<ref> gives\n     \ud835\udcb2(\u03b1) \u227c_v and (\u03b1') \u227c_v, hence\n    W(\u03b1)\u222a(\u03b1') is commensurate with a UBS by Lemma\u00a0<ref>. Thus, by Proposition\u00a0<ref>, there exists \n    a CAT(0) geodesic ray \u03b2 with (\u03b2)  = (\u03b1)\u222a\ud835\udcb2(\u03b1').  By construction, \n    \n        m \u2264\u03c8(\u03b2(\u221e))\u2264 v,      m' \u2264\u03c8(\u03b2(\u221e))\u2264 v\n    \n     where the first inequality for m or m' is strict if \n    m\u2260 m'. So, \u03b2(\u221e)\u2208 Q(v) by Lemma\u00a0<ref> and the second inequality.  Hence the \n    first inequality contradicts the maximality of m,m' in \u03c8(Q(v)), unless m=m'.  This proves \n    the uniqueness of a maximal element M_v.\n    \n    Next, M_v\u2264 v, so Q(M_v)\u2282 Q(v) by Lemma\u00a0<ref>.  On the other hand, if a\u2208 \n    Q(v), then \u03c8(a)\u2208\u03c8(Q(v)), so \u03c8(a)\u2264 M_v.  Hence a\u2208 Q(\u03c8(a))\u2282 Q(M_v) by \n    Lemma\u00a0<ref>. Thus Q(v)\u2282 Q(M_v), and we conclude  that Q(v) = Q(M_v).\n    \n    \n    For a Roller class v, define Q_0(v) = Q(v) \u2216\u22c3_u < M_v Q(u).\n    \n    \n    \n    Let v,w be Roller classes, and let a \u2208 Q(v). Then a \u2208 Q_0(v) if and only if \u03c8(a)= M_v.\n    \n    Furthermore, if Q(v) = Q(w), then M_v=M_w and Q_0(v)=Q_0(w).\n    \n    First, suppose  that a \u2208 Q_0(v). Then \u03c8(a) \u2264 M_v by the definition of M_v. If \u03c8(a) = u < M_v, then a \u2208 Q(u), contradicting the definition of Q_0(v). Thus \u03c8(a) = M_v, as desired.\n    \n    Conversely, suppose that \u03c8(a)=M_v.  If a\u2208 Q(u) for some u<M_v, then \n    \u03c8(a)\u2264 u by Lemma\u00a0<ref>, so \u03c8(a)<M_v, a contradiction.  Hence a\u2208 Q_0(v). \n    \n    \n    Finally, suppose Q(v) = Q(w). Then Lemma\u00a0<ref> says that M_v = M_w is the unique maximal element of \u03c8(Q(v)) = \u03c8(Q(w)).\n    Thus, by the above equivalence, Q_0(v)=Q_0(w).\n    \n    Let v be a Roller class. Then  Q_0(v) contains points arbitrarily close to (v) in the Tits metric. \n    \n    By Lemma\u00a0<ref>, there is a point a \u2208 Q(v)  such that \u03c8(a) = M_v.\n    By Lemma\u00a0<ref>, we have a \u2208 Q_0(v).\n    Let g be the geodesic in X from a to \n    b = (v).  By Proposition\u00a0<ref>.(<ref>), g lies in Q(v).\n     For any \u03f5>0, choose c \u2208 g so that 0 < _T(c,(v))<\u03f5.  We will show c \u2208 Q_0(v).\n     \n    By Proposition\u00a0<ref>, the Tits points a,b,c are represented by CAT(0) geodesic rays \u03b1, \u03b2, \u03b3 such that (\u03b3) = (\u03b1) \u222a(\u03b2) \u2283(\u03b1). Thus, by Lemma\u00a0<ref>, we have \u03c8(c) = Y_(\u03b3)\u2282 Y_(\u03b1) = \u03c8(a).\n    By Lemma\u00a0<ref>, we have \u03c8(c) \u2265\u03c8(a) = M_v, hence \u03c8(c) = M_v by the maximality of M_v.\n    Therefore, c \u2208 Q_0(v) by Lemma\u00a0<ref>.\n    \n    Let v be a Roller class, and fix Q = Q(v). Let r<\u03c0/2 be the intrinsic radius of Q. Using Lemma\u00a0<ref>, choose p_Q\u2208 \n    Q_0(v) such that d_T(p_Q,(v))\u2264\u03c0/4 -r/2. We call p_Q the pseudocenter of Q, and denote it \u03c6(v).\n    \n    Using Lemma\u00a0<ref>, we ensure that \u03c6(v) = \u03c6(w) = p_Q for every Roller class w such that Q(w) = Q(v) = Q.\n    \n    \n    In the following proposition we collect the facts about the pseudocenter map \n    \u03c6 that will be needed later, in conjunction with Lemma\u00a0<ref> and the definition of \n    \u03c6.\n    \n    \n         The pseudocenter map \u03c6 has the following properties.  Let v\u2208 X.  Then:\n         \n      * \u03c6(v)\u2208 Q(v).\n      * \u03c8(\u03c6(v))\u2264 v.\n      * Q(v)=Q(\u03c8(\u03c6(v))).\n      *  If Q(w)=Q(v), then \u03c6(w)=\u03c6(v). \n         Assertion\u00a0<ref> holds by construction, and, together with Lemma\u00a0<ref>, implies \n    assertion\u00a0<ref>.  Since \u03c6(v)\u2208 Q_0(v), we have \u03c8(\u03c6(v))=M_v by Lemma\u00a0<ref>, and Q(v)=Q(M_v) by \n    Lemma\u00a0<ref>, yielding assertion\u00a0<ref>.  Assertion\u00a0<ref> follows from the \n    definition of \u03c6 and Lemma\u00a0<ref>.\n    \n    \n    We can now define (\u2113^2)\u2013visible Roller classes:\n    \n    \n    Let v\u2208 X.  Then v is \u2113^2\u2013visible if v\u2208\u03c8( X). Let \n    (X) = \u03c8( X) denote the set of visible Roller classes. Observe that (X) stabilizes (X), because the map \u03c8 is (X)\u2013equivariant.\n    \n    Let v\u2208 X. Then the following are equivalent:\n    \n      * v is \u2113^2\u2013visible.\n    \n      *  There exists a CAT(0) geodesic ray \u03b1 such that (\u03b1) represents v.\n    \n      * v = M_v.\n    \n      * v = \u03c8(\u03c6(v)).\n    \n    To begin with, we have <ref>\u21d4<ref> by Lemma\u00a0<ref>.\n    \n    For <ref>\u21d2<ref>,  let \u03b1 be a CAT(0) geodesic ray such that \ud835\udcb2(\u03b1) represents v. Let a = \u03b1(\u221e) \u2208 X. \n    \n    Then, by Lemma\u00a0<ref>, we have \u03c8(a) = v.  Now, recall from Lemma\u00a0<ref> that M_v is \n    maximal among all Roller classes in \u03c8(Q(v)). By \n    Lemma\u00a0<ref>, every class w \u2208\u03c8(Q(v)) satisfies w \u2264 v, hence M_v \u2264 v.  On the other hand, v = \n    \u03c8(a) \u2208\u03c8(Q(v)), hence v \u2264 M_v by the maximality of M_v. Thus v = M_v.\n    \n    For <ref>\u21d2<ref>, suppose v = M_v.  By Definition\u00a0<ref>, we have \n    \u03c6(v) \u2208 Q_0(v). Thus, by Lemma\u00a0<ref>, we have \u03c8(\u03c6(v)) = M_v = v.\n    \n    For <ref>\u21d2<ref>, suppose v = \u03c8(\u03c6(v)). \n    Then \u03c6(v) \u2208 Q_0(v) \u2282 Q(v). \n    Choose a CAT(0) geodesic ray \u03b1 representing \u03c6(v).   The associated UBS (\u03b1) represents the \n    class \u03c8(\u03c6(v)) = v.\n    \n    Let v\u2208 X be a \u2264\u2013minimal Roller class.  Then v is \u2113^2\u2013visible.\n    \n    Lemma\u00a0<ref> gives v\u2265\u03c8(\u03c6(v)).  By \n    minimality of v, we thus have v=\u03c8(\u03c6(v)).\n    \n    \n     \u00a7.\u00a7 Cuboid generalization\n    \n    Here, we explain how to generalize the results of this section to a cuboid metric d_X^\u03c1. A reader who is only interested in cube complexes with the standard \u2113^1 and \u2113^2 metrics is invited to skip ahead to Section\u00a0<ref>. \n    \n    For the duration of this subsection, fix a G\u2013admissible hyperplane rescaling \u03c1 (Definition\u00a0<ref>) and the resulting cuboid metric d_X^\u03c1. Recall that the cuboid Tits boundary ^\u03c1 X = (X, d_X^\u03c1) was defined in Definition\u00a0<ref>. All of the constructions and results involving ^\u03c1 X will be invariant under the restricted automorphism group (X^\u03c1) of Definition\u00a0<ref>.\n    \n    To start, we can define a map \u03c8^\u03c1^\u03c1 X \u2192 X exactly as in Definition\u00a0<ref>. Generalizing Lemma\u00a0<ref>, we can characterize \u03c8^\u03c1(a) = \u03c8^\u03c1([\u03b1]) as the principal class of the umbra of a UBS representing a ray \u03b1:\n    \n        \u03c8^\u03c1(a) = \u03c8^\u03c1([\u03b1]) = Y_(\u03b1).\n    \n    This characterization holds because the proof of Lemma\u00a0<ref> works for \u03c8^\u03c1: its proof combines previous lemmas and combinatorial properties of hyperplane sets. \n    \n    Now, consider a point y \u2208 X. Since (X, d_X^\u03c1) is a CAT(0) space and the collection of half-spaces _y^+ is a filtering family, we can define the Tits boundary realization Q^\u03c1(y) exactly as in Definition\u00a0<ref>. Following Lemma\u00a0<ref>, whose proof extends to cuboids because cubical half-spaces are convex in d_X^\u03c1, we learn that the boundary realization Q^\u03c1(y) is also the boundary of a cubical interval, and depends only on the Roller class v = [y]. Thus we may define a Tits-convex set  Q^\u03c1(v) and its circumcenter \u03c7^\u03c1(v), as in Definition\u00a0<ref>. Following Corollary\u00a0<ref>, both  Q^\u03c1(v) and \u03c7^\u03c1(v) are invariant under the restricted automorphism group  (X^\u03c1).\n    \n    The partial order properties of the Tits boundary realization Q(v) that are proved in Lemmas\u00a0<ref> and \u00a0<ref> still hold for Q^\u03c1(v), because the proofs of those results are essentially combinatorial.\n    The features of Q(v) described in  Proposition\u00a0<ref> also hold for Q^\u03c1(v), because the proof of the Proposition uses prior results and the convexity of the cubical convex hull of a geodesic ray.\n    \n    \n    Next, Section\u00a0<ref> contains several results about perturbing the circumcenter (v) \u2208 Q(v) to a pseudocenter \u03c6(v). The definition of the pseudocenter \u03c6(v) is enabled by Lemmas\u00a0<ref>, <ref>, and\u00a0<ref>. All of these lemmas generalize immediately to the cuboid setting, because their proofs are essentially a top-level assembly of prior results. Thus we may generalize Definition\u00a0<ref> to define a pseudocenter \u03c6^\u03c1(v) \u2208 Q^\u03c1(v). This pseudocenter \u03c6^\u03c1(v) has all of the properties described in Proposition\u00a0<ref>, because the proof of that proposition merely assembles previously established results.\n    \n    Finally, Definition\u00a0<ref> generalizes immediately to define ^\u03c1(X) = \u03c8^\u03c1 (^\u03c1 X), the set of Roller classes that are visible after the rescaling \u03c1. Since \u03c8^\u03c1 is ^\u03c1(X)\u2013equivariant, the set ^\u03c1(X) is ^\u03c1(X)\u2013equivariant as well. Lemmas\u00a0<ref> and\u00a0<ref> generalize immediately to the cuboid setting, because their proofs are top-level assemblies of previous lemmas.\n    \n    \n    \n    In Definition\u00a0<ref>, the set (X) = \u03c8( X) is defined in terms of the CAT(0) metric on X.  When \n    we change the metric on X using a G\u2013admissible rescaling \u03c1, there is no a priori reason to expect (X) \n    = \u03c8( X) to coincide with ^\u03c1(X) = \u03c8^\u03c1 (^\u03c1 X).  Instead, our whole argument simply goes \n    through for whichever of (X) or ^\u03c1(X) we are considering.\n    \n    In fact, it turns out that (X)=^\u03c1(X). Since we do not use this fact in any proofs, we only sketch a proof.  Let v\u2208(X) \n    be a visible Roller class, and let \u03b1:[0,\u221e)\u2192 X be a CAT(0) geodesic ray for the metric _X with \ud835\udcb2(\u03b1) representing v.  We will produce a geodesic ray \u03b2 for the CAT(0) metric _X^\u03c1, satisfying \n    \ud835\udcb2(\u03b1)=\ud835\udcb2(\u03b2), from which it follows that v\u2208^\u03c1(X).  This shows \n    (X)\u2286^\u03c1(X), and a symmetric argument gives the reverse inclusion.\n    \n    Since cubical convexity of subcomplexes is independent of which CAT(0) metric we consider, we assume for convenience that \n    X is the cubical convex hull of \u03b1, i.e. \ud835\udcb2(\u03b1)=\ud835\udcb2(X).\n    \n    First, use Lemma\u00a0<ref> to produce chains {\u0125_n^1}_n,\u22ef,{\u0125^k_n}_n of dominant \n    hyperplanes such that there exists a constant C\u2265 0 with the property that, for all j\u2264 k, any subpath of \u03b1 \n    of length at least C crosses \u0125^j_n for some n.  The lemma allows us to choose these to be dominant hyperplanes in \n    the UBS \ud835\udcb2(\u03b1); therefore, if we construct a _X^\u03c1\u2013geodesic \u03b2 that crosses each h_n^j, then \n    by Lemma\u00a0<ref>, we get \ud835\udcb2(\u03b1)=\ud835\udcb2(\u03b2).\n    \n    By admissibility of the rescaling, there exists m\u2265 1 such that the identity map (X,_X)\u2192(X,_X^\u03c1) is \n    m\u2013bilipschitz.  Since X is the convex hull of \u03b1 and contains no facing triples, Lemma\u00a0<ref> guarantees properness of \n    (X,_X) and implies properness of (X,_X^\u03c1).  Thus, letting \u03b2_t \n    be the _X^\u03c1\u2013geodesic from \u03b1(0) to \u03b1(t), and letting t tend to infinity, the \u03b2_t subconverge \n    uniformly on compact sets to a _X^\u03c1\u2013geodesic \u03b2 with \u03b2(0)=\u03b1(0).\n    \n    Fix j\u2264 k.  Now, for any t, the hyperplanes crossing \u03b2_t are exactly those crossing \u03b1([0,t]).  Indeed, \n    any hyperplane separating \u03b1(0),\u03b1(t) crosses \u03b2_t, and any hyperplane crossing \u03b2_t does so in a single \n    point (and hence separates \u03b1(0),\u03b1(t)), since \u03b2_t is a _X^\u03c1\u2013geodesic.  In particular, \n    \u03b1([0,t]) crosses h_1^j,\u2026,h_N_t^j, where N_t=\u230a t/C\u230b.  Hence \u03b2_t crosses the same \n    hyperplanes while having _X^\u03c1\u2013length at most mt.  From this one deduces the following: there exists L such \n    that for all n, and all sufficiently large t, the path \u03b2_t crosses h^1_1,\u2026,h^1_n and intersects each of \n    those carriers in a subpath of length at most L.  In other words, there is a uniform bound on how long each \u03b2_t can \n    fellow-travel any of the \u0125_n^j, whence \u03b2 cannot be parallel to a ray in any \u0125^n_j.  This implies that \n    \u03b2 must cross \u0125^j_n for all j,n, and hence, as explained above, \ud835\udcb2(\u03b2)=\ud835\udcb2(\u03b1) and \n    v\u2208^\u03c1(X).\n    \n    Looking ahead to Definition\u00a0<ref>,  the above argument also shows that (X) = ^\u03c1(X) for any \n    admissible rescaling \u03c1. In the next section, we will heavily use (X) to construct open and closed coverings of \n    X, so that the nerves of those coverings can be used to prove homotopy equivalence. In an analogous fashion, we will \n    use ^\u03c1(X) to construct open and closed coverings of ^\u03c1 X.   One can then apply Lemma\u00a0<ref> \n    and Lemma\u00a0<ref> to show that the nerves of the coverings of X coincide with the nerves of the \n    corresponding coverings of ^\u03c1 X, and one can use Lemma\u00a0<ref> to see that the covering of \n    X coming from visible Roller classes of X coincides with the corresponding covering constructed using \n    visible classes of X^\u03c1.  However, as we mentioned, the cuboid version of our argument does not rely on this; one \n    instead just substitutes ^\u03c1(X) for (X) everywhere, and runs all the arguments.     \n    \n    \n    \u00a7 OPEN AND CLOSED COVERINGS OF X\n    \n    In this section, we study the closed covering of X by the sets Q(v) corresponding to maximal  \u2113^2\u2013visible Roller classes (see Definition\u00a0<ref>). Our goal, achieved in Theorem\u00a0<ref>, is to show that X is homotopy equivalent to the nerve _T of this cover.\n    \n    \n    Let (X) denote the set of Roller classes v such that:\n    \n      * v is \u2113^2\u2013visible;\n         \n      *  if w is visible and v\u2264 w, then w=v.\n    \n    \n    The plan for this section is as follows. We will first show that {Q(v):v\u2208(X)} is a closed covering of X.  Then, we will thicken each closed set Q(v) to an open set U(v), in \n    such a way that the intersection pattern of the open cover {U(v) :v\u2208(X) } is the same as that of the closed cover {Q(v):v\u2208(X)}.  Then we will apply the Nerve Theorem to \n    conclude that X is homotopy equivalent to the nerves of these covers.\n    \n    The main result of this section is Theorem\u00a0<ref>. Section\u00a0<ref> is about the initial closed covering.  Section\u00a0<ref> describes the thickening procedure. Section\u00a0<ref> describes how to generalize these results to a cuboid metric d_X^\u03c1.\n    \n    \n    \n    \n     \u00a7.\u00a7 The closed covering\n    \n    The maximal visible Tits boundary realizations Q(v) provide a closed covering of the Tits boundary. We use this covering to define a nerve, as follows.\n    \n    \n    Let \ud835\udca9_T be the simplicial complex with vertex set  (X), where vertices v_0,\u2026,v_n\u2208(X) span an n\u2013simplex if and only if \u22c2_i=0^nQ(v_i)\u2260\u2205.\n    \n    Let v\u2208 X.  Then  there exists w\u2208(X) with \u03c6(v)\u2208 Q(w).  \n    Hence \n    {Q(v):v\u2208(X)} covers X.\n    \n    Note that \u03c8( \u03c6(v)) \u2208(X), by Definition\u00a0<ref>.\n    Hence there exists w\u2208(X) such that \u03c8\u03c6(v) \u2264 w.  \n    \n    By Lemma\u00a0<ref>, \u03c6(v) \u2208 Q(\u03c8\u03c6(v))\u2282 Q(w).\n    \n    Now, given a point a\u2208 X, we can apply the above argument to v=\u03c8(a).  Then, for some w\u2208(X), Lemma\u00a0<ref> implies\n    \n        a\u2208 Q(\u03c8(a))=Q(\u03c8\u03c6\u03c8(a))  \u2282 Q(w) .\n    \n    Hence {Q(v):v\u2208(X)} covers \n    X.\n    \n    Let v,w\u2208(X).  Then Q(v)=Q(w) if and only if v=w. In particular, the assignment v \u21a6 Q(v) gives a bijection from (X) to its image.\n    \n    Suppose Q(v) = Q(w). Then Proposition\u00a0<ref>.<ref> implies \u03c6(v)=\u03c6(w). By visibility and Lemma\u00a0<ref>, we have \u03c8\u03c6(v)=v and \u03c8\u03c6(w)=w, hence v=w.\n    \n    \n    Now, Lemmas\u00a0<ref> and\u00a0<ref> combine to yield:\n    \n    \ud835\udca9_T is the nerve of the covering of X by the collection of closed sets {Q(v):v\u2208(X)}.\n    \n    \n     \u00a7.\u00a7 The open covering\n    \n    The goal of this subsection is to thicken up the closed sets Q(v) for v \u2208(X) to be open sets U(v), such that the \n    intersection pattern of the U(v) is the same as that of the Q(v). This is needed since the Nerve \n    Theorem\u00a0<ref> works for open covers only.\n    \n    \n    \n    Let v,w\u2208(X) be points such that Q(v)\u2229 Q(w)=\u2205. Then\n     _T(Q(v),Q(w))> \u03f5_0, where \u03f5_0 > 0 is a constant depending only on X.\n     \n    Let a\u2208 Q(v) and b\u2208 Q(w).  By definition, a\u2208 Q(\u03c8(a)).  Since \n    v\u2265\u03c8(a), we have Q(\u03c8(a))\u2282 Q(v) and \n    similarly Q(\u03c8(b))\u2282 Q(w), by Lemma\u00a0<ref>. Since we have assumed Q(v)\u2229 Q(w)=\u2205, it follows that  Q(\u03c8(a))\u2229 \n    Q(\u03c8(b))=\u2205.\n    \n    Choose CAT(0) geodesic rays \u03b1,\u03b2 such that \n    \u03b1(0)=\u03b2(0) \u2208 X^(0) and \u03b1(\u221e)=a, \u03b2(\u221e)=b.\n    \n    Since X is finite-dimensional, Lemma\u00a0<ref> provides  \u2113^1 geodesic rays \n    \u03b1\u0305, \u03b2\u0305 with common basepoint \u03b1(0)=\u03b2(0), that lie at \n    uniformly bounded  Hausdorff distance from \u03b1,\u03b2 respectively.\n    Note that \n    (\u03b1) \u223c(\u03b1\u0305) and (\u03b2) \u223c(\u03b2\u0305).\n    \n    We claim that (\u03b1\u0305)\u2229\ud835\udcb2(\u03b2\u0305) is finite. Suppose not. By Lemma\u00a0<ref>, Q(\u03c8(a)) = _\u03b1\u0305, where _\u03b1\u0305 = (\u03b1\u0305(0), \u03b1\u0305(\u221e))  is the cubical convex hull of \u03b1\u0305. Similarly, \n    Q(\u03c8(b)) = _\u03b2\u0305.\n    \n    Since C=_\u03b1\u0305\u2229_\u03b2\u0305\u2260\u2205, we have\n    (C) = (\u03b1\u0305)\u2229(\u03b2\u0305) by Lemma\u00a0<ref>.<ref>.\n    Now _\u03b1\u0305 is a proper CAT(0) space, by Lemma\u00a0<ref>. Thus C is also a proper CAT(0) space, hence |(C)| = \u221e implies C is unbounded and \n    C is a nonempty subspace of Q(\u03c8(a)).  Similarly, C is a nonempty subspace of Q(\u03c8(b)).  Thus C  \u2282 Q(\u03c8(a)) \u2229 Q(\u03c8(b)) = \u2205, a contradiction. This proves the claim.\n    \n    Since (\u03b1) \u223c(\u03b1\u0305) and (\u03b2) \u223c(\u03b2\u0305), we may define\n     N = |(\u03b1) \u2229(\u03b2)| < \u221e. Recall that \u03b1(0) = \u03b2(0).\n    Then, for all t \u2265 0, we have\n    \n        | ( \u03b1(t) , \u03b2(t) ) | \u2265 | ( \u03b1(t) , \u03b1(0))| + |(\u03b2(0), \u03b2(t) ) | - 2N.\n    \n    Applying Lemma\u00a0<ref> to both sides gives\n    \n        \u03bb_0 \u00b7 d_X(\u03b1(t), \u03b2(t) )+ \u03bb_1 \u2265(  t/\u03bb_0 - \u03bb_1 ) + (  t/\u03bb_0 - \u03bb_1 ) - 2N = 2t/\u03bb_0 - 2(N + \u03bb_1).\n    \n    Here, \u03bb_0 \u2265 1 and \u03bb_1 are constants depending only on X. Taking limits gives \n        lim_t\u2192\u221e_X(\u03b1(t),\u03b2(t))/2t\u22651/\u03bb_0^2.\n      \n    \n    By\u00a0<cit.>, we thus have  sin(\u2220_T(a,b)/2)\u22651/\u03bb_0^2.  Now,\n    \n        _T(a,b) \u2265\u2220_T(a,b)  \u2265sin^-1(1/\u03bb_0^2) >1/\u03bb_0^2.\n      \n    Setting  \u03f5_0 = 1/\u03bb_0^2  completes the proof.\n    \n    \n    In the next lemma, we show that, given a collection of Roller classes, the intersection of the associated Tits boundary realizations \n    coincides with the Tits boundary of the intersection of the convex hulls of the corresponding CAT(0) geodesic rays.\n    \n    \n    Let v_1, \u2026, v_k \u2208(X) be Roller classes. Then there exist convex subcomplexes \n     _1, \u2026, _k \u2282 X such that the following holds. Each _i is the cubical convex hull \n    of a CAT(0) geodesic ray \u03b3_i, with a common basepoint.\n     Furthermore,\n    for every subset J \u2282{1, \u2026, k}, we have \u22c2_i \u2208 J Q(v_i) = (\u22c2_i\u2208 \n    J_i).\n    \n    Fix a basepoint x\u2208 X^(0).  For 1\u2264 i\u2264 k, let _v_i X\u2192 v_i be the gate map of Proposition\u00a0<ref>, and let y_i= _v_i (x). \n    Let _i=(x,y_i) be the \n    convex subcomplex of X determined by the vertex \n    interval between x and y_i as in Definition\u00a0<ref>. Then (_i) = (x, y_i) = (x,v_i), where the last equality holds by Proposition\u00a0<ref>.\n     By Lemma\u00a0<ref>, Q(v_i)=_i.\n    \n    For each i, let \u03b3_i be a CAT(0) geodesic ray that emanates from x and represents \n    \u03c6(v_i). \n    We want to show that _i = (\u03b3_i), the cubical convex hull of \u03b3_i.\n    \n    First, we claim that (\u03b3_i) \u2282_i. Since _i is convex in the CAT(0) metric d_X, it contains a CAT(0) geodesic from every point in the interior to every point on the boundary. In particular, it contains the unique CAT(0) geodesic \u03b3_i from \u03b3_i(0) = x\u2208_i to \n    \u03b3_i (\u221e)  \u2208 Q(v_i) = _i. Thus \u03b3_i \u2282_i. Since _i is cubically convex, it follows that (\u03b3_i) \u2282_i.\n    \n    \n    Next, we claim that _i \u2282(\u03b3_i), or equivalently (_i) \u2282(\u03b3_i).  Since \u03b3_i(0)=x \u2208_i, any hyperplane \u0125\u2208(\ud835\udca5_i) \u2216\ud835\udcb2(\u03b3_i) would separate the entire ray \u03b3_i from \n    the entire class v_i, contradicting that \u03c8(\u03b3_i(\u221e))=\u03c8(\u03c6(v_i))=v_i, where the second equality  holds by visibility and Lemma\u00a0<ref>.  Hence (_i) \u2282(\u03b3_i), \n    and we conclude that _i = (\u03b3_i).\n    \n    Finally, consider an arbitrary subset  J \u2282{1, \u2026, k}. The inclusion (\u22c2_i\u2208 \n    J_i) \u2282\u22c2_i\u2208 IQ(v_i) is immediate. For the other inclusion, \n    let \n    b \u2208\u22c2_i\u2208 JQ(v_i). Then each convex set _i contains the unique CAT(0) ray \u03b2 starting at \n    x and ending at b.\n    Thus \u03b2\u2282\u22c2_i\u2208 J_i, hence b \u2208(\u22c2_i\u2208 \n    J_i).\n    \n    The following related statement about \u2113^1 geodesics can be proved by an easier analogue of the proof of Lemma\u00a0<ref>.\n    \n    Let v_1, \u2026, v_k be arbitrary Roller classes. Then there exist convex subcomplexes  _1, \u2026, \ud835\udca5_k (defined in exactly the same way, namely  _i=(x,  _v_i (x)) such that each  (_i) is a UBS representing \n    v_i. Furthermore, each _i is the cubical \n    convex hull of a combinatorial geodesic, with a common basepoint. The intersection \u22c2_i _i itself has the \n    property that ( \u22c2_i _i) = \u22c2_i ( _i). In particular, if \n    ( \u22c2_i _i) is infinite, then it is an \u2113^1\u2013visible UBS.\n    \n    \n    The next lemma is crucial.  We will later replace the closed covering of X by Tits boundary realizations with an open covering, by \n    slightly thickening each Tits realization.  The lemma says, roughly, that for a collection of Tits boundary realizations corresponding to a \n    simplex in the nerve of the closed covering, any point in the intersection of small \u03f5\u2013neighborhoods of the Tits boundary realizations is still in \n    a f(\u03f5)\u2013neighborhood of the intersection of the Tits boundary realizations.\n    \n    \n    There exists a constant \u03f5_1>0, depending on (X), and a function f  (0,\u03f5_1)\u2192(0,\u03c0/2) such that lim_\u03f5\u2192 0 f(\u03f5) = 0 and \n    such that the following holds.  Fix \u03f5\u2208(0,\u03f5_1) and let v_0,\u2026,v_k\u2208(X) satisfy \n    \u22c2_i=0^kQ(v_i)\u2260\u2205.  For every a\u2208 X such that _T(a,Q(v_i)) \u2264\u03f5 for all \n    i, there is a point b \u2208\u22c2_i=0^kQ(v_i) such that\n    _T(a, b) \u2264 f(\u03f5).\n    \n    We begin by defining the constant \u03f5_1 and the function f  (0,\u03f5_1)\u2192(0,\u03c0/2). Let \n    \u03bb_0, \u03bb_1 be the constants of Lemma\u00a0<ref>, which depend only on (X). Define K = 4 \u03bb_0^2  (X). Then, we set \n    \n        \u03f5_1 = 4/5K,     \n        f(\u03f5)  = cos^-1(1 - K \u03f5) \u2264cos^-1 (15) < \u03c02.\n    \n    The bound f(\u03f5) \u2264cos^-1(1/5) holds because K \u03f5 < K \u03f5_1 = 4/5. The property lim_\u03f5\u2192 0 f(\u03f5) = 0 is now immediate.\n    \n    Plan of the proof.\n    Let v_0,\u2026,v_k\u2208(X) be Roller classes such that \n    \u22c2_i=0^kQ(v_i)\u2260\u2205.\n    By Lemma\u00a0<ref>, there exist convex subcomplexes _0,\u2026,_k such that \u22c2_i = 0^k Q(v_i)=(\u22c2_i= 0^k _i). Choose  a basepoint x \u2208\u22c2_i= 0^k _i. \n    \n    Fix \u03f5 < \u03f5_1, and let a\u2208 X be a point such that _T(a,Q(v_i)) \u2264\u03f5 for all i. Let \u03b1[0,\u221e)\u2192 X be a CAT(0) geodesic ray, such that \u03b1(0) = x and \u03b1(\u221e) = a. To prove the lemma, we will find a point b\u2208\u22c2_i=0^kQ(v_i) such that d_T(a, b) \u2264  f(\u03f5).\n    \n    We locate the point b using gate projections. Let X \u2192\u22c2_i=1^k _i be the gate map.\n     For t \u2265 0, let x_t = (\u03b1(t)). Since \u22c2_i=0^k_i is a finite-dimensional CAT(0) \n    cube complex with no facing triple of hyperplanes, it is  proper by \n    Lemma\u00a0<ref>. We will check that the sequence {x_t}_t\u2208 is unbounded.\n      Thus the segments joining x_0 to the elements of {x_t}_t\u2208 \n    subconverge uniformly on compact sets to a CAT(0) geodesic ray representing some point b\u2208\u22c2_i=0^k Q(v_i).\n    \n    To prove that d_T(a, b) \u2264 f(\u03f5), we will estimate the Alexandrov angle at x = \u03b1(0) between \u03b1(t) and x_t. In order to do this, we will control the number of hyperplanes that separate \u03b1(t) from \u22c2_i=0^k _i. \n    \n    Main hyperplane estimate. For each t \u2265 0, let (t) be the set of hyperplanes that separate \u03b1(t) from \n    \u22c2_i=0^k_i. We will prove the following double-sided estimate for all large t:\n    \n        1/\u03bb_0_X(\u03b1(t),x_t) - \u03bb_1 \u2264| (t)|\u2264(X)  (\u03bb_0 \u00b7 2 t \u03f5 + \u03bb_1) + D,\n    \n    where D is a constant independent of t.\n    \n    The lower bound of (<ref>) is straightforward.  By Lemma\u00a0<ref>, the gate map X\u2192\u22c2_i = 0^k _i  is characterized by the property that a \n    hyperplane \u0125 separates \n        \u03b1(t) from x_t = (\u03b1(t)) if and only if \u0125 separates \u03b1(t) from \u22c2_i=0^k_i.  \n       In other words, (t) = (\u03b1(t), x_t).\n         Hence Lemma\u00a0<ref> gives\n    \n        1/\u03bb_0 d_X(\u03b1(t),x_t) - \u03bb_1 \u2264 |(t)| ,\n    \n    as desired. By contrast, the upper bound requires some hyperplane combinatorics.\n    \n    \n    Hyperplane sets. \n    For each i, let \u212c_i(t) be the set of hyperplanes that separate \u03b1(t) \n    from _i.  Note that (t)\u2283\u22c3_i=0^k\u212c_i(t). We claim that (t)=\u22c3_i=0^k\u212c_i(t).\n    \n    Suppose that \u0125\u2208(t) \u2216\u22c3_i=0^k\u212c_i(t).  Then \u0125 crosses each _i, so by a standard cubical \n    convexity argument, \u0125 crosses \u22c2_i=0^k_i and hence cannot separate any point from \u22c2_i=0^k_i.  This is \n    a contradiction, and thus (t)=\u22c3_i=0^k\u212c_i(t). \n    \n    Let \ud835\udc9c_0(t)=\u212c_0(t). For i \u2265 1, let \ud835\udc9c_i(t)=\u212c_i(t) \u2216\u22c3_j < i\ud835\udc9c_j(t).  Then the \n    sets \ud835\udc9c_0(t),\u2026,\ud835\udc9c_k(t) are pairwise disjoint, and their union is (t).  For each i, let \ud835\udc9c_i = \u22c3_t \u2265 0\ud835\udc9c_i(t).\n    Observe that every \ud835\udc9c_i is inseparable, by definition. \n    Furthermore, \ud835\udc9c_i is unidirectional. Indeed, \ud835\udc9c_i \u2282\u212c_i =  \u22c3_t \u2265 0\u212c_i(t), and \u212c_i separates _i from the tail of the ray \n    \u03b1. Unidirectionality passes to subsets, hence \ud835\udc9c_i is unidirectional.\n     Consequently \ud835\udc9c_i is either finite or a UBS.\n    \n    \n    \n    \n    Let J\u2282{0,\u2026,k} be the set of i such that \ud835\udc9c_i is a UBS. Observe that \ud835\udc9c_i  \u2229\ud835\udc9c_j = \u2205 for i \u2260 j and _i \u2208 J\ud835\udc9c_i \u2282(\u03b1), which is itself a UBS. Thus, by Lemma\u00a0<ref>, we have |J| \u2264(X).\n     We define D = \u2211_i \u2209 J | \ud835\udc9c_i |. \n    \n    The upper bound of (<ref>). \n    Next, we will use the decomposition (t) = _i=1^k \ud835\udc9c_i(t) to prove the upper bound  of (<ref>).\n    \n    For each i \u2208{0, \u2026, k}, let \u03be_i be a ray in _i issuing from x = \u03b1(0), such that \u03be_i(\u221e) is a closest point in \n    Q(v_i) = _i to a.  \n    Now, for all i and all t, any hyperplane \u0125\u2208\ud835\udc9c_i(t) separates \u03b1(t) from _i and hence separates \u03b1(t) from \n    \u03be_i(t).  Thus Lemma\u00a0<ref> gives\n    \n        |\ud835\udc9c_i(t)| \u2264 |(\u03b1(t),\u03be_i(t))| \u2264\u03bb_0 \u00b7 d_X (\u03b1(t), \u03be_i(t)) + \u03bb_1.\n     \n    \n    Now, by <cit.>, for any \u03b4>0 there exists t_0 such that for all t>t_0, \n    we have _X(\u03b1(t),\u03be_i(t))\u2264 t(2sin\u03f5/2+\u03b4).  Since \u03f5 is independent of t, it follows that \n    for all sufficiently large t,  we have \n    \n        _X(\u03b1(t),\u03be_i(t))\u2264 4tsin\u03f52 < 2 t \u03f5.\n      \n    \n    \n    Summing |\ud835\udc9c_i(t)| over all i  gives\n    \n        | (t) |    = \u2211_i\u2208 J|\ud835\udc9c_i(t)| + \u2211_i\u2209 J|\ud835\udc9c_i(t)| \n           \u2264\u2211_i \u2208 J( \u03bb_0 \u00b7 d_X (\u03b1(t), \u03be_i(t)) + \u03bb_1 ) + \u2211_i \u2209 J | \ud835\udc9c_i | \n           \u2264  |J| (\u03bb_0 \u00b7 2 t \u03f5 + \u03bb_1) + D,\n    \n    which proves (<ref>) because |J| \u2264(X). \n    \n    \n    Angle estimate.\n    Let x=\u03b1(0).  Set A = _X(\u03b1(0), \u03b1(t))=t (latter equality since \u03b1 is a geodesic), and B = _X(\u03b1(0), x_t), and C = _X(\u03b1(t), x_t).  Let \u03b8\u0305_t \n    be the Euclidean angle at the vertex corresponding to x in the Euclidean comparison triangle with sides of length A,B,C, i.e. the comparison angle between \u03b1(t) and x_t at x.  Let \n    \u03b8_t be the Alexandrov angle at x = \u03b1(0) between x_t and \u03b1(t), so that \u03b8_t\u2264\u03b8\u0305_t.   \n    \n    We can estimate \u03b8\u0305_t using the law of cosines, starting with an estimate of C. Multiplying every term of (<ref>) by \u03bb_0 and choosing t sufficiently large yields\n    \n        C = d_X(\u03b1(t), x_t) \u2264 4 \u03bb_0^2 (X) \u00b7\u03f5 t = K \u03f5 t.\n    \n    Meanwhile, B can be estimated as follows:\n    \n        t(1-K \u03f5) \n         \u2264_X(\u03b1(0),\u03b1(t))-_X(\u03b1(t),x_t))\n        \u2264_X(\u03b1(0),x_t) = B \u2264 t.\n    \n    Here, the first inequality is by (<ref>), the second inequality is the triangle inequality, and the final inequality \n    holds because the projection  is 1\u2013Lipschitz for the CAT(0) metric by Lemma\u00a0<ref>.  \n    \n    \n    \n    By  the cosine law and the CAT(0) inequality, we have\n    \n    \n        2 AB cos(\u03b8_t) \u2265 2AB cos(\u03b8\u0305_t)=A^2 + B^2 - C^2.\n    \n    The equality is the cosine law applied to the Euclidean comparison triangle, and the inequality holds for the corresponding CAT(0) triangle.  We are interested in the former, since we will need a \n    bound on \u03b8\u0305_t (which will incidentally bound \u03b8_t).\n    Substituting the bounds (<ref>) and (<ref>) into the cosine law shows that for all large t, we have\n    \n        2t^2cos\u03b8\u0305_t  \u2265  t^2+t^2(1-K \u03f5)^2- t^2 (K\u03f5)^2,\n    \n    which simplifies to\n    cos\u03b8\u0305_t \u2265 \n    1-K \u03f5. Since we have chosen \u03f5\u2208 (0, 45K ), this ensures that \u03b8\u0305_t is a small angle; more precisely \u03b8\u0305_t \u2264cos^-1( 1- K \u03f5).\n    \n    Conclusion. \n    Since K \u03f5 < 4/5, equation\u00a0(<ref>) implies \n    d_X(\u03b1(0), x_t) \u2265 (1-K \u03f5) t > 1/5 t.\n    Thus the sequence {x_t}_t\u2208 is unbounded,\n    and some subsequence converges to a point b\u2208\u22c2_i=0^kQ(v_i), as mentioned above.\n    By\u00a0<cit.>, which relates the Tits angle \u2220(a,b) to the Euclidean comparison angles \u03b8\u0305_t, we have \n    \n        \u2220(a,b)\u2264liminf_t\u2192\u221e\u03b8\u0305_t \u2264cos^-1 (1 - K \u03f5) = f(\u03f5).\n    \n    Since we have already checked that f(\u03f5) < \u03c0/2, this ensures  \n     \u2220(a,b) \u2264 f(\u03f5)<\u03c0/2.  In particular, _T(a,b)=\u2220(a,b) \u2264 f(\u03f5).\n    \n    \n    \n    Recall from Proposition\u00a0<ref>.(<ref>),(<ref>) that for each v\u2208(X), there is a radius r_v<\u03c0/2 such that Q(v) is contained in the closed ball \n    B\u0303_T((v), r_v) in the Tits metric.\n    \n    \n    Let \u03f5_0 be the constant of Lemma\u00a0<ref>. Let f  (0, \u03f5_1) \u2192 be the function from Lemma\u00a0<ref>.  Since lim_\u03f5\u2192 0 f(\u03f5) = 0, that lemma allows us to \n    choose a constant \u03f5_2 < \u03f5_1, depending  only on (X), so that f(\u03f5)+\u03f5\u2264\u03f5_0 whenever \n    \u03f5\u2264\u03f5_2.  \n    For each Roller class w, define a thickening constant\u03f5(w) = min{\u03f5_0/2 ,\u03f5_2, r_w/4} > 0.\n    \n    Since the constants \u03f5_0, \u03f5_2 depend only on (X), and the intrinsic radius r_w depends only on the (X)\u2013orbit of w by Corollary\u00a0<ref>,\n    it follows that \u03f5(w) itself depends only on the the (X)\u2013orbit of w.\n    \n    For every v\u2208(X), there exists a subset U(v)\u2282 X such that the following \n    hold:\n    \n      * Q(v)\u2282 U(v)\u2282\ud835\udca9_\u03f5(v)(Q(v));\n      * U(v) has diameter less than 3\u03c0/4; \n     \n      * U(v) is open;\n      * U(v) is convex and contractible;\n     \n      * U(gv) = gU(v) for all g \u2208(X).\n    \n    Let Y be the Euclidean cone on X, with cone-point denoted 0.  \n    By\u00a0<cit.>, the usual cone metric _Y on Y has the \n    property that (Y,_Y) is a CAT(0) geodesic space.  We use the notation \u03bd_\u03b4(A) to denote the open \u03b4\u2013neighborhood of a set A \u2282 Y in this CAT(0) metric.\n    \n    We identify X \n    with the unit sphere about 0 in Y. We also set Q = Q(v) for simplicity of notation. Recall from Proposition\u00a0<ref>.(<ref>) that the intrinsic radius of Q is r_v \n    \u2208 [0, \u03c0/2).\n    \n    The convex sub-cone Z = Z(v):  Let Z\u2282 Y be the subspace arising as the union of all rays in Y \n    emanating from 0 and passing through Q\u2282 X.  We claim that \n    Z is convex in (Y,_Y).  Indeed, let x,y\u2208 Z. Then x,y \n    respectively lie on rays \u03b1_x,\u03b1_y emanating from 0 and intersecting Q \n    in points x',y'.  By <cit.>, the rays \u03b1_x,\u03b1_y determine a convex sector S \u2282 Y \n    intersecting X in the unique Tits geodesic from x' to y', which lies in \n    Q by Tits convexity of Q.  Hence S lies in Z, and thus so does \n    the _Y\u2013geodesic from x to y, since x,y\u2208 S.\n    \n    The horoball B = B(v):  Let  c=(v) be the circumcenter of Q = Q(v). Let \u03b1 =\u03b1_c be the parametrized geodesic ray in Y such that \u03b1(0)=0 and \u03b1(1)=c.  Let p  Y\u2192 be the associated \n    horofunction, defined by \n    \n        p(y)=lim_s\u2192\u221e[_Y(\u03b1(s),y)-s] .\n     \n    Let \n    t_0=cos r_v, which is positive since r_v\u2208[0,\u03c0/2).\n    \n    Let B = B(v)=p^-1((-\u221e,-t_0]).  Recall from e.g.\u00a0<cit.> that B is a convex \n    subset of Y.  Let K(v)=B\u2229 Z. See Figure\u00a0<ref>.\n    \n    \n    Q lies in K(v):  We claim that Q\u2282 K(v).  Since Q is the unit sphere in Z by the definition of Y and Z, \n    it suffices to show that Q\u2282 B.  To that end, fix q\u2208 Q, and observe that \n    _Y(q,0)=1.  Let s\u226b 0 and consider the convex Euclidean triangle in Y with vertices at 0,q,\u03b1(s).  The angle in this triangle at 0 is denoted \n    \u03b8, and we note that \u03b8\u2264 r_v.  From the cosine law, we obtain \n    _Y(q,\u03b1(s))^2=s^2+1-2scos\u03b8.  Hence \n    \n        p(q)=lim_s\u2192\u221e[\u221a(s^2+1-2scos\u03b8)-s]=-cos\u03b8\u2264 - cos r_v = - t_0.\n    \n    Thus, by the definition of B, we have q\u2208 B, as \n    required.  Since Z\u2229 X=Q, we have in fact shown that K(v)\u2229 \n    X=Q. \n    \n    K(v) satisfies d(0,K(v)) = t_0:  We claim that K(v) is disjoint from the open t_0\u2013ball in Y about \n    0.  Indeed, let b\u2208 K(v).  Then p(b)\u2264 -t_0.  Hence, for any fixed \n    \u03b4>0, and any sufficiently large s>0, we have \n    _Y(b,\u03b1(s))<s-t_0+\u03b4.  By the triangle inequality, s\u2264_Y(0,b)+s-t_0+\u03b4, i.e. _Y(0,b)>t_0-\u03b4.  Hence \n    _Y(b,0)\u2265 t_0, as required.  At the same time, \u03b1 = \u03b1_c is a parametrized geodesic ray and \u03b1(t_0) is a point of K(v) at distance exactly t_0 from 0, hence d(0,K_v) = t_0.\n    \n    \n    The projection \u03d6 and the open set U'(v):  Let \u03d6:Y \u2216{0}\u2192 X be the radial projection. Recall that \u03bd_\u03c1(0) is the open \u03c1\u2013neighborhood of 0. \n    We claim that for every 0 < \u03c1\u2264 1, the restriction of \u03d6 to  Y \u2216\u03bd_\u03c1(0) is 1/\u03c1\u2013Lipschitz. Indeed,  by <cit.>, it suffices to check this claim on a sector of ^2. In polar coordinates on ^2, the distance element ds satisfies ds^2 = dr^2 + r^2 d\u03b8^2, hence the projection \u03d6 rescales ds by a factor of at most r^-1, hence \u03d6 is 1/\u03c1\u2013Lipschitz when r \u2265\u03c1. \n    \n    Recall the constant \u03f5(v) defined in Definition\u00a0<ref>, and define a positive constant \n    \n        \u03f5' = \u03f5'(v) = \u03f5(v) /1 + \u03f5(v) t_0 \u2208 (0, t_0),\n          which satisfies  \u03f5'/t_0 - \u03f5' = \u03f5(v).\n    \n    Let U'(v) = \u03bd_\u03f5' (K(v)) be the open \u03f5'\u2013neighborhood \n    of K(v) in Y.  Since K(v) = B \u2229 Z is convex and Y is CAT(0), it follows that U'(v) is convex. Furthermore, U'(v) is open and disjoint from the ball of radius t_0 - \u03f5' about \n    0.  See Figure\u00a0<ref>.\n    \n    Definition and properties of U(v):\n    Let U(v)=\u03d6(U'(v))\u2282 X. We claim that this has all of the properties claimed in the lemma statement. First, since Q(v) \u2282 K(v) by construction, and \u03d6 is the identity map on X \u2282 Y, it follows that Q(v) = \u03d6(K(v))\u2282 U(v).\n    On the other hand, since d(0, U'(v)) \u2265 t_0 - \u03f5',  the projection \u03d6 is 1/(t_0 - \u03f5')\u2013Lipschitz on U'(v). Therefore, (<ref>) implies\n    \n        U(v) = \u03d6(\u03bd_\u03f5' (K(v)) ) \u2282\u03bd_\u03f5(v) (\u03d6(K(v))) =  \u03bd_\u03f5(v) (Q(v)),\n    \n    proving the first bullet of the lemma.\n    \n    Second, recall from Definition\u00a0<ref> that \u03f5(v) \u2264 r_v / 4. Thus Proposition\u00a0<ref>.(<ref>) implies\n    \n        (U(v)) \u2264(Q(v)) + 2\u03f5(v) \u2264\u03c0/2 + r_v/2 < \u03c0/2 + \u03c0/4 = 3\u03c0/4.\n    \n    \n    Third, observe that \u03d6 is an open map.  Indeed, \n    Y \u2216{0} is homeomorphic to X\u00d7(0,\u221e), and \u03d6 is \n    projection to the first factor, which is an open map. Thus U(v) = \u03d6(U'(v)) is open.\n    \n    Fourth, it follows from <cit.> and the convexity of U'(v)  that U(v) is convex in X. Since U(v) has diameter less than \u03c0, it is uniquely geodesic, hence contractible.\n    \n    Fifth, observe that all of the ingredients in the definition of U(v) are (X)\u2013equivariant. Indeed, the intrinsic radius r_v is invariant under (X), hence the number t_0 = cos(r_v) is as well. Thus the definitions of the sub-cone Z(v), the horoball B(v), and the set K(v) = Z(v) \u2229 B(v) are all (X)\u2013equivariant. The constant \u03f5'(v), defined in (<ref>) is invariant under (X), because both t_0 and \u03f5(v) are. It follows that U(v) = \u03d6(\u03bd_\u03f5' (K(v)) ) is also (X)\u2013equivariant.\n    \n    \n    Recall that in Section\u00a0<ref>, we have defined a simplicial complex \ud835\udca9_T.\n    By Corollary\u00a0<ref>, \ud835\udca9_T coincides with the nerve of the cover of X by the closed sets Q(v)  for v \u2208 (X). By Lemmas\u00a0<ref> and\u00a0<ref>,  the open sets U(v) for v \u2208 (X) also cover X. \n    \n    By analogy with Definition\u00a0<ref>, we define a simplicial complex \ud835\udc9e_T with vertex set X, where vertices v_0, \u2026, v_n \u2208 X span an n\u2013simplex if and only if \u22c2_i=0^n U(v_i)\u2260\u2205.\n    The content of the following lemma is that \ud835\udc9e_T is isomorphic to \ud835\udca9_T.\n     \n    \n    \n    \n    For Roller classes v_0, \u2026,v_n \u2208(X), we have \u22c2_i=0^n U(v_i)\u2260\u2205 if and only if \n    \u22c2_i=0^n Q(v_i)\u2260\u2205. Consequently, the identity map (X) \u2192(X) induces an (X)\u2013equivariant simplicial isomorphism \ud835\udc9e_T  \u2192\ud835\udca9_T.\n    \n    Observe that \u22c2_i=0^n Q(v_i)\u2260\u2205 trivially implies \u22c2_i=0^n U(v_i)\u2260\u2205. \n    For the other direction, we assume \u22c2_i=0^n U(v_i) \u2260\u2205 and aim to show \u22c2_i=0^n Q(v_i)\u2260\u2205. \n    \n    We will argue by induction on n. \n    \n     In the base case, n=1, suppose that U(v_0) \u2229 U(v_1) \u2260\u2205. Since U(v_i) \u2282\ud835\udca9_\u03f5(v_i)(Q(v_i)), and \u03f5(v_i) \u2264\u03f5_0/2 by Definition\u00a0<ref>, it follows that there are points a_i \u2208 Q(v_i) such that d_T(a_0, a_1) < \u03f5_0. But then Lemma\u00a0<ref> implies Q(v_0) \u2229 Q(v_1) \u2260\u2205, proving the base case.\n    \n    For the inductive step, assume that \u22c2_i=0^n U(v_i) \u2260\u2205 and\n    \u22c2_i=0^n-1Q(v_i)\u2260\u2205. We claim that there is a Roller class w \u2208(X) such that \u22c2_i=0^n-1Q(v_i)=Q(w).\n    \n    By Lemma\u00a0<ref>, we have convex subcomplexes _0, \u2026, _n-1\u2282 X, such that Q(v_i) = _i \n    and \u22c2_i=0^n-1Q(v_i) = \u22c2_i=0^n-1_i. By Lemma\u00a0<ref>, the hyperplane \n    collection (_i) is a UBS. Furthermore, since each _i is convex, we have (\u22c2_i) \n    = \u22c2(_i), which is a UBS because \u22c2_i is unbounded. By Lemma\u00a0<ref>, the \n    UBS (\u22c2_i) represents a Roller class w', which means that  \n    Q(w') =  \u22c2_i=0^n-1_i = \u22c2_i=0^n-1Q(v_i). Now, we let w = \u03c8(\u03c6(w')). Then \n    Definition\u00a0<ref> says that w \u2208(X), and Proposition\u00a0<ref>.<ref> says that \n    Q(w) = Q(w') = \u22c2_i=0^n-1Q(v_i), proving the Claim.\n    \n    Next, we claim that Q(v_n)\u2229 Q(w) \u2260\u2205. Since Q(w) = \u22c2_i=0^n-1Q(v_i), this will complete the inductive step and prove the Lemma.\n    \n    Suppose for a contradiction that Q(v_n)\u2229 Q(w) = \u2205. Then, by Lemma\u00a0<ref>, we have\n    _T(Q(v_n),Q(w))>\u03f5_0.  Let \u03f5_2 be as in Definition\u00a0<ref>.\n    Fix a\u2208\u22c2_i=0^n U(v_i) \u2282\u22c2_i=0^n\ud835\udca9_\u03f5(v_i)(Q(v_i)), which ensures that _T(a,Q(v_n))<\u03f5_2.  Since \u03f5(v_i) \u2264\u03f5_2 for each v_i,  \n    Lemma\u00a0<ref> implies _T(a,Q(w))<f(\u03f5_2).  \n    Thus _T(Q(v_n),Q(w))<\u03f5_2+f(\u03f5_2) \u2264\u03f5_0, a contradiction.  This proves the Claim and the equivalence \u22c2_i=0^n Q(v_i)\u2260\u2205\u21d4\u22c2_i=0^n U(v_i)\u2260\u2205.\n    \n    This gives the simplicial isomorphism \ud835\udc9e_T \u2192\ud835\udca9_T. This isomorphism is (X)\u2013equivariant, by Corollary\u00a0<ref> \n    and Proposition\u00a0<ref>.\n    \n    \n     \u00a7.\u00a7 Homotopy equivalence of X and \ud835\udca9_T\n    \n    There is an  homotopy equivalence from  the simplicial complex \ud835\udca9_T to X. \n    By Corollary\u00a0<ref>, \ud835\udca9_T is the nerve of the covering of X by the closed sets Q(v), where v varies over \n    (X).\n    \n    By Proposition\u00a0<ref>, X admits an open covering { U(v) : v\u2208(X) }, with each U(v) a \n    convex, uniquely geodesic subspace of X.  Hence, if v_0,\u2026,v_n\u2208(X), then either \n    \u22c2_i=0^nU(v_i)=\u2205, or \u22c2_i=0^nU(v_i) is contractible. Let \u2112_T be the nerve of this open covering. By the Equivariant Open Nerve Theorem\u00a0<ref>,\n    there is an  homotopy equivalence \u2112_T \u2192 X.\n    \n    As above, let \ud835\udc9e_T be the simplicial complex with one vertex for each v\u2208(X), with v_0,\u2026,v_n spanning an \n    n\u2013simplex whenever \u22c2_i=0^nU(v_i)\u2260\u2205.  Note that \ud835\udc9e_T is not necessarily isomorphic to \u2112_T, since we may have U(v_i)=U(v_j) for some pair v_i,v_j with i\u2260 j.  But \ud835\udc9e_T is \n    homotopy-equivalent to \u2112_T, which can be seen as follows.  The (X)\u2013equivariant assignment \n    v\u21a6 U(v) (i.e. the surjection \ud835\udc9e_T^(0)\u2192\u2112_T^(0)) determines an equivariant simplicial map \ud835\udc9e_T \u2192\u2112_T such that the preimage of each 0\u2013simplex U(v) is the full subcomplex of \ud835\udc9e_T spanned by the set of w \n    with \n    U(v)=U(w).  Since any finite set of such w span a simplex of \ud835\udc9e_T, this preimage is contractible: it is \n    homeomorphic to the cone on the link of any of its vertices.  Hence the map \ud835\udc9e_T \u2192\u2112_T is a homotopy \n    equivalence, by Quillen's fiber theorem (see e.g.\u00a0<cit.>).\n    \n    To conclude, recall that by Lemma\u00a0<ref>, we have an equivariant simplicial isomorphism \ud835\udc9e_T \u2192\ud835\udca9_T. Hence we have a chain of  homotopy equivalences\n    \n        \ud835\udca9_T  \ud835\udc9e_T \u2112_T  X.\n    \n    \n     \u00a7.\u00a7 Cuboid generalization\n    \n    \n    All of the results of this section have a straightforward generalization to the cuboid setting. In the following description, we refer to the notation introduced in Section\u00a0<ref>.\n    \n    Definition\u00a0<ref> generalizes immediately to give a set of maximal \u2113^2 visible Roller classes, namely ^\u03c1(X) \u2282^\u03c1(X). Following Definition\u00a0<ref>, we get a simplicial complex _T^\u03c1 with vertex set ^\u03c1(X), where vertices v_0, \u2026, v_n span an n\u2013simplex if and only if \u22c2_i=1^n Q^\u03c1(v_i) \u2260\u2205. Then, Lemmas\u00a0<ref> and\u00a0<ref> generalize immediately because their proofs are assembled from the results of Section\u00a0<ref>, and we have already checked that those results generalize to cuboids. Thus Corollary\u00a0<ref> generalizes as well, and we learn that _T^\u03c1 is the covering of ^\u03c1 X by the closed sets {Q^\u03c1(v) : v \u2208^\u03c1(X) }.\n    \n    (Recall that Remark\u00a0<ref> outlined an argument that (X) = ^\u03c1(X) for every admissible rescaling \n    \u03c1. It follows that (X) = ^\u03c1(X) as well.  The nerves _T and _T^\u03c1 can then be \n    shown to coincide, as mentioned in Remark\u00a0<ref>. However, we do not use this.)\n    \n    Moving ahead to Section\u00a0<ref>, the results generalize as follows. The existence statement of Lemma\u00a0<ref> extends, with the modification that the constant \u03f5_0 depends on (X) and \u03c1. This is because the proof of Lemma\u00a0<ref> uses the constants \u03bb_0, \u03bb_1 of Lemma\u00a0<ref>, which needs to be replaced by the constants \u03bb_0^\u03c1, \u03bb_1^\u03c1 of Lemma\u00a0<ref>. Lemma\u00a0<ref> extends to cuboids as well, because the proof of that lemma uses combinatorial arguments in combination with the d_X^\u03c1\u2013convexity of cubical convex hulls.\n    Similarly, Lemma\u00a0<ref> extends: its proof works perfectly well in the cuboid metric d_X^\u03c1, once we substitute Lemma\u00a0<ref> for Lemma\u00a0<ref>. As above, the outputs of that lemma depend on both (X) and \u03c1. Combining these ingredients, we can follow Definition\u00a0<ref> to define a thickening constant \u03f5^\u03c1(w) > 0 for every Roller class w. This constant depends only \u03c1 and the ^\u03c1(X)\u2013orbit of w.\n    \n    Proposition\u00a0<ref> extends verbatim to cuboids. Indeed, its proof is a CAT(0) argument that takes place in the Euclidean cone on X, which works equally well in the Euclidean cone on ^\u03c1 X. (The proof also uses Proposition\u00a0<ref>, which works for cuboids.) At the end of the lemma, we get a collection of open sets U^\u03c1(v) for v \u2208^\u03c1(X), which is invariant under ^\u03c1(X).\n    \n    By analogy with Definition\u00a0<ref>, we define a simplicial complex \ud835\udc9e_T^\u03c1, where the simplices are defined by intersection patterns of the open sets U(v_i) for v_i \u2208^\u03c1(X). Now, Lemma\u00a0<ref> extends verbatim to give an ^\u03c1(X)\u2013equivariant simplicial isomorphism \ud835\udc9e_T^\u03c1\u2192_T^\u03c1. The proof of Theorem\u00a0<ref> also extends verbatim, because all of its ingredients extend. Thus we obtain the following cuboid extension of \n    Theorem\u00a0<ref>:\n    \n    \n    Let \u03c1 be a G\u2013admissible hyperplane rescaling of X. Then there is a  homotopy homotopy equivalence _T^\u03c1\u2192^\u03c1 X. \n    \n    \n    \u00a7 PROOF OF THE MAIN THEOREMS\n    \n    \n     In this section, we prove Theorem\u00a0<ref>, which was stated in the Introduction. That is, we construct the following commutative diagram of  homotopy equivalences:\n     X       ^       X  \n       _      _   \n          _ X      \n    \n    The homotopy equivalence X \u2192 X will be proved in Proposition\u00a0<ref>, while the homotopy equivalence X \u2192 X will be proved in Corollary\u00a0<ref>. At the end of the section, we check that all of the arguments extend to cuboids, proving Theorem\u00a0<ref>.\n    \n    To prove Corollary\u00a0<ref>, we first study a subcomplex of X.  \n    \n    \n    Let X be the  subcomplex of X consisting of all simplices corresponding to chains \n    v_0\u2264\u22ef\u2264 \n    v_n such that v_i\u2208(X) for 0\u2264 i\u2264 n. \n    \n    For each v\u2208(X), let \u03a3_v be the connected subcomplex of X consisting of all simplices \n    corresponding to \n    chains v_0\u2264\u22ef\u2264 v_n for which:\n    \n      *  each v_i\u2208(X);\n         \n      * v_n = v.\n    \n    \n     \u00a7.\u00a7 Closed cover of X\n    \n    \n    Next, we show that the complexes \u03a3_v yield a closed covering of X, and use this covering to build a nerve.\n    \n    \n    The set {\u03a3_v:v\u2208(X)} is a closed covering of X.  Moreover, for all \n    v,v_0,\u2026,v_n\u2208(X), we have the following:\n    \n      * \u03a3_v is finite.\n         \n      * \u03a3_v_i=\u03a3_v_j only if v_i=v_j.\n         \n      * \u22c2_i=0^n\u03a3_v_i is either empty or contractible.\n         \n      *  For every g \u2208(X), we have g \u03a3_v = \u03a3_gv.\n    \n    Let w \u2208(X).  Then there exists v \u2208(X) with w \u2264 v, and hence w \u2208\u03a3_v^(0).  Thus \n    {\u03a3_v:v\u2208(X)} is a closed covering of X.\n    \n    Let v be a (visible) Roller class. By Corollary\u00a0<ref>, there are finitely many other classes w such that w \u2264 v. This proves \n    assertion\u00a0<ref>. \n    \n    \n    \n    Now suppose that v_i,v_j are (visible) Roller classes satisfying \u03a3_v_i=\u03a3_v_j.  Since v_j \u2208\u03a3_v_i, \n    we have v_j\u2264 v_i.  Likewise, v_i \u2264 v_j.  Hence v_i=v_j, proving assertion\u00a0<ref>.\n    \n    Next, let v_0,\u2026,v_n\u2208(X) and suppose that \u22c2_i=0^n\u03a3_v_i\u2260\u2205.  First, note that \n    \u03a3_v_i=v_i L_v_i, where L_v_i (the link of v_i in \u03a3_v_i) is a subcomplex of X and  denotes the simplicial \n    join operation.   Hence \u03a3_v_i is topologically a cone, and is thus contractible.\n    \n    For each i, let \ud835\udcb1_i be a UBS representing v_i (recall Definition\u00a0<ref>).  Then \n    \u22c2_i=0^n\ud835\udcb1_i is unidirectional and contains no facing triple, since those properties hold for each \ud835\udcb1_i and are inherited by subsets.  Second, \u22c2_i=0^n\ud835\udcb1_i is inseparable, because each \ud835\udcb1_i is.\n    \n    Now, if u \u2208\u22c2_i=0^n\u03a3_v_i is a 0\u2013simplex, then u \u2264 v_i for all i, so \n    u is represented by a UBS of the form \u227c\u22c2_i=0^n\ud835\udcb1_i.  \n    Hence \u22c2_i=0^n\ud835\udcb1_i is infinite. Combined with the above discussion, this shows that \n    \u22c2_i=0^n\ud835\udcb1_i is a UBS.  Let v be the corresponding Roller class. Since \u227c\u22c2_i=0\ud835\udcb1_i, we have u \u2264 v.  \n    \n    Since each such u is \u2113_2\u2013visible, the set of visible Roller classes w with w\u2264 v is nonempty.  Hence there is a unique Roller class m such that m\u2264 v, and m \n    is \u2113_2\u2013visible, and m is \u2264\u2013maximal with those properties, by Lemma\u00a0<ref> and Definition\u00a0<ref>.  Since each u\u2208\u22c2_i=0^n\u03a3_v_i satisfies u\u2264 m\u2208 X, there is a subcomplex L\u2282 X such that \u22c2_i=0^n\u03a3_v_i=m\u22c6 L, so \u22c2_i=0^n\u03a3_v_i is contractible in X.\n    \n    \n    Finally, statement <ref> follows from the equivariance of (X) and the partial order \u2264.\n    \n    Let \ud835\udca9_ be the nerve of the closed covering {\u03a3_v:v\u2208(X)} of X.  By \n    Lemma\u00a0<ref>.<ref>, \ud835\udca9_ has vertex-set (X), \n    and v_0,\u2026,v_n span an n\u2013simplex if and only if \n    \u22c2_i=0^n\u03a3_v_i\u2260\u2205. By \n    Lemma\u00a0<ref>.<ref>, (X) acts by simplicial automorphisms on \ud835\udca9_.\n    \n    Let v_0,\u2026,v_n\u2208(X).  Then \n    \n        \u22c2_i=0^n\u03a3_v_i\u2260\u2205 \u21d4 \u22c2_i=0^nQ(v_i)\u2260\u2205.\n    \n    Consequently, there is an (X)\u2013equivariant simplicial isomorphism \ud835\udca9_\u2192\ud835\udca9_T.\n    \n    Suppose that there exists a\u2208\u22c2_i=0^nQ(v_i).  Then Lemma\u00a0<ref> says \u03c8(a) \u2264 v_i for all i.  Hence, by Definition\u00a0<ref>, we have \u03c8(a)\u2208\u03a3_v_i for all i.  \n    \n    Conversely, suppose that there exists a vertex (i.e. a Roller class) w\u2208\u22c2_i=0^n\u03a3_v_i.  Then w \u2264 v_i \n    for all i, by definition.  Hence, by Lemma\u00a0<ref>, Q(w)\u2282 Q(v_i) for all i, from which it \n    follows that \u03c6(w)\u2208\u22c2_i=0^nQ(v_i). \n    \n    Finally, the simplicial isomorphism \ud835\udca9_\u2192\ud835\udca9_T comes from identifying the 0\u2013skeleta of \ud835\udca9_  and \ud835\udca9_T with (X).\n    \n    \n     \u00a7.\u00a7 Homotopy equivalence between X and X\n    \n    We can now assemble the proof that X is homotopy equivalent to X. We do this in two propositions:\n    \n    \n    \n    There is an  homotopy equivalence  X \u2192 X.\n    \n    Consider the covering {\u03a3_v:v\u2208(X)} of X by the subcomplexes \u03a3_v, coming from \n    Lemma\u00a0<ref>.  By Definition\u00a0<ref>, the nerve of this cover is  \n    \ud835\udca9_.  By Lemma\u00a0<ref>.<ref>, the intersection of any finite \n    collection of the \u03a3_v is either empty or contractible.  \n    Hence, by the Equivariant Simplicial Nerve Theorem\u00a0<ref>, there is an  homotopy equivalence X \u2192\ud835\udca9_.\n    \n    By Lemma\u00a0<ref>, there is a simplicial isomorphism \ud835\udca9_\u2192\ud835\udca9_T. Finally, by Theorem\u00a0<ref>, there is an  homotopy equivalence \ud835\udca9_T \u2192 X. \n    Putting it all together, we obtain a chain of  homotopy equivalences\n    \n        X \ud835\udca9_\ud835\udca9_T   X.\n    \n    The inclusion X \u21aa X is an (X)\u2013equivariant homotopy equivalence. Its homotopy inverse is an  deformation retraction X \u2192 X.\n    \n    First, observe that since X is (X)\u2013invariant by Definition\u00a0<ref>, and the set (X) is (X)\u2013invariant by Definition\u00a0<ref>, the inclusion  X \u21aa X is (X)\u2013equivariant.\n    \n    In the remainder of the proof, we will construct a deformation retraction X \u2192 \n    X that serves as a homotopy inverse to the inclusion X \u21aa X. \n    \n    Let w be an invisible Roller class (viewed as a 0\u2013simplex of X). \n     By Lemma\u00a0<ref>, w is not minimal, so there exists a \n    minimal Roller class m with m < w.  Let n(w)\u22651 be the maximum length of a \n    chain of the form m < \u22ef < w with m a minimal Roller class. \n    \n    Let D be the maximal number such that there exists an invisible Roller class w with n(w)=D. By \n    Remark\u00a0<ref>, every simplex in X has at most X vertices, hence D \u2264 X.\n    \n    \n    Let I_n be the set of invisible Roller classes v with n(v)=n.\n    Then \n    \n        ( X)^(0)= ( X)^(0)\u2294_n=1^ DI_n.\n      \n    Let ( X)_0= X.  For 1\u2264 N\u2264  D, let ( X)_N be the subcomplex spanned by \n    ( X)^(0)\u2294_n=1^NI_n, so\n    \n        X = ( X)_0 \u2282( X)_1\u2282\u22ef\u2282( X)_D= X.\n    \n    \n    Given a Roller class w and a positive integer n \u2264 D, define the open starst_n(w) to be the union of {w} and all of the \n    open simplices of ( X)_n whose \n    closures contain w.  Let St_n(w) be the union of all (closed) simplices of \n    ( X)_n containing w.  Define the  (downward) linkL_n(w)=St_n(w) \u2216 st_n(w).\n    \n    \n    For w \u2208  I_n, we have L_n(w) \u2282 ( X)_n-1.\n    \n    \n    Let w\u2208 I_n \u2282 ( X)_n.  Let \u03c3 be a maximal simplex of ( X)_n \n    containing w and lying in ( X)_n.  Let v_0<\u22ef<v_m be the \n    corresponding chain, with w=v_i for some i.  Since n(w)=n, the chain \n    v_0 <\u22ef<v_i has length at most n. \n    \n    First, consider v_j for j<i.  If v_j is visible, then v_j\u2208( X)_0\u2282( X)_n-1.  If \n    v_j is invisible, then since v_0 <\u22ef < v_j is a chain of length less than \n    n, and \u03c3 is maximal, n(v_j)<n, hence v_j\u2208( X)_n-1.  \n    \n    Next, consider v_j for j>i.  If v_j is visible, then v_j\u2208( X)_0\u2282( X)_n-1.  If \n    v_j is invisible, then v_j\u2209I_n, since there is a chain \n    v_0 <\u22ef< v_j of length more than n = n(v_i), which would contradict the containment \u03c3\u2282 ( X)_n.\n    \n    Hence the simplex \u03c3' corresponding to the chain \n    v_0<\u22ef<v_i-1<v_i+1<\u22ef <v_m lies in ( X)_n-1.  \n    This proves the claim.\n    \n    Contractibility of links:  Now, fix w \u2208  I_n. We will show that L_n(w) is \n    contractible.  Establishing this involves several claims, leading up to Claim\u00a0<ref>.\n    \n    \n    For a minimal Roller class with m\u2208 L_n(w), let St(m) = \u22c3_n St_n(m) denote the star of m in X.  Then:\n    \n      * L_n(w)\u2229 St(m) is topologically a cone with cone-point m.\n         \n      * L_n(w) is the union of the subcomplexes L_n(w)\u2229 St(m), as m varies over  the finitely many minimal Roller classes with \n    m \u2264 w.\n    \n    \n    Let L(m) denote the link of m in X. Then, by definition, St(m) decomposes as a join: St(m)=m  L(m).  Moreover, m\u2208 L_n(w), so \n    \n        L_n(w)\u2229 St(m)=  L_n(w) \u2229 (m  L(m)) = m (L_n(w)\u2229 L(m)),\n    \n     which proves the first assertion.\n    \n    By Corollary\u00a0<ref>, there are finitely many minimal Roller classes m \u2264 w. For each such m, we clearly have L_n(w)\u2229 St(m)\u2282 L_n(w).  Conversely, if v\u2208 L_n(w), \n    then there exists a minimal class m such that m \u2264 v and m \u2264 w, hence v\u2208 L_n(w)\u2229 St(m).  This proves  the claim.\n    \n    \n    \n    Let m_0, \u2026, m_k be distinct minimal Roller classes with m_i < w for all i.  Then \u22c2_i=0^k St(m_i) \u2229 L_n(w) is  topologically a cone, and is in particular nonempty.\n    \n    \n    By \n    Lemma\u00a0<ref>, each m_i is \u2113^2\u2013visible, so we can choose CAT(0) geodesic rays \u03be_i:[0,\u221e)\u2192 X such \n    that \u03be_i(0)=\u03be_j(0) for all i, and such that \u03be_i(\u221e)=\u03c6(m_i) for each i.  \n    For each i, define \u2133_i=(\u03be_i), a UBS representing m_i.\n    Since m_i is minimal \n    for all i, Lemma\u00a0<ref> implies the intersection \u2133_i\u2229\u2133_j is finite whenever i \u2260 j.  \n    Moving the common basepoint \u03be_1(0) = \u2026 = \u03be_k(0) ensures that \u2133_i\u2229\u2133_j=\u2205 for all i \n    \u2260 j, and that each \u2133_i is the inseparable closure of an infinite descending chain.  Indeed, by moving the \n    basepoint across each of the finitely many hyperplanes appearing in some \u2133_i\u2229\u2133_j, we arrange the \n    first property, and the inseparable closure property holds by Lemma\u00a0<ref>, Lemma\u00a0<ref>, \n    and minimality of the m_i.\n    \n    Let \ud835\udc9c be a UBS representing w. Since m_i \u2264 w for all i, we have \u2133_i \u227c\ud835\udc9c for each i.\n    Thus it is readily checked that \u22c3_i=0^k\u2133_i is a UBS. \n    \n    Consider a pair of indices i\u2260 j. Then since \u22c3_i=0^k\u2133_i is unidirectional and \u2133_i \u2229\u2133_j = \u2205,  \n    any pair of hyperplanes  \u0125_i \u2208\u2133_i and \u0125_j \u2208\u2133_j must cross. Indeed, \u0125_i \u2260\u0125_j, and \u0125_i is the base of a \n    chain in _i, and \u0125_j is the base of a chain in _j.  If \u0125_i, \u0125_j did not cross, then the union of this pair of chains \n    would violate unidirectionality of _i\u2229_j. \n    \n    Thus, by Lemma\u00a0<ref>, the convex hull of \n    \u22c3_i=0^k\u03be_i is isometric to \u220f_i=0^kY_i, where Y_i is the \n    cubical convex hull of \u03be_i.  For each t>0, let x_t be the image of (\u03be_0(t),\u2026,\u03be_k(t)) under the isometric \n    embedding \u220f_i=0^kY_i\u2192 X.  Then segments joining the basepoint to the points x_t converge uniformly on compact sets to a geodesic ray representing a point b\u2208 X with the property \n    that \u03c8(b)=u is \n    represented by = _i=0^k\u2133_i.  Hence u is visible by Definition\u00a0<ref>.  Moreover, m_i \u2264 u \u2264 w \n    for all i. To complete the proof of the claim, we will show that u is the promised cone point of \u22c2_i=0^k St(m_i) \u2229 L_n(w).\n    \n    For each i, the fact that  m_i \u2264 u implies u\u2208 St(m_i).  On the other hand, u\u2260 w since u is visible but w is \n    not.  Thus u < w, so u\u2208 L_n(w).  Thus far, we have shown that \u22c2_i=0^k St(m_i) \u2229 L_n(w) \u2260\u2205. \n    Now, suppose v\u2208 L_n(w)\u2229 St(m_i) for all i.  To complete the claim, we must show that u and v are \u2264\u2013comparable. By definition, m_i \u2264 v for all i, hence \u2133_i \u227c for all i, where  is a UBS representing . Therefore, = _i=0^k\u2133_i \u227c, which implies u \u2264 v. Thus \u22c2_i=0^k St(m_i) \u2229 L_n(w) is a cone with cone point u, completing Claim\u00a0<ref>.\n    \n    \n    L_n(w) is contractible. \n    \n    \n    By Claim\u00a0<ref>, L_n(w) is a finite union of subcomplexes L_n(w)\u2229 St(m), where m varies over the minimal \n    Roller classes satisfying m \u2264 w.  By Claim\u00a0<ref>, any collection of the L_n(w)\u2229 St(m) \n    intersect in a contractible subcomplex.  Hence, by the Simplicial Nerve Theorem\u00a0<ref>, \n    L_n(w) is homotopy equivalent to the nerve of this covering. (We do not need to check equivariance at this step.) But, since any collection of the L_n(w)\u2229 St(m) \n    have nonempty intersection, this nerve is a finite \n    simplex and thus contractible.  Hence L_n(w) is contractible.\n    \n    \n    \n    Conclusion:  We have shown that the following hold for 1\u2264 \n    n\u2264 D:\n    \n      *  Claim\u00a0<ref> says that for each vertex v\u2208( X)_n \u2216 ( X)_n-1, the link in ( X)_n of \n    v is contained in ( X)_n-1;\n    \n      *  Claim\u00a0<ref> says that for each vertex v\u2208( X)_n \u2216 ( X)_n-1, the link in ( X)_n of \n    v is contractible.\n    \n    The first fact says that the open stars st_n(v) of the vertices \n    v\u2208( X)_n \u2216 ( X)_n-1 are pairwise disjoint.  Together with the second \n    fact, this implies that ( X)_n is homotopy equivalent to \n    \n        ( X)_n-1  =   ( X)_n \u2216( \u22c3_v\u2208( X)_n^(0)\u2216 ( X)_n-1^(0)st_n(v) ).\n    \n    It follows that we can independently deformation retract the various open stars st_n(v) to the corresponding links L_n(v) to get a deformation retraction ( X)_n\u2192( X)_n-1 that is a homotopy inverse for the inclusion.\n    Composing these retractions (for 1\u2264 n\u2264 D) gives the desired deformation retraction X \u2192 X. \n    \n    Finally, recall from the discussion after Definition\u00a0<ref> that every homotopy inverse of a (X)\u2013equivariant inclusion X \u2192 X  is itself an  homotopy equivalence. Thus we have an  deformation retraction X \u2192 X.\n    \n    \n    \n    Combining Propositions\u00a0<ref> and\u00a0<ref> gives a proof of half of Theorem\u00a0<ref>.\n    \n    \n    \n    There is an  homotopy equivalence X \u2192 X.\n    \n    \n     \u00a7.\u00a7 Homotopy equivalence between X and X\n    \n    \n    \n    The following proposition proves the homotopy equivalence of the simplicial boundary and the simplicial Roller boundary, completing the proof of Theorem\u00a0<ref>.\n    \n    \n    There is an  homotopy equivalence X \u2192 X.\n    \n    Let \u03c3 be a maximal simplex of X, corresponding to a class [_\u03c3] \u2208\ud835\udcb0\u212c\ud835\udcae(X). Then, by Theorem\u00a0<ref>, v_\u03c3 = ([_\u03c3]) is a maximal Roller class.\n    \n    Let \ud835\udc9c be the nerve of the covering of X by  maximal simplices.  Now, since any \n    collection of maximal simplices intersect in \u2205 or a simplex, and simplices are contractible, \n    the Equivariant Simplicial Nerve Theorem\u00a0<ref>\n    provides an  homotopy equivalence X \u2192\ud835\udc9c.\n    \n    Now, for each maximal Roller class v, consider the subcomplex \u03a5_v of X consisting of all simplices \n    corresponding to chains in which v is the maximal element.  Note that the set of such \u03a5_v is a cover of X.  \n    \n    A simpler version of the proof of Lemma\u00a0<ref> implies that for all finite collections \n    { v_1,\u2026, v_n } of maximal Roller classes, \u22c2_i=1^n\u03a5_v_i is empty or contractible.  Indeed, suppose this \n    intersection is nonempty.  Exactly as in the proof of Lemma\u00a0<ref>, each v_i corresponds \n    to a commensurability class [\ud835\udcb1_i] of UBSes whose intersection is a UBS \ud835\udcb1, which in turn determines a \n    \u2264\u2013maximal Roller class v such that v\u2264 v_i for all i.  As in Lemma\u00a0<ref>, \n    this implies that \u22c2_i=1^n\u03a5_v_i is a cone with cone-point v.  (In the context of \n    Lemma\u00a0<ref>, there is an additional step to check that v is visible, but that is \n    unnecessary here since we are working in all of X rather than in ^\u2222 X.)\n    \n    Let \u212c be the nerve of the covering of \n    X by the subcomplexes \u03a5_v, as v varies over the maximal Roller classes. Observe that the assignment v \u21a6\u03a5_v is a bijection from the set of maximal Roller classes to \u212c^(0). By Theorem\u00a0<ref>, as above, there is an  homotopy equivalence X \u2192\u212c.\n    \n    \n    To conclude, we will show that \ud835\udc9c and \u212c are equivariantly isomorphic.  The vertex set of \ud835\udc9c is the set of maximal simplices \n    \u03c3 of X, so we may define a function f \ud835\udc9c^(0)\u2192\u212c^(0) via the composition\n    \n        \u03c3\u21a6 [_\u03c3] \u21a6 v_\u03c3\u21a6\u03a5_v_\u03c3,\n    \n    where the middle arrow is the equivariant map  of Theorem\u00a0<ref>.  Since both \u03c3 and v_\u03c3 are maximal by definition, the map f is a bijection by Theorem\u00a0<ref>.<ref>. Every arrow is (X)\u2013equivariant by construction.\n    \n    \n    To extend f to a simplicial isomorphism f \ud835\udc9c\u2192\u212c, it suffices to check that for all maximal simplices \n    \u03c3_0,\u2026,\u03c3_n of X, we have \u22c2_i=0^n\u03c3_i\u2260\u2205 if and only if \n    \u22c2_i=0^n\u03a5_v_\u03c3_i\u2260\u2205; that this is sufficient follows since \ud835\udc9c is the nerve of the covering of X by maximal simplices and \u212c is the nerve \n    of the covering of X by the subcomplexes \u03a5_v.  \n    \n    Suppose that \u22c2_i=0^n\u03c3_i\u2260\u2205.  Let \ud835\udcb1_i be a UBS representing \u03c3_i.  So, \ud835\udcb1_i also represents the corresponding Roller class f(\u03c3_i).  Let \n    \ud835\udcb1=\u22c2_i=0^n\ud835\udcb1_i, and note that \ud835\udcb1 is infinite.  Then by Remark\u00a0<ref>, \ud835\udcb1 is an \u2113^1\u2013visible UBS. Hence \n    \ud835\udcb1 represents a Roller class w such that w\u2264 v_\u03c3_i for all i.  Thus \n    \u22c2_i=0^n\u03a5_v_\u03c3_i contains w.  The converse is similar.  Hence f extends to an isomorphism, and \n    it follows that \n    \n        X \ud835\udc9c\u212c X\n    \n    is an  homotopy equivalence.\n    \n    \n     \u00a7.\u00a7 Cuboid generalization\n     We can now conclude the proof of \n    Theorem\u00a0<ref>.\n    \n    \n    Let G be a group acting on X by cubical automorphisms, and let \u03c1 be a G\u2013admissible rescaling of X, with rescaled metric d_X^\u03c1. Recall from Definition\u00a0<ref> that the action of G factors through ^\u03c1(X). In Section\u00a0<ref>, we have checked that all of the constructions and results about the Tits boundary X also apply to ^\u03c1 X, the Tits boundary of the rescaled metric (X, d_X^\u03c1), in a G\u2013equivariant way.\n    \n    In Section\u00a0<ref>, we have checked that the constructions of open and closed nerves for X also work for ^\u03c1 X. In particular, by Theorem\u00a0<ref>, there is a  homotopy equivalence between ^\u03c1 X and the nerve\n     _T^\u03c1 of the closed cover  {Q^\u03c1(v) : v \u2208^\u03c1(X)}.\n     \n    Now, we inspect the results of this section. In Lemma\u00a0<ref>, one simply needs to replace (X) by ^\u03c1(X) and (X) by ^\u03c1(X); the same exact proof then applies. \n    In Definition\u00a0<ref>, replacing (X) by ^\u03c1(X) yields a nerve _^\u03c1. Then the proof of Lemma\u00a0<ref> extends verbatim to give an ^\u03c1(X)\u2013equivariant simplicial isomorphism _^\u03c1\u2192_T^\u03c1. Proposition\u00a0<ref> extends verbatim, because its proof is a top-level assembly of previous results. Similarly, Proposition\u00a0<ref> extends immediately to cuboids, because its proof is a topological argument about simplicial complexes. (The proof of Proposition\u00a0<ref> does use several lemmas from Sections\u00a0<ref> and\u00a0<ref>, particularly in Claim\u00a0<ref>, but all of those lemmas have been extended to cuboids. Compare Remark\u00a0<ref>.) Combining the cuboid versions of Propositions\u00a0<ref> and\u00a0<ref> gives a  homotopy equivalence X \u2192^\u03c1 X.\n    \n    Finally, note that the  homotopy equivalence X \u2192 X established in Proposition\u00a0<ref> is also a  homotopy equivalence, because G acts by cubical automorphisms. Thus we have both of the  homotopy equivalences claimed in the theorem.\n    amsalpha"}