{"entry_id": "http://arxiv.org/abs/2303.07092v1", "published": "20230313132311", "title": "Harris' criterion and Hardy inequalites on graphs", "authors": ["Simon Murmann", "Marcel Schmidt"], "primary_category": "math.FA", "categories": ["math.FA", "math.MG"], "text": "\n\n\n\n\n\n\nInstitut f\u00fcr Mathematik, Friedrich-Schiller-Universit\u00e4t Jena, 07743 Jena, Germany. simon.murmann@uni-jena.de \n\n\n\nMathematisches Institut, Universit\u00e4t Leipzig, 04109 Leipzig, Germany. marcel.schmidt@math.uni-leipzig.de \n\n\nHarris' criterion and Hardy inequalites on graphs\n    Marcel Schmidt\n    \n=================================================\n\n\n\n\n\n\nIn this paper we give a version of Harris' criterion for determining H^1,p_0 within H^1,p on discrete spaces. Moreover, we provide a converse via Hardy inequalities involving distances to metric boundaries.   \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u00a7 INTRODUCTION\n\n\nSobolev spaces can be defined over various geometric spaces that admit a suitable notion of weak derivatives. Among them are Riemannian manifolds, discrete graphs, metric graphs and fractals - just to name a few. We are mostly interested in rough geometries, hence  this text focuses on first order Sobolev spaces.  Given a geometric space X as discussed above the first order Sobolev spaces come in pairs: \n\n\n \n  * H^1,p(X) - the space of weakly differentiable L^p-functions with gradient in L^p.\n \n  * H_0^1,p(X) - the closure of compactly supported H^1,p(X)-functions (or even smoother functions) in H^1,p(X).\n\n\nTypically H_0^1,p(X) can be thought of being the space of those functions in H^1,p(X) that vanish at 'the boundary' of X, in the sense that their trace is zero. While this statement can be made precise in great generality by choosing an appropriate notion of boundary and  trace functional, in general it is still hard to determine when a function from H^1,p(X) actually belongs to H^1,p_0(X). On domains in Euclidean space  there is a convenient criterion due to Harris: Let \u2205\u2260\u03a9\u2286^n be a bounded domain and let\n\n\n    \u03b4\u03a9\u2192,   \u03b4(x) =  dist(x,\u2202\u03a9)\n\n\ndenote the distance to the boundary. Then for 1 < p < \u221e  a function f \u2208 H^1,p(\u03a9) with f/\u03b4\u2208  L^p(\u03a9) belongs to H^1,p_0(\u03a9), see <cit.>. A converse to this result holds true under some regularity assumptions on \u2202\u03a9 (e.g. Lipschitz boundary is sufficient). Regularity is used to establish a Hardy inequality with weight \u03b4^-p, which implies f/\u03b4\u2208 L^p(\u03a9) for f \u2208 H^1,p_0(\u03a9), see <cit.> and  also <cit.> for a more recent account on the subject.  Extensions of these results weakening the assumption f/\u03b4\u2208 L^p(\u03a9)  have recently gained some attention, see  <cit.>. In this paper we extend Harris' criterion and its converse to discrete graphs. \n\nIt turns out that precisely two properties of \u03b4 are required to establish Harris' criterion: One needs |\u2207\u03b4| \u2264 1, which is a consequence of Rademacher's theorem, and that for all \u03b5 > 0 closed bounded subsets of {x \u2208\u03a9|\u03b4(x) \u2265\u03b5} are compact in \u03a9. On graphs the first property is achieved by considering intrinsic metrics, while the second property will remain a mild assumption on the metric. Our discrete version of Harris' criterion is contained in Theorem\u00a0<ref> and Corollary\u00a0<ref>. \n\nFor the converse to Harris' criterion we need to establish a Hardy inequality with respect to the distance to the boundary. Recently Hardy inequalities on discrete spaces have recieved quite some attention, see <cit.>.  We rely on some methods developed in <cit.> to obtain a Hardy inequality that yields the  converse to Harris' criterion in the discrete setting, see Theorem\u00a0<ref>, Corollary\u00a0<ref> and Corollary\u00a0<ref>. The  assumption  we have to make is some form of superharmonicity of the distance to the boundary. This is similar to the situation on Euclidean spaces, in which case superharmonicity of \u03b4 is related to convexity of the domain \u03a9. We refer to <cit.> for how superharmonicity is employed to prove Hardy inequalities and how this is related to convexity of \u03a9 when considering \u03b4. That the convexity of \u03a9 can be replaced by regularity of the boundary \u2202\u03a9 is due to the fact that close to the boundary \u03b4 is equivalent to another superharmonic distance function as long as \u2202\u03a9 is sufficiently regular, see e.g. <cit.>. It seems hopeless to extend this geometric reasoning to discrete spaces and hence we use superharmonicity  as an assumption. \n\n\n\n\n\nIn this text we discuss discrete graphs but our results are valid in  more general situations. More precisely, our methods should yield versions of Harris' criterion  on regular Dirichlet spaces with suitable intrinsic metrics as in <cit.> (in this case p = 2) and on suitable metric measure spaces with p-Cheeger energies as in <cit.>.  In particular, the aforementioned Riemannian manifolds, metric graphs and some fractals are included in these settings.   Hardy inequalities  with respect to the distance to the boundary for a large class of linear local operators  were recently obtained <cit.> and our results may help to establish them for certain non-local  operators as well. \n\n\nWe chose to focus on discrete graphs for a couple of reasons: The discreteness of the underlying space removes the need to discuss local regularity issues and within our framework  there is an easy explicit description of H^1,p(X).  For regular Dirichlet spaces, which are  abstract versions of H^1,2_0(X)-spaces, there are constructions of H^1,2(X)-spaces via so-called reflected Dirichlet spaces, see <cit.>. Local regularity issues and the use of reflected Dirichlet spaces make technical details more lengthy but do not add insights on which type of results we could expect.  In contrast to this simplification, the non-local nature of discrete gradients and Laplacians makes proving Harris' criterion and Hardy inequalites more involved when it comes to certain estimates. This is due to the lack of a chain rule. Overcoming these difficulties in the discrete setting possibly paves the way for other non-local situations, e.g. fractional Laplace-type operators on various spaces. \n\n\nParts of this paper are based on SM Bachelor's thesis, whose main result is a preliminary version of Corollary\u00a0<ref>.\n\n\nAcknowledgements. M.S. thanks Florian Fischer and Matthias Keller for inspring discussions about Hardy inequalities. Moreover, M.S. acknowledges financial support of the DFG within the priority programme 'Geometry at Infinity'.\n\n\n\n\u00a7 SET UP AND  MAIN RESULTS\n\n\nLet X \u2260\u2205 be a countable set equipped with the discrete topology. Let m  X \u2192 (0,\u221e). We abuse notation and also view m as a measure on all subsets of X by \n\n\n    m(A) = \u2211_x \u2208 A m(x),    A \u2286 X.\n\n\nLet 1 \u2264 p < \u221e. The discrete Lebesgue spaces are given by\n\n\n    \u2113^p(X,m) = {f  X \u2192|\u2211_x \u2208 X |f(x)|^p m(x) < \u221e}\n\n\nequipped with the norm\n\n\n    f_p = (\u2211_x \u2208 X |f(x)|^p m(x))^1/p.\n\n\nThe space of bounded functions is denoted by \u2113^\u221e(X).  We write C(X) for all real-valued functions on X. Due to X being discrete the support of f \u2208 C(X) is given by supp f = {x \u2208 X | f(x) \u2260 0} and we write C_c(X) for all real valued functions of finite support.  For f,g \u2208 C(X) we let f \u2227 g = min{f,g} and f \u2228 g = max{f,g}, which are defined pointwise.\n\nA weighted graph on X is a symmetric function b  X \u00d7 X \u2192 [0,\u221e) such that b(x,x) = 0 and   \n\n\n    (x) := \u2211_y \u2208 X b(x,y) < \u221e\n\n\nfor each x \u2208 X. Two points x,y \u2208 X are said to be connected by an edge if  b(x,y) > 0. In this case, we write x \u223c y. The graph b is called locally finite if for each x \u2208 X the set of its neighbors \n\n\n    {y \u2208 X | x \u223c y}\n\n\nis finite. A path connecting x,y \u2208 X is a finite  sequence \u03b3 = (x_0,\u2026,x_n) in X with  x = x_0 \u223c x_1 \u223c\u2026\u223c x_n = y. The graph b is called connected if all x,y \u2208 X are connected by a path. \n \n\nThe formal p-Laplacian is the nonlinear operator \u2112\u2131\u2192 C(X) with domain\n\n\n    \u2131 = \u2131_p = {f \u2208 C(X) |\u2211_y \u2208 X b(x,y) |f(x) - f(y)|^p-1 < \u221e for all  x \u2208 X},\n\n\non which it acts by\n\n\n    \u2112 f(x) = 1/m(x)\u2211_y \u2208 X b(x,y) (f(x) - f(y))|f(x) - f(y)|^p-2 .\n\n\nHere we use the convention 0 /0 = 0, which may occur in the definition of \u2112 whenever 1 \u2264 p < 2. Note that \u2113^\u221e(X) \u2286\u2131_p due to the summability condinition on b. \n \nThe p-energy functional is given by\n\n\n    C(X) \u2192 [0,\u221e],   (f) = 1/p\u2211_x,y \u2208 X b(x,y) |f(x) - f(y)|^p.\n\n\nFor f \u2208 C(X) we define the norm of the discrete p-gradient by\n\n\n    |\u2207 f|  X \u2192 [0,\u221e],    |\u2207 f|(x) = (1/m(x)\u2211_y \u2208 X b(x,y) |f(x) - f(y)|^p)^1/p.\n\n\nClearly, the energy and the gradient are related through the formula\n\n\n    (f) = 1/p\u2211_x \u2208  X |\u2207 f|^p(x) m(x).\n\n\nWe denote the space of functions of finite p-energy by \n\n\n    = {f \u2208 C(X) |\u2211_x,y \u2208 X b(x,y)|f(x) - f(y)|^p < \u221e}\n \n\nand write \n\n\n    H^1,p(X,m) = \u2229\u2113^p(X,m)\n\n\nfor the corresponding first order discrete Sobolev space. It is a Banach space when equipped with the norm \u00b7_H^1,p(X,m) defined by \n\n\n    f_H^1,p(X,m)^p = \ud835\udcac(f) + f^p_p.\n\n\nWe write H_0^1,p(X,m) for the closure of C_c(X) in H^1,p(X,m). \n\nThe main goal of this paper is to characterize the space H_0^1,p(X,m) within H^1,p(X,m). To this end we employ the geometry induced by certain metrics that are compatible with the gradient. They are discussed next.\n\nA pseudo metric on X is a symmetric function \u03c3 X \u00d7 X \u2192 [0,\u221e) satisfying the triangle inequality. It is called p-intrinsic if \n\n\n    1/m(x)\u2211_y \u2208 X b(x,y) \u03c3(x,y)^p \u2264 1\n\n\nfor every x \u2208  X. The most important feature of intrinsic pseudo metrics is the following Rademacher type result: If \u03c3 is a p-intrinsic metric and f  X \u2192 is L-Lipschitz with respect to \u03c3, then |\u2207 f| \u2264 L. \n\n\n\nIn the case p = 2 intrinsic metrics were introduced in <cit.> for regular Dirichlet forms mimicking the property that 1-Lipschitz functions on Riemannian manifolds have distributional gradient bounded by 1. We refer to <cit.> for their use on graphs.  On spaces with a local Laplacian  (e.g. on Riemnnian manifolds) the norm of the gradient does not depend on p. In this case, one intrinsic metric can be employed for for all 1 \u2264 p < \u221e. In the discrete setting (and other non-local settings as well) intrinsic metrics may depend on the choice of p. \n\n\n[Path pseudo metrics] \n Assume the graph b is connected and let w  X \u00d7 X \u2192 [0,\u221e) be symmetric. To a path \u03b3 = (x_0,\u2026,x_n) we associate its length (with respect to w) by \n \n \n    L_w(\u03b3) = \u2211_k = 1^n w(x_k-1,w_k).\n\n \n The function\n \n \n    d_w  X \u00d7 X \u2192 [0,\u221e),    d_w(x,y) = inf{L_w(\u03b3) |\u03b3 path connecting x  and y}\n\n \n is called the path pseudo metric induced by w. It is readily verified that d_w is a pseudo metric. If the graph is locally finite and w(x,y) > 0 for all x \u223c y, then d_w is indeed a metric inducing the discrete topology on X.  For w = 1 the metric d:= d_1 is called combinatorial distance, as it counts the least number of edges in a path connecting x,y. \n \n The path pseudo metric d_w satisfies d_w(x,y) \u2264 w(x,y). Hence, it is p-intrinsic if \n \n \n    1/m(x)\u2211_y \u2208 X b(x,y) w(x,y)^p \u2264 1.\n\n \n One function w satisfying this inequality is given by \n \n \n    w(x,y) = m(x)^1/p/(x)^1/p\u2227m(y)^1/p/(y)^1/p.\n\n \n The induced metric will be investigated in further examples below. \n \n The combinatorial distance d satisfies d(x,y) = 1 for x \u223c y. Hence, it is p-intrinsic if and only if /m is bounded by 1. \n \n\n\n\nLet \u03c3 be a pseudo metric. We write X^\u03c3 for the completion of X with respect to \u03c3 and denote by \u2202_\u03c3 X = X^\u03c3\u2216 X the Cauchy boundary of X with respect to \u03c3 (if \u03c3 is not a metric consider a suitable quotient space). Clearly, \u03c3 can be uniquely extended to X^\u03c3. For A \u2286X^\u03c3 we let \n\n\n    \u03c3(x,A) = inf{\u03c3(x,y)| y \u2208 A}\n\n\nwith the convention \u03c3(x,A) = \u221e if A = \u2205. In what follows we will be interested in the behavior of the pseudo metric near the boundary. Therefore, we fix a cut-off D > 0 and introduce\n\n\n    \u03b4_\u03c3 X \u2192 [0,\u221e),  \u03b4_\u03c3(x) = \u03c3(x,\u2202_\u03c3 X) \u2227 D,\n\n\nwhere our convention implies \u03b4_\u03c3 = D if \u2202_\u03c3 X = \u2205. Note that \u03b4_\u03c3(x) > 0 for all x \u2208 X if and only if \u2202_\u03c3 X is closed in X^\u03c3.  The function  is 1-Lipschitz with respect to \u03c3. Hence, if \u03c3 is p-intrinsic, then |\u2207| \u2264 1. \n\n\nThe following is one  of the two main results of this paper. \n\n\n \n Let 1 < p < \u221e and let \u03c3 be a p-intrinsic pseudo metric.  Let h  X \u2192 (0,\u221e)  such that for all\n\u03b5 > 0 the function /m is bounded on \u03c3-bounded subsets of \n    {x \u2208 X | h(x) \u2265\u03b5}.\n\n \nThen \n\n\n    {f \u2208 H^1,p(X,m) ||\u2207 h|/h f \u2208\u2113^p(X,m)}\u2286 H_0^1,p(X,m).\n\n\n\n\n\n\n \n  * The possibility that  |\u2207 h|(x) = \u221e for some x \u2208 X is allowed in previous theorem. In this case, the condition |\u2207 h|/h f \u2208\u2113^p(X,m) is to be understood as f(x) = 0 for x \u2208{y \u2208 X | |\u2207 h|(y) = \u221e} =: N and 1_X \u2216 N f |\u2207 h|/h \u2208\u2113^p(X,m).\n \n  * The theorem holds true for all h \u2208 C_0(X), which is the uniform closure of C_c(X) in \u2113^\u221e. In this case, {x \u2208 X | h(x) \u2265\u03b5} is finite for any \u03b5 > 0. \n\n\n\n\n\n\n\nWe can apply this theorem to the bounded 1-Lipschitz function h = (and powers thereof). Since > 0 if \u2202_\u03c3 X is closed and |\u2207| \u2264 1,  we obtain the following geometric criterion. \n\n \n Let 1 < p < \u221e and let \u03c3 be a p-intrinsic pseudo metric with the following properties: \n \n  \n  \n  * \u2202_\u03c3 X is closed. \n  \n  * For all \u03b5 > 0 the function /m is bounded on \u03c3-bounded subsets of \n    {x \u2208 X |(x) \u2265\u03b5}.\n \n \n \nThen for any \u03b1 > 0 we have\n\n\n    {f \u2208 H^1,p(X,m) ||\u2207^\u03b1|/^\u03b1 f \u2208\u2113^p(X,m)}\u2286 H_0^1,p(X,m).\n\n\nIn particular, if f \u2208  H^1,p(X,m) satisfies f/\u2208\u2113^p(X,m), then f \u2208 H^1,p_0(X,m). \n\n\n\nAs noted above, if  \u2202_\u03c3 X = \u2205, then \u03b4_\u03c3 = D. In this case,  the second assumption on \u03c3 states that /m should be bounded on \u03c3-balls.  Pseudo metric spaces with finite balls are always complete and /m is always bounded on finite sets. Hence, we obtain the following corollary.   \n\n\n\n \nLet 1 < p < \u221e. If there exists a p-intrinsic pseudo metric with finite balls, then H^1,p(X,m) = H^1,p_0(X,m).\n\n\nApplying the theorem to \u03c3 = 0 and h = 1 we immediately obtain the following. \n\n\nLet 1 < p < \u221e and assume that /m is bounded. Then H^1,p(X,m) = H^1,p_0(X,m).\n\n\n\n\n\n \n  \n  * In the Euclidean setting mentioned in the introduction we have |\u2207\u03b4| = 1 almost surely and  \u2207\u03b4^\u03b1 = \u03b1\u03b4^\u03b1 - 1\u2207\u03b4 by the chain rule.  Hence,  there is no gradient term and no exponent in Harris criterion, cf.  <cit.>.\n  \n  \n  * For p = 2 Corollary\u00a0<ref> was first established in <cit.> under a slightly different assumption. We refer to <cit.> for related results. \n  \n  * The condition on /m used in Corollary\u00a0<ref> is fullfilled if bounded subsets of {x \u2208 X |(x) \u2265\u03b5} are finite.  The latter condition along with some examples is discussed in <cit.>. We will give more examples in Section\u00a0<ref>.\n \n\n\n\n\nUnder a superharmonicity assumption on  but without assuming \u03c3 is intrinsic the converse of Harris' criterion holds true. Indeed, instead of considering  one can actually use any strictly positive function. The following is the second main result of this paper. \n\n\n\nLet 1 <  p < \u221e and let h  X \u2192 (0,\u221e) with h \u2208\u2131_p \u2229\u2131_p/2 + 1 such that there exists a finite K \u2286 X and  \u03bb\u2208 with  h \u2265\u03bb h^p-1 on X \u2216 K. Then there exists C >0 such that \n \n\n    C \u2211_x \u2208 X |f(x)|^p |\u2207 h^1/2|^p(x)/h(x)^p/2 m(x) \u2264\ud835\udcac(f) + f_p^p\n\n \n for all f \u2208 H_0^1,p(X,m). In particular, \n \n\n    H_0^1,p(X,m) \u2286{f \u2208 H^1,p(X,m) ||\u2207 h^1/2|/h^1/2 f \u2208\u2113^p(X,m)}.\n\n\nIf, additionally,  sup{h(x)/h(y) | x,y \u2208 X,  x \u223c y} < \u221e,  then there exists C' > 0 such that \n\n\n    C' \u2211_x \u2208 X |f(x)|^p |\u2207 h|^p(x)/h(x)^p m(x) \u2264\ud835\udcac(f) + f_p^p\n\n \n for all f \u2208 H_0^1,p(X,m).\n\n\n\n\n \n  * As mentioned in the introduction Hardy inequalities on discrete spaces have recently gained quite some attention with a focus on optimality of the weights, see <cit.> for the case p = 2 and <cit.> for general 1 < p < \u221e. Here we do not focus on optimality of constants/weights but  simply on the inclusion of Sobolev spaces.  In Proposition\u00a0<ref> we provide explicit constants under the somewhat stronger assumption  h \u2265\u03bb h^p-1 on X. In the case p = 2 our Hardy inequality with weight |\u2207 h^1/2|^2/h is implicitly contained in <cit.> but it seems that for p \u2260 2 it is not (implicitly) contained in the literature. \n \n  * The condition h \u2208\u2131_p \u2229\u2131_p/2 + 1 is equivalent to h \u2208\u2131_p if p \u2265 2 and h \u2208\u2131_p/2 + 1 if p < 2, see Lemma\u00a0<ref> below. As discussed above, if h is bounded, then it satisfies these conditions. \n\n\n\n\nCombining this theorem and Corollary\u00a0<ref> we obtain the following  characterizations of H^1,p_0(X,m), which can be seen as discrete analogues of Harris' criterion and its converse. \n\n\n\n    Let 1 < p < \u221e and let \u03c3 be a p-intrinsic pseudo metric with the following properties: \n  \n  \n  * \u2202_\u03c3 X is closed.\n  \n  * For all \u03b5 > 0 the function /m is bounded on bounded subsets of \n    {x \u2208 X |(x) \u2265\u03b5}.\n \n  \n  * There exists a finite K \u2286 X and \u03bb\u2208 such that  _p  \u2265\u03bb^p-1 on X \u2216 K.\n  \n  \n  \n  \n  \n  \n Then\n  \n  \n    H^1,p_0(X,m) = {f \u2208 H^1,p(X,m) ||\u2207^1/2 |/^1/2  f \u2208\u2113^p(X,m)}.\n\n  \n\n\n \n\nAssume the situation of Corollary\u00a0<ref> and assume further:\n\n\n\n  * \n    sup_x,y \u2208 X, x \u223c y(x)/(y) < \u221e.\n\n  \n  * \n    inf_x \u2208 X |\u2207|(x) > 0.\n\n\n\nThen \n\n\n    H^1,p_0(X,m) = {f \u2208 H^1,p(X,m) |    f/\u2208\u2113^p(X,m)}.\n\n\n\n\n As already remarked above, the reason why in Corollary\u00a0<ref> we have to consider |\u2207^1/2 | /^1/2 instead of |\u2207|/ is the lack of a chain rule. Instead of using a chain rule we can estimate |\u2207^1/2| from below with the help of the mean value theorem but then we have to assume sup{h(x)/h(y) | x,y \u2208 X,  x \u223c y} < \u221e, see Lemma\u00a0<ref>. Moreover, in general we cannot expect |\u2207| to be bounded from below and so it appears as an assumption in Corollary\u00a0<ref>.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u00a7 SOME PROPERTIES OF DISCRETE SOBOLEV SPACES\n\n\nIn this section we establish some fundamental results for the discrete Sobolev spaces and energy functionals. The results in this section are all well known in the case p = 2 and we refer to <cit.> for most of them.  \n\n\n\nLet 1 \u2264 p < \u221e.  Let C \u2192 be L-Lipschitz. Then \n \n \n    \ud835\udcac(C \u2218 f) \u2264 L^p \ud835\udcac(f)\n\n \n for f \u2208 C(X).  In particular, \ud835\udcac(|f|) \u2264\ud835\udcac(f) and \n \n \n    \ud835\udcac(f \u2227 g)^1/p\u2264\ud835\udcac(f)^1/p + \ud835\udcac(g)^1/p\n\n \n for all f,g \u2208 C(X). \n\n\n The first inequality follows immediately from the definition of \ud835\udcac.  The result on |f| is a consequence of the absolute value being 1-Lipschitz. For the last statement it suffices to consider f,g \u2208\ud835\udc9f. Since \ud835\udcac^1/p is a seminorm on \ud835\udc9f, it follows directly  from f \u2227 g = (f + g - |f-g|)/2 and the result on the absolute value. \n\n\n\n\n Let 1 \u2264 p < \u221e. The functional \ud835\udcac is lower semicontinuous with respect to pointwise convergence, i.e., for all (f_n), f in C(X) the convergence f_n \u2192 f pointwise, as n \u2192\u221e, implies\n \n \n    \ud835\udcac(f) \u2264lim inf_n \u2192\u221e\ud835\udcac(f_n).\n\n \n\n\n This is a direct consequence of Fatou's lemma. \n\n\n\n\n\n\n\n \n For 1 < p < \u221e the Banach spaces H^1,p_0(X,m) and H^1,p(X,m) are uniformly convex and hence reflexive.\n\n\n\nUniformly convex spaces are reflexive and so it suffices to prove uniform convexity. Let E = {(x,y) \u2208 X \u00d7 X | b(x,y) > 0} and let\n\n\n    \u03bc X \u222a E \u2192 [0,\u221e),   \u03bc(z) = \u03bc(x)   if z \u2208 X  \n    \n                                                       b(z)/2p    if z \u2208 E\n                                                      .\n\nIt is well known that \u2113^p(X \u222a E, \u03bc) is uniformly convex. With this at hand the uniform convexity of H_0^1,p(X,m) and H^1,p(X,m) follow from \n\n\n    \u03b9 H^1,p(X,m) \u2192\u2113^p(X \u222a E,\u03bc),  \u03b9(f)(z) = \n                                                                              f(z)    if  z \u2208 X\n    \n                                                                              f(x) - f(y)    if  z = (x,y) \u2208 E\n\n\nbeing an isometry. \n\n\n\nNext we give an alternative description of H_0^1,p(X,m). We write \ud835\udc9f_0 for the space of functions f \u2208\ud835\udc9f for which there exists a sequence (\u03c6_n) in C_c(X) with \ud835\udcac(f - \u03c6_n) \u2192 0 and \u03c6_n \u2192 f pointwise, as n \u2192\u221e. \n\n \n  Let 1 < p < \u221e. Then H^1,p_0(X,m) = \ud835\udc9f_0 \u2229\u2113^p(X,m). \n\n\n In our discrete setting convergence in \u2113^p(X,m) implies pointwise convergence. Hence, we have  H^1,p_0(X,m) \u2286\ud835\udc9f_0 \u2229\u2113^p(X,m).\n \n H^1,p_0(X,m) \u2287\ud835\udc9f_0 \u2229\u2113^p(X,m): Let f \u2208 D^p_0 \u2229\u2113^p(X,m).  Choose a sequence (\u03c6_n) in C_c(X) with \u03c6_n \u2192 f pointwise and \ud835\udcac(f- \u03c6_n) \u2192 0, as n \u2192\u221e.  Consider the functions \n \n \n    \u03c8_n =  (\u03c6_n \u2227 |f|) \u2228 (-|f|).\n\n \n Then \u03c8_n \u2208 C_c(X) \u2286 H^1,p_0(X,m), |\u03c8_n| \u2264 |f| and \u03c8_n \u2192 f pointwise. Lebesgue's dominated convergence theorem implies \u03c8_n \u2192 f in \u2113^p(X,m). Using the contraction property Lemma\u00a0<ref> yields \n \n \n    \ud835\udcac(\u03c8_n)^1/p\u2264\ud835\udcac(\u03c6_n)^1/p + 2 \ud835\udcac(f)^1/p.\n\n \n This shows that (\u03c8_n) is a bounded sequence in the Banach space H^1,p_0(X,m). Using weak sequential compactness of bounded sets in reflexive spaces, we can assume without loss of generality \u03c8_n \u2192 g \u2208 H_0^1,p(X,m) weakly in H^1,p_0(X,m) (else consider a subsequence). Since in normed spaces weak and strong closures of convex sets coincide, we infer that for any N \u2208\u2115 we have\n \n \n    g \u2208 conv{\u03c8_n | n \u2265 N }^H^1,p_0(X,m).\n\n \n In particular, there exist finite convex combinations of (\u03c8_n) of the form \n \n \n    g_N = \u2211_n = N^K_N\u03bb_n^(N)\u03c8_n\n\n \n with g_N \u2192 g in H^1,p_0(X,m), as N \u2192\u221e. Since \u03c8_n \u2192 f \u2208\u2113^p(X,m), we also have g_N \u2192 f in \u2113^p(X,m), showing f = g \u2208 H^1,p_0(X,m).  \n\n\n\n For p = 2 this is the content of <cit.>.  \n\n\n\nNext we prove lower semicontinuity of \ud835\udcac when restricted to \ud835\udc9f_0. More precisely, we let \n\n\n    \ud835\udcac_0  C(X) \u2192  [0,\u221e],   \ud835\udcac_0(f) = \ud835\udcac(f)    if  f \u2208\ud835\udc9f_0\n    \u221e   else\n\n\nand show that this functional is lower semicontinuous. This is   more involved than lower semicontinuity of \ud835\udcac, as it does not follow directly from Fatou's lemma. \n\n\n\n\n Let 1 < p < \u221e. The functional \ud835\udcac_0 is lower semicontinuous with respect to pointwise convergence, i.e., for all (f_n), f in C(X) the convergence f_n \u2192 f pointwise, as n \u2192\u221e, implies\n \n \n    \ud835\udcac_0(f) \u2264lim inf_n \u2192\u221e\ud835\udcac_0(f_n).\n\n \n In particular, if (\ud835\udcac_0(f_n)) is bounded, then f \u2208\ud835\udc9f_0.\n\n\n It suffices to consider (f_n) in \ud835\udc9f_0^p with f_n \u2192 f pointwise and \n \n \n    lim inf_n \u2192\u221e\ud835\udcac_0(f_n) = lim_n \u2192\u221e\ud835\udcac_0(f_n) < \u221e.\n\n \n  By the definition of \ud835\udc9f_0 we can choose a sequence (\u03c6_n) in C_c(X) with \ud835\udcac(f_n - \u03c6_n) \u2192 0 and \u03c6_n \u2192 f pointwise. In particular, the sequence (\u03c6_n) is \ud835\udcac-bounded. \n \n \nWe denote by\n\n\n    \u00b7_\ud835\udcac\ud835\udc9f\u2192 [0,\u221e),  f_\ud835\udcac = \ud835\udcac(f)^1/p\n\n\nthe seminorm induced by the p-energy functional.  The space (\ud835\udc9f,\u00b7_\ud835\udcac) is uniformly convex, cf. the proof of Proposition\u00a0<ref>. Hence, the completion of (\ud835\udc9f / \ud835\udcac,\u00b7_\ud835\udcac) is reflexive. Using weak compactness of bounded sets in reflexive spaces and that convex sets have the same weak and strong closure, we infer the existence of finite convex combinations of (\u03c6_n) of the form \n \n \n    \u03c8_N = \u2211_n = N^K_N\u03bb^(N)_n \u03c6_n\n\n \n such that (\u03c8_N) is \u00b7_\ud835\udcac-Cauchy, cf. the argument given in the proof of Proposition\u00a0<ref>. By definition (\u03c8_N) belongs to C_c(X).  Moreover,  \u03c6_n \u2192 f pointwise, as n \u2192\u221e, implies \u03c8_N \u2192 f pointwise, as N \u2192\u221e.  The pointwise lower semicontinuity of \ud835\udcac yields \n \n \n    \ud835\udcac(f - \u03c8_N) \u2264lim inf_M \u2192\u221e\ud835\udcac(\u03c8_M - \u03c8_N) \u2192 0,  as  N \u2192\u221e,\n\n \n and we obtain f \u2208\ud835\udc9f_0. Since \ud835\udcac and \ud835\udcac_0 agree on \ud835\udc9f_0, the lower semicontinuity of \ud835\udcac implies \n \n \n    \ud835\udcac_0(f)    = \ud835\udcac(f) \u2264lim inf_n \u2192\u221e\ud835\udcac(f_n) = lim inf_n \u2192\u221e\ud835\udcac_0(f_n).\n\n \n\n\n\n\n \n Let 1 \u2264 p < \u221e. Let K \u2286 X such that /m is bounded on K. Then there exists a constant C \u2265 0 such that \n \n \n    \ud835\udcac (f 1_K) \u2264 C \u2211_x \u2208 K |f(x)|^p m(x)\n\n \n for all f \u2208 C(X). In particular, \n \n \n    {f \u2208\u2113^p(X,m) | f \u2286 K}\u2286 H^1,p_0(X,m).\n\n \n\n\n\n Let f \u2208 C(X) with suppf \u2286 K. Using the symmetry of b and the inequality (|w| + |z|)^p \u2264 2^p(|w|^p + |z|^p) we obtain \n \n \n    p \ud835\udcac(f)    = \u2211_x,y \u2208 X b(x,y) |f(x) - f(y)|^p \n       = \u2211_x,y \u2208 K b(x,y) |f(x) - f(y)|^p + 2 \u2211_x \u2208 K |f(x)|^p  \u2211_y \u2208 X \u2216 K b(x,y)\n       \u2264 2^p+1\u2211_x\u2208 K |f(x)|^p \u2211_y \u2208 K b(x,y) + 2 \u2211_x \u2208 K |f(x)|^p  \u2211_y \u2208 X \u2216 K b(x,y)\n       \u2264  C \u2211_x \u2208 K |f(x)|^p m(x).\n\n \n The statement on the discrete Sobolev spaces follows directly from this inequality and the density of C_c(X) in \u2113^p(X,m).\n \n\n\n\n\n\u00a7 DISCRETE CHAIN RULES AND HARDY INEQUALITY\n\n\n\nIn this section we collect some formulas replacing the chain rule in the discrete setting and use them to establish a Hardy inequality. \n\nWe start with a lemma on the domain of the formal Laplacian that guarantees absolute convergence of the sums involved in the computations below.  \n\n\n Let 1 \u2264 p,q < \u221e. \n \n  \n  * \u2131_p = {f \u2208 C(X) |\u2211_y \u2208 X b(x,y)|f(y)|^p-1 < \u221e for all  x \u2208 X}.\n  \n  * f \u2208 C(X) satisfies |\u2207 f|(x) < \u221e for all x \u2208 X if and only if f \u2208\u2131_p+1.\n  \n  * If p \u2264 q, then \u2131_q \u2286\u2131_p. \n \n\n\n  In particular,  we have \u2113^\u221e(X) \u2286\u2131_p for all 1 \u2264 p < \u221e and if f \u2208 C(X) satisfies \n \n \n    sup_x,y \u2208 X, x \u223c y|f(x)|/|f(y)| < \u221e,\n\n \n then f \u2208\u2131_p for all 1 \u2264 p < \u221e.\n\n\n (a): This follows directly from the summability condition on b and the inequality (|w| + |z|)^p-1\u2264 2^p(|w|^p-1 + |z|^p-1). For more details see <cit.>.\n \n (b): This follows directly from the definition of |\u2207 f| and \u2131_p+1.\n \n (c): This follows from the summability condition on b and H\u00f6lder's inequality. \n \n The 'In particular' statements are an immediate consequence of (a) and the summability condition on b.\n\n\n\n\nLet f \u2208 C(X) and let I \u2286 be an interval with f(X) \u2286 I. If  \u03c6\u2208 C^1(I) is increasing and concave, then  \n\n\n    |\u2207(\u03c6\u2218 f)|^p(x) \u2265inf_y \u223c x (\u03c6' (f(x) \u2227 f(y)))^p  |\u2207 f|^p(x),    x \u2208 X.\n\n\n\n\n\n\n\n\n\nThe first inequality is a consequence of the mean value theorem and \u03c6' being decreasing due to the concavity of \u03c6. \n\n\n\n\n\n\n \n  Let f  X \u2192 (0,\u221e) with f \u2208\u2131_p+1.  Then f \u2208\u2131_p and\n \n \n    2 f(x)    \u2112 f(x) = |\u2207 f|(x)^p \n       + 1/m(x)\u2211_y \u2208 X b(x,y) (f(x) + f(y))(f(x) - f(y)) |f(x) - f(y)|^p-2\n\n \n for all x \u2208 X, with all sums converging absolutely. \n\n\n\n  That f \u2208\u2131_p is a consequence of Lemma\u00a0<ref> (b) and (c). It also guarantees absolut convergence of all the sums in the statement and in the computations below. We compute\n \n \n    f(x) \u2112 f(x)     =  1/m(x)\u2211_y \u2208 X b(x,y) (f(x)^2 - f(x) f(y)) |f(x) - f(y)|^p-2\n       =  1/m(x)\u2211_y \u2208 X b(x,y) (f(x) -  f(y))^2 |f(x) - f(y)|^p-2\n          + 1/m(x)\u2211_y \u2208 X b(x,y) (f(x) f(y) - f(y)^2) |f(x) - f(y)|^p-2.\n\n\nAdding another f \u2112 f to both sides of this equation yields \n\n\n    2f(x) \u2112 f(x) = |\u2207 f|^p(x) + 1/m(x)\u2211_y \u2208 X b(x,y) (f(x)^2 - f(y)^2) |f(x) - f(y)|^p-2,\n\n\nwhich is the desired statement. \n\n\n\n  Let f  X \u2192 (0,\u221e) with f \u2208\u2131_p \u2229\u2131_p/2 + 1. Then f^1/2\u2208\u2131_p and\n\n\n    2 f(x)^1/2\u2112 (f^1/2)(x) \u2265  |\u2207 f^1/2|^p(x) + 1/2^p-2 f(x)^(p-2)/2\u2112 f(x).\n\n\n\n\n\n\n\n\n\n\n\n \n\n Lemma\u00a0<ref> ensures f^1/2\u2208\u2131_p such that all the quanties in the inequality are well-defined. We let g = f^1/2. As seen in Lemma\u00a0<ref> we have\n \n \n    2 g(x)    \u2112 g(x) = |\u2207 g|(x)^p \n       + 1/m(x)\u2211_y \u2208 X b(x,y) (g(x) + g(y))(g(x) - g(y)) |g(x) - g(y)|^p-2.\n\n\nWe need to estimate the second summand. We let \u2207_xyf  =  f(x) - f(y).  Using the mean value theorem we choose \u03be_xy\u2208 [f(x) \u2227 f(y), f(x) \u2228 f(y)] with\n\n\n    f(x)^1/2 - f(y)^1/2 = 1/2 \u03be_xy^1/2 (f(x) - f(y)).\n\n\nOur assumption  f \u2208\u2131_p \u2229\u2131_p/2+1 ensures that all sums in the following computation converge absolutely: \n\n\n    1/m(x)\u2211_y \u2208 X b(x,y) (g(x) + g(y))(g(x) - g(y)) |g(x) - g(y)|^p-2\n       =  1/2^p-2 m(x)\u2211_y \u2208 X b(x,y) (f(x) - f(y))  1/\u03be_xy^(p-2)/2| f(x) - f(y)|^p-2\n       =  1/2^p-2 m(x)\u2211_y \u2208 X, f(x) \u2265 f(y) b(x,y)  1/\u03be_xy^(p-2)/2\u2207_xy f^p-1\n          - 1/2^p-2 m(x)\u2211_y \u2208 X, f(x) < f(y) b(x,y)  1/\u03be_xy^(p-2)/2\u2207_yx f^p-1\n       \u22651/2^p-2 m(x)\u2211_y \u2208 X, f(x) \u2265 f(y) b(x,y)  1/f(x)^(p-2)/2\u2207_xy f^p-1\n          - 1/2^p-2 m(x)\u2211_y \u2208 X, f(x) < f(y) b(x,y)  1/f(x)^(p-2)/2\u2207_yx f^p-1\n       = 1/2^p-2 f(x)^(p-2)/2\u2112 f(x).\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n \n\n\nThe following lemma is the content of <cit.>.\n\n\nLet 1 < p < \u221e. Let h  X \u2192 (0,\u221e) with h \u2208\u2131_p. For every \u03c6\u2208 C_c(X) we have\n\n\n    \ud835\udcac(\u03c6) \u22652/p\u2211_x \u2208 X\u2112 h(x)/h(x)^p-1 |\u03c6(x)|^p m(x).\n\n\n\n\n\n\n  \n Let f  X \u2192 (0,\u221e) with f \u2208\u2131_p \u2229\u2131_p/2 + 1 and assume there exists \u03bb\u2208 with \u2112 f \u2265\u03bb f^p-1. Then for all \u03c6\u2208 C_c(X)\n \n \n    \ud835\udcac(\u03c6)    \u22651/p\u2211_x \u2208 X|\u2207 f^1/2|^p(x)/f(x)^p/2 |\u03c6(x)|^p m(x) +  \u03bb/p 2^p-2\u03c6_p^p.\n\n \n If, moreover, \n \n  \n    K = sup_x,y \u2208 X,   x \u223c yf(x)/f(y) < \u221e,\n\n \n then for all \u03c6\u2208 C_c(X)\n \n \n    \ud835\udcac(\u03c6)    \u22651/p 2^p K^p/2\u2211_x \u2208 X|\u2207 f|^p(x)/f(x)^p |\u03c6(x)|^p m(x) +  \u03bb/p 2^p-2\u03c6_p^p.\n\n\n\n By Lemma\u00a0<ref> the assumption on f yields f^1/2\u2208\u2131_p.  Applying Picone's inequality to h = f^1/2 shows\n \n \n    \ud835\udcac(\u03c6) \u22651/p\u2211_x \u2208 X2f(x)^1/2\u2112 (f^1/2)(x)/f(x)^p/2 |\u03c6(x)|^p m(x)\n\n \n for all \u03c6\u2208 C_c(X). From Lemma\u00a0<ref> we infer \n \n \n    2f(x)^1/2\u2112 (f^1/2)(x)/f(x)^p/2   \u2265 |\u2207 f^1/2|^p(x)/f(x)^p/2   + 1/2^p-2 f(x)^p - 1\u2112 f(x)\n       \u2265 |\u2207 f^1/2|^p(x)/f(x)^p/2   + \u03bb/2^p-2.\n\n \n Combining both inequalities shows the first claim. For the second inequality we use Lemma\u00a0<ref> to estimate\n\n\n    |\u2207 f^1/2|^p(x) \u2265inf_x \u223c y1/2^p (f(x) \u2228 f(y))^p/2 |\u2207 f|^p(x).\n\n\nSince by assumption f(y) \u2264 K f(x) for all x \u223c y, we  arrive at \n \n \n    |\u2207 f^1/2|^p(x)    \u22651/2^p K^p/2 f(x)^p/2   |\u2207 f|^p(x).\n\n \n\n\n\n\n\n\n\u00a7 PROOF OF THE MAIN RESULTS\n\n\nIn this section we prove the main results Theorem\u00a0<ref> and Theorem\u00a0<ref>.\n\n\n\n\nLet f \u2208 H^1,p(X,m) with |\u2207 h|/h f \u2208\u2113^p(X,m) be given. According to Proposition\u00a0<ref> it suffices to show f \u2208\ud835\udc9f_0^p.\n\nWe fix o \u2208 X. For n \u2208 we consider the function\n\n\n    \u03c7_n  X \u2192\u211d,    \u03c7_n(x) = (h(x) - 1/n)_+ \u00b7( (2 - \u03c3(x,o)/n)_+ \u2227 1 ).\n\n\nThen |\u03c7_n| \u2264 h,  \u03c7_n \u2192 h pointwise, as n \u2192\u221e, and \n\n\n    \u03c7_n \u2286 B^\u03c3_2n(o) \u2229{x \u2208 X | h(x) \u2265 1/n}.\n\n\nBy our assumption on \u03c3 the function /m is bounded on the latter set. \n\nLet f_n = (\u03c7_n / h) f. The support of f_n is cointained in the support of \u03c7_n and so Lemma\u00a0<ref> implies f_n \u2208 H^1,p_0(X,m). Since f_n \u2192 f pointwise, by Proposition\u00a0<ref>  it suffices to show that (\ud835\udcac(f_n)) is bounded for establishing f \u2208\ud835\udc9f_0^p. \n\nFor g \u2208 C(X) and x,y \u2208 X we write \u2207_xy g = g(x) - g(y). We use the discrete product rule \u2207_xy(gh) = g(x) \u2207_xy h + h(y) \u2207_xy g  and the inequality (|w| + |z|)^p\u2264 2^p(|w|^p + |z|^p) to estimate p \ud835\udcac(f_n) by \n\n\n    \u2211_x,y \u2208 X b(x,y) |\u2207_xy f_n|^p \n       = \u2211_x,y \u2208 X b(x,y)| \u03c7_n(x) \u2207_xy (f/h) + f(y)/h(y)\u2207_xy\u03c7_n  |^p \n       \u2264 2^p \u2211_x,y \u2208 X b(x,y)|\u03c7_n(x) \u2207_xy (f/h)|^p  + 2^p \u2211_x,y \u2208 X b(x,y) |f(y)/h(y)\u2207_xy\u03c7_n  |^p.\n\n\n\nWe use the discrete product rule and \n\n\n    \u2207_xy1/h = 1/h(x)h(y)\u2207_yx h\n\n\nto estimate the first summand of the right hand side in Inequality\u00a0<ref>: \n\n\n    \u2211_x,y \u2208 X b(x,y)|\u03c7_n(x) \u2207_xy (f/h)|^p\n       = \u2211_x,y \u2208 X b(x,y) | \u03c7_n(x)/h(x)\u2207_xy f + \u03c7_n(x) f(y) \u2207_xy1/h|^p\n       = \u2211_x,y \u2208 X b(x,y) | \u03c7_n(x)/h(x)\u2207_xy f + \u03c7_n(x) f(y)/h(x) h(y)\u2207_yxh |^p\n       \u2264 2^p \u2211_x,y \u2208 X b(x,y)| \u2207_xy f |^p + 2^p \u2211_x,y\u2208 X b(x,y)   |f(y)|^p/|h(y)|^p  |\u2207_yxh |^p \n       = p 2^p \ud835\udcac(f) + 2^p f |\u2207 h|/h_p^p.\n\n\n\nNext we turn to the second summand of the right hand side in Inequality\u00a0<ref>. We let \u03c1 X \u2192,  \u03c1(x) = (2 - \u03c3(x,o)/n)_+ \u2227 1. Then |\u03c1 | \u2264 1 and \u03c1 is 1/n-Lipschitz, which yields |\u2207\u03c1| \u2264 1/n. Using this and the discrete product rule we continue to estimate\n\n\n    \u2211_x,y \u2208 X b(x,y) |f(y)/h(y)\u2207_xy\u03c7_n  |^p \n       = \u2211_x,y \u2208 X b(x,y) |f(y) (h(y) - 1/n)_+/h(y)\u2207_xy\u03c1 + f(y)/h(y)\u03c1(x) \u2207_xy (h - 1/n)_+   |^p\n       \u2264 2^p \u2211_x,y \u2208 X b(x,y) |f(y)|^p   |\u2207_xy\u03c1|^p + 2^p \u2211_x,y \u2208 X b(x,y) |f(y)|^p/|h(y)|^p |\u2207_xy (h - 1/n)_+|^p\n       \u2264 2^p \u2211_y \u2208 X |f(y)|^p m(y) |\u2207\u03c1|^p(y) + 2^p \u2211_y \u2208 X |f(y)|^p |\u2207 h|^p(y)/|h(y)|^p m(y)\n       \u2264 2^p f_p^p + 2^p f |\u2207 h|/h_p^p.\n\n\nFor the second to last inequality we  used |\u2207_xy (h -1/n)_+| \u2264 |\u2207_xy h|.\n\nCombining all these estimates yields a constant C > 0 such that \n\n\n    C \ud835\udcac(f_n) \u2264\ud835\udcac(f) +  f_p^p +  f |\u2207 h|/h _p^p.\n\n\nBy our assumption on f the right hand side of this inequality is finite and we arrive at the desired conclusion. \n\n\n\n \nBy assumption there exists a finite K \u2286 X  with  h \u2265\u03bb h^p-1 on X \u2216 K. Since h (x) > 0 for all x \u2208 X and \u2112 h is bounded below on the finite set K,  there exists \u03bb' \u2208 with  \u2112 h \u2265\u03bb' h on K. Hence, we infer \u2112 h \u2265 (\u03bb\u2227\u03bb') h on X. With this at hand the first inequality in Proposition\u00a0<ref> yields the existence of C > 0 such that\n\n\n    C \u2211_x \u2208 X |\u03c6(x)|^p |\u2207 h^1/2|^p(x)/h(x)^p/2 m(x) \u2264\ud835\udcac(\u03c6) + \u03c6_p^p\n\n\nfor all \u03c6\u2208 C_c(X). By definition  H^1,p_0(X,m) is the closure of C_c(X) in H^1,p(X,m). Since the left-hand side of the above inequality is lower semicontinuous with respect to pointwise convergence and since \u00b7_H^1(X,m)-convergence implies pointwise convergence, the inequality extends to \u03c6\u2208 H^1,p_0(X,m). The same reasoning with the use of the second inequality in Proposition\u00a0<ref> shows the claim. \n\n\n\n\n\n\n\n\n\u00a7 SPHERICALLY SYMMETRIC TREES\n \n\nIn this section we apply our main results to spherically symmetric trees. We start with a short recap on spherically symmetric graphs, then provide a discussion on boundaries of trees in general  and finally apply everything to certain spherically symmetric trees.  \n\n\n\n\n\n\n \u00a7.\u00a7 Weakly spherically symmetrics graphs\n\n\nLet b be a graph on X with combinatorial metric d:= d_1, which was introduced in Example\u00a0<ref>, and fix o \u2208 X. A function  f  X \u2192 is called spherically symmetric (with respect to o) if f(x) = f(y) whenever d(x,o) = d(y,o). In this case, there exists f\u0303\u2115_0 \u2192 such that f(x) = f\u0303 (n) for x \u2208 X with d(x,o) = n. In what follows we abuse notation and do not distinguish between f\u0303 and f. \n\nFor n \u2208\u2115_0 we write S_n = {x \u2208 X | d(o,x) = n} for the combinatorial spheres around o. The incoming and outgoing degree functions _- and _+ are defined by \n\n\n    _\u00b1 X \u2192 [0,\u221e),  _\u00b1(x) = \u2211_y \u2208 S_d(x,o) \u00b1 1 b(x,y),\n\n\nwith the convention _-(o) = 0. \nWe call a graph b with measure m weakly spherically symmetric with respect to o if the functions \u03ba_\u00b1 := _\u00b1/m are spherically symmetric with respect to o. We will only deal with the special case where both _\u00b1 and m are spherically symmetric. \n\nThe important property of weakly spherically symmetric graphs is that whenever f \u2208\u2131_p is spherically symmetric, then \u2112 f is also spherically symmetric with\n\n\n    \u2112f (n)    =  \u03ba_+(n) (f(n) - f(n+1))|f(n) - f(n+1)|^p-2\n          + \u03ba_-(n) (f(n) - f(n-1))|f(n) - f(n-1)|^p-2\n\n\nif n \u2265 1 and \n\n\n    \u2112f (0) =    \u03ba_+(0)(f(0) - f(1))|f(0) - f(1)|^p-2.\n\n\nFor f \u2208 C(X) we let \n\n\n    A f _0 \u2192,    A(n) = \u2211_x \u2208 S_n f(x).\n\n\n For spherically symmetric m we then have\n\n\n    f_p^p = \u2211_n = 0^\u221e A|f|^p (n) m(n).\n\n\n\n\nWe refer to <cit.> for more details in the case when p = 2. \n\n\n\n\n\n \u00a7.\u00a7 Trees and metric boundaries\n Let  b on X be a connected tree, i.e., between any two different points in X there is a unique injective path connecting them. Moreover, we assume  b(x,y) \u2208{0,1} for all x,y \u2208 X. This and our summability condition on b yield that b is locally finite. We fix a root o \u2208 X. It is readily verified that b being  a tree is equivalent to _-(x) = 1 for all x \u2208 X\u2216{o}.\n \n We describe the metric boundary of a tree with respect to a path metric.  On a tree we say that z \u2208 X is an ancestor of x \u2208 X (with respect to o)  if every path from x to o an passes through z. Any set \u2205\u2260 A \u2286  X possesses a unique greatest common ancestor \u2227 A, which is an ancestor of all x \u2208 A and if z \u2208 X is another ancestor of all x \u2208 A, then d(z,o) \u2264 d(\u2227 A,o). Below we simply write x \u2227 y for \u2227{x,y}.\n \n Let w  X \u00d7 X \u2192 [0,\u221e) with w(x,y) > 0 for all x \u223c y. As discussed in Example\u00a0<ref> the corresponding path metric d_w induces the discrete topology on X. Hence, as the union of the open sets {x}, x \u2208 X, the set X is open in the completion and so \u2202_d_w X = X^d_w\u2216 X is closed.  For computing the metric boundary with respect to d_w we use two properties of path metrics on trees:  For x,y \u2208 X we have\n \n \n    d_w(x,y) = d_w(x,x\u2227 y) + d_w(x \u2227 y,y) = L_w(\u03b3_x,x \u2227 y) + L_w(\u03b3_x \u2227 y, y),\n\n \n where \u03b3_w,z denotes the unique injective path  connecting w,z \u2208 X. Moreover, if x,y,z \u2208 X satisfy x \u2227 y = x and y \u2227 z   = y,  then \n \n \n    d_w(x,z) = d_w(x,y) + d_w(y,z).\n\n \n \n \n Let d_w be a path metric as above such that \u2202_d_w X \u2260\u2205.  For every x \u2208\u2202_d_w  X there exists an infinite  injective path (x_n) with limit x and x_n \u2227 x_m = x_m for m \u2265 n. In particular, for n > m we have\n \n \n    d_w(x_n,x_m) = \u2211_k = m^n-1 w(x_k,x_k+1).\n\n \n \n\nThis is contained in the proof of <cit.>. The 'In particular' part follows by induction from the previously mentioned properties of path metrics on trees.\n\n\n\n\n\nLet \u03b3 = (x_n) be an infinite path. As for finite paths we define its length by\n\n\n    L_w(\u03b3) = \u2211_n = 1^\u221e w(x_n,x_n+1) \u2208 [0,\u221e].\n\n\n\n\n\n\n\n\n\n Let d_w  be a path metric as above. The following assertions are equivalent.\n \n  \n  * \u2202_d_w X = \u2205.\n  \n  * All infinite paths have infinite lenght with respect to w.\n  \n  * All balls with respect to d_w are finite. \n \n\n Moreover, for x \u2208 X we have  \n \n \n    d_w(x,\u2202_d_wX) = inf{L_w (\u03b3_x) |\u03b3_x  an infinite path starting at x}.\n\n \n\n\nThe statement on completeness is a  consequence of a more general theorem. On locally finite graphs (i), (ii) and (iii) are equivalent for path metrics, see <cit.>. This implies  the formula for d_w(x,\u2202_d_wX) whenever \u2202_d_wX = \u221e.\n\n\nNow assume \u2202_d_wX \u2260\u2205 and let \n\n\n    I_x := inf{L_w (\u03b3_x) |\u03b3_x  an infinite path starting at x}.\n\n\nd_w(x,\u2202_d_wX) \u2264 I_x: Let \u03b3_x = (x_n) be an infinite path starting in x. Without loss of generality we can assume L_w(\u03b3_x) < \u221e. Then \u03b3_x must eventually leave every finite set. Moreover, by triangly inequality we have for n \u2265 m\n\n\n    d_w(x_n,x_m) \u2264\u2211_k = m^n-1 w(x_k,x_k+1) \u2264\u2211_k = m^\u221ew(x_k,x_k+1),\n\n\nwhich tends to 0, as m \u2192\u221e. Hence, (x_n) is d_w-Cauchy with limit y \u2208X^d_w. Since the sequence eventually leaves every finite set, we obtain y \u2208\u2202_d_wX and\n\n\n\n    d_w(x,y) = lim_n \u2192\u221e d_w(x,x_n) \u2264lim_n \u2192\u221e\u2211_k = 1^n-1 w(x_k,x_k+1) = L_w(\u03b3_x).\n\n\nThis shows d_w(x,\u2202_d_wX) \u2264 I_x.\n\nd_w(x,\u2202_d_wX) \u2265 I_x: Let \u03b5 > 0. Choose y \u2208\u2202_d_w X with d_w(x,\u2202_d_wX) \u2265 d_w(x,y) - \u03b5. Let \u03b3 = (y_n) be a path converging to y with y_n \u2227 y_m = y_m for m \u2265 n as in Lemma\u00a0<ref>.\n\nCase 1: x = y_m for some m \u2208. \n\nLet m \u2208 with x = y_m and consider the path \u03b3_x = (y_m,y_m+1,\u2026). Then \n\n\n    d_w(x,y) = lim_n \u2192\u221e d_w(y_m,y_n) = lim_n \u2192\u221e\u2211_k = m^n-1 w(x_k,x_k+1) = L_w(\u03b3_x).\n\n\nCase 2: x  is not contained in \u03b3. \n \nThe sequence (y_n) leaves every finite set. Hence, there exists m \u2208 with d(x,o) \u2264 d(y_m,o). Let \u03b3' = (x,x_1,\u2026,x_n,y_m) be the shortest path connecting x and y_m. Since d(x,o) \u2264 d(y_m,o) and since y_n \u2227 y_m = y_m for n \u2265 m, this path does not pass through any other y_n,  n > m. Hence,  \u03b3_x = (x,x_1,\u2026,x_n,y_m,y_m+1,\u2026) is a geodesic and we obtain \n\n\n    d_w(x,y) = lim_n \u2192\u221e d_w(x,y_n) = L_w(\u03b3') +  lim_n \u2192\u221e d_w(y_m,y_n)  = L_w(\u03b3_x).\n\n\nCombining both cases yields the claim.\n\n\n\n\n\n\n \n \n \n\n \u00a7.\u00a7 Spherically symmetric trees\n Let b be as in the previous subsection.   We additionally assume that b is a spherically symmetric tree with branching numbers k\u2115_0 \u2192\u2115, i.e., _-(x) = 1 for all x \u2208 X \u2216{o} and _+(x) = k(n) if d(x,o) = n. Then (x) = k(n) + 1 if n = d(x,o) \u2265 1 and (o) = k(0).   Furthermore, we let m  X \u2192 (0,\u221e) be spherically symmetric and consider the weights\n \n \n    w(x,y) = m(x)^1/p/(x)^1/p\u2227m(y)^1/p/(y)^1/p,\n\n \n which were introduced Example\u00a0<ref>. We now compute all the quantities relevant for applying our main results (more precisely their culmination in Corollary\u00a0<ref>) to the function \u03b4_d_w.\n \n\nWe fix x \u2208 X with d(x,o) = n \u2208. The case n = 0 can be treated similarly but will not really matter in computations. Let y \u2208 X with d(y,o) = n + 1. Then \n \n \n    w(x,y) = m(n)^1/p/(k(n)+ 1) ^1/p\u2227m(n+1)^1/p/(k(n+1) + 1)^1/p =: \u03b1(n).\n\n\nThe spherical symmetry implies that a shortest infinite path  \u03b3_x = (x_0,x_1,\u2026) with respect to w starting in x always increases its combinatorial distance to the root, i.e., d(x_k+1,o) = d(x_k,o) + 1 for all k \u2208. Iterating this yields d(x_k,o) = d(x,o) + k = n + k and our formula for w yields\n\n\n    L_w(\u03b3_x) =   \u2211_k = 0^\u221e w(x_k,x_k+1) = \u2211_k = n^\u221e\u03b1(k).\n\n\nUsing Proposition\u00a0<ref> this shows \u2202_d_w X \u2260\u2205 if and only if \u03b1\u2208\u2113^1(). In particular, we obtain the following general result.\n\n\nLet 1 < p < \u221e. Assume the situation described above with \u03b1\u2209\u2113^1(). Then H^1,p(X,m) = H_0^1,p(X,m). \n\n\n As discussed, \u03b1\u2209\u2113^1() leads to \u2202_d_w X = \u2205, which according to Proposition\u00a0<ref> is equivalent to d_w-balls being finite. We infer H^1,p(X,m) = H_0^1,p(X,m) from Corollary\u00a0<ref>.\n\n\n\n\n\n\n\nNow we assume the latter case \u03b1\u2208\u2113^1(). Letting  D = \u2211_k=1^\u221e\u03b1(k) we obtain \n\n\n    \u03b4_d_w(x) = d_w(x, \u2202_d_w X) \u2227 D = \u2211_k=n^\u221e\u03b1(k),\n\n\nshowing that \u03b4_d_w is spherically symmetric. Since \u03b4_d_w(n) \u2192 0, for n \u2192\u221e, the set {z \u2208 X  |\u03b4_d_w(z) \u2265\u03b5} is finite for any \u03b5 > 0. For y \u223c x we either have d(y,o) = n - 1 or d(y,o) = n+1. Since  \u03b4_d_w(n) \u2264\u03b4_d_w(n-1) and\n\n\n    \u03b4_d_w(n)/\u03b4_d_w(n + 1) =  \u03b1(n) + \u03b4_d_w(n+1)/\u03b4_d_w(n + 1) = 1 + \u03b1(n)/\u03b4_d_w(n + 1),\n\n\nwe have\n\n\n    sup_y,z \u2208 X, y\u223c z\u03b4_d_w(y)/\u03b4_d_w(z) < \u221e\n\n\nif and only if sup_n \u03b1(n)/\u03b4_d_w(n+1) < \u221e. \n\nProposition\u00a0<ref> shows that H^1,p(X,m) \u2260 H^1,p_0(X,m) implies m being small relative to k. Hence, for simplicity  we assume from now on that n \u21a6 m(n) is decreasing and n \u21a6 k(n) is increasing, which leads to \u03b1(n) = m(n+1)^1/p/(k(n+1) + 1)^1/p. The gradient of \u03b4_d_w is then given by\n\n\n    |\u2207\u03b4_d_w|^p(n)    = k(n)/m(n)|\u03b4_d_w(n) - \u03b4_d_w(n+1)|^p  +  1/m(n)|\u03b4_d_w(n) - \u03b4_d_w(n-1)|^p\n       = k(n)\u03b1(n)^p/m(n) +   \u03b1(n-1)^p/m(n)\n       = k(n)m(n+1)/m(n)(k(n+1) + 1) + 1/k(n) + 1,\n\n\nand we have\n\n\n    \u2112\u03b4_d_w(n)    = k(n)/m(n) (\u03b4_d_w(n) - \u03b4_d_w(n+1))^p-1 - 1/m(n) (\u03b4_d_w(n-1) - \u03b4_d_w(n))^p-1\n       = k(n)\u03b1(n)^p-1/m(n) - \u03b1(n-1)^p-1/m(n)\n       =  k(n)m(n+1)^(p-1)/p/m(n)(k(n+1) + 1)^(p-1)/p -  1/(k(n) + 1)^(p-1)/pm(n)^1/p.\n\n\nFor the first equality above we used that n \u21a6\u03b4_d_w(n) is  decreasing.  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nWe now apply Corollary\u00a0<ref> in two concrete examples, where k and m are polynomial, respectively exponential functions. Given two function f,g \u2192 we say f(n) \u224d g(n) for n \u2265 K if there exist constants C,D > 0 such that C f(n) \u2264 g \u2264 D f(n) for all n \u2265 K.  \n\n\n\n\n[Polynomial growth]\nLet 1 < p < \u221e. Let \u03b3  > 0 > \u03b7 and assume k is increasing with k(n) \u224d n^\u03b3 for n \u2265 1 and  m is decreasing with m(n) \u224d n^\u03b7 for n \u2265 1. If \u03b3\u2264\u03b7 + p, then H^1,p(X,m) = H^1,p_0(X,m). If \u03b3 > \u03b7 + p, then there exist C> 0 such that \n\n\n    C \u2211_n = 1^\u221e A |f|^p (n) n^\u03b3 - p\u2264\ud835\udcac(f)  + \u2211_n = 1^\u221e A |f|^p (n) n^\u03b7 + f(0)^p m(0)\n\n\nfor all f \u2208  H^1,p_0(X,m). In particular,  f \u2208 H^1,p_0(X,m) if and only if f \u2208\ud835\udc9f and \n\n\n    \u2211_n = 1^\u221e A |f|^p (n) n^\u03b3 - p < \u221e.\n\n\n\n\nOur assumptions yield \u03b1(n) \u224d1/n^(\u03b3 - \u03b7)/p for n \u2265 1. Hence, we have \u03b1\u2208\u2113^1() \n\n\n\n\n\nif and only if \u03b3 > \u03b7 + p.  In this case, we can estimate \n\n\n    \u03b4_d_w(n) = \u2211_l=n^\u221e\u03b1(l) \u224d\u2211_l=n^\u221e1/l^(\u03b3 - \u03b7)/p\u224d1/n^(\u03b3 - \u03b7)/p -1 ,\n\n\nwhich implies \n\n\n    sup_n \u03b1(n)/\u03b4_d_w(n+1) < \u221e.\n\n\nFor the gradient we obtain \n\n\n    |\u2207\u03b4_d_w|^p(n)    \u224dn^\u03b3 (n + 1)^\u03b7/n^\u03b7 ((n+1)^\u03b3 + 1) + 1/n^\u03b3 + 1\u224d 1.\n\n\nFor estimating the Laplacian we find constants  C,C',D > 0 such that for n \u2208 we have\n\n\n    \u2112\u03b4_d_w(n)    \u2265 C n^\u03b3 (n+1)^\u03b7 (p-1)/p/n^\u03b7((n+1)^\u03b3 + 1)^(p-1)/p -  D 1/(n^\u03b3 + 1)^(p-1)/pn^\u03b7/p\n       \u2265 C' n^(\u03b3 - \u03b7)/p - D.\n\n\nSince \u03b3 > \u03b7 + p, this shows  \u2112\u03b4_d_w\u2265 0 outside some finite set. Now the claims follow from Corollary\u00a0<ref> and our discussion prior to this example.\n\n\n\n[Exponential growth]\n Let \u03b3 > 1 \u2265\u03b7 > 0 and assume k is increasing with k(n) \u224d\u03b3^n  for n \u2265 0 and m is decreasing with m(n) \u224d\u03b7^n for n \u2265 0. Then there exists C > 0 such that \n \n \n    C \u2211_n = 0^\u221e A |f|^p (n)  \u03b3^n  \u2264\ud835\udcac(f)  + \u2211_n = 0^\u221e A |f|^p (n) \u03b7^n\n\n \n for all f \u2208 H^1,p_0(X,m).  Moreover,  f \u2208 H^1,p_0(X,m) if and only if f \u2208\ud835\udc9f and \n\n\n    \u2211_n = 1^\u221e A |f|^p (n) \u03b3^n < \u221e.\n\n \n\n\n\n Let \u03be = (\u03b7/\u03b3)^1/p such that \u03b1(n) \u224d\u03be^n for n \u2265 0. Since \u03b7 < \u03b3, we obtain  \u03b1\u2208\u2113^1() and \n \n \n    \u03b4_d_w(n) \u224d\u2211_l=n^\u221e\u03b7^l/p/(\u03b3^l + 1)^1/p\u224d\u03be^n/1-\u03be,    n \u2265 0.\n\n \n This implies sup_n \u03b1(n)/\u03b4_d_w(n+1) < \u221e. For the gradient of \u03b4_d_w we obtain \n \n \n    |\u2207\u03b4_d_w|^p(n)    \u224d\u03b3^n \u03b7^n+1/\u03b7^n (\u03b3^n+1 + 1) + 1/\u03b3^n + 1\u224d 1,    n \u2265 1.\n\n \nFor estimating the Laplacian we find constants C,C',D,D'  > 0 such that  for n \u2265 1\n \n    \u2112\u03b4_d_w(n)    \u2265 C \u03b3^n \u03b7^(n+1)(p-1)/p/\u03b7^n (\u03b3^n+1 + 1)^(p-1)/p - D 1/(\u03b3^n + 1)^(p-1)/p\u03b7^n/p\n       \u2265 C' \u03be^-n  - D'/\u03b3^n\u03be^-n.\n\n Since \u03be < 1 and \u03b3 > 1, we infer \u2112\u03b4_d_w\u2265 0 outside a finite set. Now the claims follow from Corollary\u00a0<ref> and our discussion prior to this example.\n\n\n\n Similar results hold true for other classes of spherically symmetric graphs. Most notably, spherically symmetric anti-trees can be treated as above. We  briefly recall their definition and leave the details to the reader. \n \n A connected graph b over X with fixed o \u2208 X and b(x,y) \u2208{0,1} for all x,y \u2208 X is called spherically symmetric anti-tree if x \u223c y whenever x \u2208 S_n and y \u2208 S_n + 1 or y \u2208 S_n and x \u2208 S_n+1 for some n \u2208_0.  In other words, anti-trees are those connected graphs in which all points from S_n are connected to all points from S_n+1. They possess the largest number of edges between S_n and S_n+1 as possible (namely |S_n| \u00b7 |S_n+1|). This is opposite to connect trees, who possess the least number of edges between S_n and S_n+1 without loosing  connectedness (namely |S_n+1|). The anti-tree with |S_n| = n + 1, n \u2265 0, appeared in <cit.> as an example.  General anti-trees were introduced in <cit.> to provide examples of stochastically incomplete graphs of  polynomial volume growth with respect to the combinatorial metric. \n \n Spherically symmetric anti-trees satisfy _+(n) = |S_n + 1| for n \u2265 0 and _-(n) =  |S_n-1| for n \u2265 1.  Equipping them with a spherically symmetric m and the p-intrinsic metric d_w discussed above, \u2202_d_w X consists of at most one point (use that points in consecutive spheres are connected) and for n \u2265 1 we have\n \n \n    d(n,\u2202_d_wX) = \u2211_l = n^\u221em(l)^1/p/ (|S_l-1|  + |S_l + 1|)^1/p\u2227m(l+1)^1/p/ (|S_l|  + |S_l + 2|)^1/p.\n\n \n With this at hand similar results as for trees can be established using the formulas for the norm of the gradient and for the Laplacian on spherically symmetric graphs. We refrain from giving further details. \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nplain\n \n\n\n"}